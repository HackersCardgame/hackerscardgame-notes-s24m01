(function ensightenInit(){var ensightenOptions = {client: "nzz", clientId: 942, publishPath: "prod-nzz", bootstrapVersion: "v3_20200123", isPublic:0, serverComponentLocation: "ens.nzz.ch/nzz/prod-nzz/serverComponent.php", staticJavascriptPath: "ens.nzz.ch/nzz/prod-nzz/code/", ns: 'Bootstrapper', nexus:"ens.nzz.ch", scUseCacheBuster: "true", enableTagAuditBeacon : "false", enablePagePerfBeacon : "false", registryNs : "ensBootstraps", generatedOn : "Wed Jul 13 08:51:14 GMT 2022", beaconSamplingSeedValue: 11, dataLayerName: "ensDataLayer"};
if ( !window[ensightenOptions.ns] ) {
window[ensightenOptions.registryNs]||(window[ensightenOptions.registryNs]={});
window[ensightenOptions.registryNs][ensightenOptions.ns]=window[ensightenOptions.ns]=function(h){function n(a){this.name="DependencyNotAvailableException";this.message="Dependency with id "+a+"is missing"}function p(a){this.name="BeaconException";this.message="There was an error durring beacon initialization";a=a||{};this.lineNumber=a.lineNumber||a.line;this.fileName=a.fileName}function q(){for(var a=c.dataDefinitionIds.length,b=!0,e=0;e<a;e++){var f=c.dataDefinitions[c.dataDefinitionIds[e]];if(!f||
null==f.endRegistration){b=!1;break}}b&&c.callOnDataDefintionComplete()}var d={},c={};c.ensightenOptions=ensightenOptions;c.scDataObj={};d.version="1.26.0";d.nexus=h.nexus||"nexus.ensighten.com";d.rand=-1;d.currSec=(new Date).getSeconds();d.options={interval:h.interval||100,erLoc:h.errorLocation||d.nexus+"/error/e.gif",scLoc:h.serverComponentLocation||d.nexus+"/"+h.client+"/serverComponent.php",sjPath:h.staticJavascriptPath||d.nexus+"/"+h.client+"/code/",alLoc:h.alertLocation||d.nexus+"/alerts/a.gif",
publishPath:h.publishPath,isPublic:h.isPublic,client:h.client,clientId:h.clientId,enableTagAuditBeacon:h.enableTagAuditBeacon,beaconSamplingSeedValue:h.beaconSamplingSeedValue||-1,dataLayerName:h.dataLayerName||"ensDataLayer"};d.ruleList=[];d.allDeploymentIds=[];d.runDeploymentIds=[];d.runRuleIds=[];d.exceptionList=[];d.ensightenVariables={};d.appIdWhitelist=[];d.appIdBlacklist=[];window[d.options.dataLayerName]&&window[d.options.dataLayerName][0]&&(window[d.options.dataLayerName][0]["ens.whitelist"]&&
(d.appIdWhitelist=window[d.options.dataLayerName][0]["ens.whitelist"]),window[d.options.dataLayerName][0]["ens.blacklist"]&&(d.appIdBlacklist=window[d.options.dataLayerName][0]["ens.blacklist"]));d.canRuleRunByAppId=function(a){return a?a&&!a.appId||a&&-1==a.appId||0==d.appIdWhitelist.length&&0==d.appIdBlacklist.length?!0:0<d.appIdWhitelist.length&&0==d.appIdBlacklist.length?-1==d.appIdWhitelist.indexOf(a.appId)?!1:!0:0==d.appIdWhitelist.length&&0<d.appIdBlacklist.length?-1==d.appIdBlacklist.indexOf(a.appId)?
!0:!1:0<d.appIdWhitelist.length&&0<d.appIdBlacklist.length&&-1==d.appIdBlacklist.indexOf(a.appId)&&-1!=d.appIdWhitelist.indexOf(a.appId)?!0:!1:!1};d.test=function(a){if(d.canRuleRunByAppId(a)&&!(a.executionData.hasRun||a.executionData.runTime&&0<a.executionData.runTime.length)){for(var b=0;b<a.dependencies.length;b++)if(!1===a.dependencies[b]())return;a.execute()}};n.prototype=Error();n.prototype||(n.prototype={});n.prototype.constructor=n;d.DependencyNotAvailableException=n;p.prototype=Error();p.prototype||
(p.prototype={});p.prototype.constructor=p;d.BeaconException=p;d.checkForInvalidDependencies=function(a,b,e,f){for(a=0;a<e.length;a++)if("DEPENDENCYNEVERAVAILABLE"===e[a])return c.currentRuleId=this.id,c.currentDeploymentId=this.deploymentId,c.reportException(new d.DependencyNotAvailableException(f[a])),b&&-1!==b&&d.allDeploymentIds.push(b),!0;return!1};c.currentRuleId=-1;c.currentDeploymentId=-1;c.reportedErrors=[];c.reportedAlerts=[];c.AF=[];c._serverTime="";c._clientIP="";c.sampleBeacon=function(){var a=
!1;try{var b=(d.currSec||0)%20,e=d.options.beaconSamplingSeedValue;-1===e?a=!0:0!==b&&0===e%b&&(a=!0)}catch(f){}return a};c.getServerComponent=function(a){c.callOnGetServerComponent();c.insertScript(window.location.protocol+"//"+d.options.scLoc,!1,a||!0)};c.setVariable=function(a,b){d.ensightenVariables[a]=b};c.getVariable=function(a){return a in d.ensightenVariables?d.ensightenVariables[a]:null};c.testAll=function(){for(var a=0;a<d.ruleList.length;a++)d.test(d.ruleList[a])};c.executionState={DOMParsed:!1,
DOMLoaded:!1,dataDefinitionComplete:!1,conditionalRules:!1,readyForServerComponent:!1};c.reportException=function(a){a.timestamp=(new Date).getTime();d.exceptionList.push(a);a=window.location.protocol+"//"+d.options.erLoc+"?msg="+encodeURIComponent(a.message||"")+"&lnn="+encodeURIComponent(a.lineNumber||a.line||-1)+"&fn="+encodeURIComponent(a.fileName||"")+"&cid="+encodeURIComponent(d.options.clientId||-1)+"&client="+encodeURIComponent(d.options.client||"")+"&publishPath="+encodeURIComponent(d.options.publishPath||
"")+"&rid="+encodeURIComponent(c.currentRuleId||-1)+"&did="+encodeURIComponent(c.currentDeploymentId||-1)+"&errorName="+encodeURIComponent(a.name||"");a=c.imageRequest(a);a.timestamp=(new Date).getTime();this.reportedErrors.push(a)};c.Rule=function(a){this.execute=function(){this.executionData.runTime.push(new Date);c.currentRuleId=this.id;c.currentDeploymentId=this.deploymentId;try{this.code()}catch(b){window[ensightenOptions.ns].reportException(b)}finally{this.executionData.hasRun=!0,-1!==this.deploymentId&&
(d.runDeploymentIds.push(this.deploymentId),d.runRuleIds.push(this.id)),c.testAll()}};this.id=a.id;this.deploymentId=a.deploymentId;this.dependencies=a.dependencies||[];this.code=a.code;this.appId=a.appId;this.executionData={hasRun:!1,runTime:[]}};c.registerRule=function(a){if(c.getRule(a.id)&&-1!==a.id)return!1;d.ruleList.push(a);-1!==a.deploymentId&&d.allDeploymentIds.push(a.deploymentId);c.testAll();return!0};c.getRule=function(a){for(var b=0;b<d.ruleList.length;b++)if(d.ruleList[b].id===a)return d.ruleList[b];
return!1};c.getRuleList=function(){return d.ruleList};c.clearRuleList=function(){d.ruleList=[]};c.getAllDeploymentIds=function(){return d.allDeploymentIds};c.getRunRuleIds=function(){return d.runRuleIds};c.getRunDeploymentIds=function(){return d.runDeploymentIds};c.hasRuleRun=function(a){return(a=c.getRule(a))?a.executionData.hasRun:!1};d.toTwoChar=function(a){return(2===a.toString().length?"":"0")+a};c.Alert=function(a){var b=new Date;b=b.getFullYear()+"-"+d.toTwoChar(b.getMonth())+"-"+d.toTwoChar(b.getDate())+
" "+d.toTwoChar(b.getHours())+":"+d.toTwoChar(b.getMinutes())+":"+d.toTwoChar(b.getSeconds());this.severity=a.severity||1;this.subject=a.subject||"";this.type=a.type||1;this.ruleId=a.ruleId||-1;this.severity=encodeURIComponent(this.severity);this.date=encodeURIComponent(b);this.subject=encodeURIComponent(this.subject);this.type=encodeURIComponent(this.type)};c.generateAlert=function(a){a=c.imageRequest(window.location.protocol+"//"+d.options.alLoc+"?d="+a.date+"&su="+a.subject+"&se="+a.severity+"&t="+
a.type+"&cid="+d.options.clientId+"&client="+d.options.client+"&publishPath="+d.options.publishPath+"&rid="+c.currentRuleId+"&did="+c.currentDeploymentId);a.timestamp=(new Date).getTime();this.reportedAlerts.push(a)};c.imageRequest=function(a){var b=new Image(0,0);b.src=a;return b};c.insertScript=function(a,b,e){var f=document.getElementsByTagName("script"),g;if(void 0!==b?b:1)for(g=0;g<f.length;g++)if(f[g].src===a&&f[g].readyState&&/loaded|complete/.test(f[g].readyState))return;if(e){e=1==e&&"object"==
typeof c.scDataObj?c.scDataObj:e;d.rand=Math.random()*("1E"+(10*Math.random()).toFixed(0));b=window.location.href;"object"===typeof e&&e.PageID&&(b=e.PageID,delete e.PageID);if("object"===typeof e)for(g in e){g=~b.indexOf("#")?b.slice(b.indexOf("#"),b.length):"";b=b.slice(0,g.length?b.length-g.length:b.length);b+=~b.indexOf("?")?"&":"?";for(k in e)b+=k+"="+e[k]+"&";b=b.slice(0,-1)+g;break}a=a+"?namespace="+(ensightenOptions.ns+"&");a+="staticJsPath="+ensightenOptions.staticJavascriptPath+"&";a+="publishedOn="+
ensightenOptions.generatedOn+"&";a+="ClientID="+encodeURIComponent(d.options.clientId)+"&PageID="+encodeURIComponent(b)}(function(l,m,r){var t=m.head||m.getElementsByTagName("head");setTimeout(function(){if("item"in t){if(!t[0]){setTimeout(arguments.callee,25);return}t=t[0]}var u=m.createElement("script");u.src=r;u.onload=u.onerror=function(){this.addEventListener&&(this.readyState="loaded")};t.insertBefore(u,t.firstChild)},0)})(window,document,a)};c.loadScriptCallback=function(a,b,e){var f=document.getElementsByTagName("script"),
g=f[0];if(e)for(e=0;e<f.length;e++)if(f[e].src===a&&f[e].readyState&&/loaded|complete/.test(f[e].readyState))try{b()}catch(l){window[ensightenOptions.ns].reportException(l)}finally{return}f=document.createElement("script");f.type="text/javascript";f.async=!0;f.src=a;f.onerror=function(){this.addEventListener&&(this.readyState="loaded")};f.onload=f.onreadystatechange=function(){if(!this.readyState||"complete"===this.readyState||"loaded"===this.readyState){this.onload=this.onreadystatechange=null;this.addEventListener&&
(this.readyState="loaded");try{b.call(this)}catch(l){window[ensightenOptions.ns].reportException(l)}}};g.parentNode.insertBefore(f,g)};c.insertPageFiles=function(a){var b=0,e=0,f=function(){e==a.length-1&&window[ensightenOptions.ns].callOnPageSpecificCompletion();e++};for(b=0;b<a.length;++b)window[ensightenOptions.ns].loadScriptCallback(a[b],f)};c.unobtrusiveAddEvent=function(a,b,e){try{var f=a[b]?a[b]:function(){};a[b]=function(){e.apply(this,arguments);return f.apply(this,arguments)}}catch(g){window[ensightenOptions.ns].reportException(g)}};
c.anonymous=function(a,b){return function(){try{c.currentRuleId=b?b:"anonymous",a()}catch(e){window[ensightenOptions.ns].reportException(e)}}};c.setCurrentRuleId=function(a){c.currentRuleId=a};c.setCurrentDeploymentId=function(a){c.currentDeploymentId=a};d.bind=function(a,b,e,f,g){if("function"===typeof a)a=new c.Rule({id:b||-1,deploymentId:e||-1,appId:f||-1,dependencies:"immediate"==g?[]:[function(){return window[ensightenOptions.ns].executionState[g]}],code:a});else if("object"!==typeof a)return!1;
c.registerRule(a)};c.bindImmediate=function(a,b,e,f){d.bind(a,b,e,f,"immediate")};c.bindDOMParsed=function(a,b,e,f){d.bind(a,b,e,f,"DOMParsed")};c.bindDOMLoaded=function(a,b,e,f){d.bind(a,b,e,f,"DOMLoaded")};c.bindPageSpecificCompletion=function(a,b,e,f){d.bind(a,b,e,f,"conditionalRules")};c.bindOnGetServerComponent=function(a,b,e,f){d.bind(a,b,e,f,"readyForServerComponent")};c.bindDataDefinitionComplete=function(a,b,e,f){d.bind(a,b,e,f,"dataDefinitionComplete")};c.checkHasRun=function(a){if(0===
a.length)return!0;for(var b,e=0;e<a.length;++e)if(b=c.getRule(parseInt(a[e],10)),!b||!b.executionData.hasRun)return!1;return!0};d.bindDependency=function(a,b,e,f,g,l,m){var r=[];if(!d.checkForInvalidDependencies(b,f,e,g)){"immediate"==!m&&r.push(function(){return window[ensightenOptions.ns].executionState[m]});r.push(function(){return window[ensightenOptions.ns].checkHasRun(e)});if("function"===typeof a)a=new c.Rule({id:b||-1,deploymentId:f||-1,appId:l||-1,dependencies:r,code:a});else if("object"!==
typeof a)return!1;c.registerRule(a)}};c.bindDependencyImmediate=function(a,b,e,f,g,l){d.bindDependency(a,b,e,f,g,l,"immediate")};c.bindDependencyDOMLoaded=function(a,b,e,f,g,l){d.bindDependency(a,b,e,f,g,l,"DOMLoaded")};c.bindDependencyDOMParsed=function(a,b,e,f,g,l){d.bindDependency(a,b,e,f,g,l,"DOMParsed")};c.bindDependencyPageSpecificCompletion=function(a,b,e,f,g,l){d.bindDependency(a,b,e,f,g,l,"conditionalRules")};c.bindDependencyOnGetServerComponent=function(a,b,e,f,g,l){d.bindDependency(a,b,
e,f,g,l,"readyForServerComponent")};c.bindDependencyDataDefinitionComplete=function(a,b,e,f,g,l){d.bindDependency(a,b,e,f,g,l,"dataDefinitionComplete")};c.dataDefintionIds=[];c.dataDefinitions=[];c.pageSpecificDataDefinitionsSet=!1;c.setPageSpecificDataDefinitionIds=function(a){for(var b=a?a.length:0,e=0;e<b;e++){var f=a[e];if(Array.prototype.indexOf)-1==c.dataDefinitionIds.indexOf(f)&&c.dataDefinitionIds.push(f);else{for(var g=!1,l=c.dataDefinitionIds.length,m=0;m<l;m++)if(c.dataDefinitionIds[m]===
f){g=!0;break}g||c.dataDefinitionIds.push(f)}}c.pageSpecificDataDefinitionsSet=!0;q()};c.DataDefinition=function(a,b){this.id=a;this.registrationFn=b;this.endRegistrationTime=this.startRegistrationTime=null;this.startRegistration=function(){this.startRegistrationTime=new Date};this.endRegistration=function(){this.endRegistrationTime=new Date}};c.registerDataDefinition=function(a,b){var e=c.dataDefinitions[b];e||(e=new c.DataDefinition(b,a),c.dataDefinitions[b]=e);e.startRegistrationTime||(e.startRegistration(),
e.registrationFn(),e.endRegistration());c.pageSpecificDataDefinitionsSet&&q()};c.callOnDataDefintionComplete=function(){c.executionState.dataDefinitionComplete=!0;c.testAll()};c.callOnDOMParsed=function(){window[ensightenOptions.ns].executionState.DOMParsed=!0;window[ensightenOptions.ns].testAll()};c.callOnDOMLoaded=function(){window[ensightenOptions.ns].executionState.DOMParsed=!0;window[ensightenOptions.ns].executionState.DOMLoaded=!0;window[ensightenOptions.ns].testAll()};c.callOnPageSpecificCompletion=
function(){for(var a=document.getElementsByTagName("script"),b=0,e=a.length;b<e;b++)if(a[b].src&&a[b].src.match(/\.ensighten\.com\/(.+?)\/code\/.*/i)&&"loaded"!=a[b].readyState&&"complete"!=a[b].readyState){setTimeout(window[ensightenOptions.ns].callOnPageSpecificCompletion,50);return}setTimeout(function(){window[ensightenOptions.ns].executionState.conditionalRules=!0;window[ensightenOptions.ns].testAll()},1)};c.callOnGetServerComponent=function(){window[ensightenOptions.ns].executionState.readyForServerComponent=
!0;window[ensightenOptions.ns].testAll()};c.hasDOMParsed=function(){return window[ensightenOptions.ns].executionState.DOMParsed};c.hasDOMLoaded=function(){return window[ensightenOptions.ns].executionState.DOMLoaded};c.hasPageSpecificCompletion=function(){return window[ensightenOptions.ns].executionState.conditionalRules};var v=function(){var a=[],b=!1,e=!1;return{add:function(f){b&&!e?f():"function"==typeof f&&(a[a.length]=f)},exec:function(){e=!0;do{var f=a;a=[];b=!0;for(var g=0;g<f.length;g++)try{f[g].call(window)}catch(l){window[ensightenOptions.ns].reportException(l)}}while(0<
a.length);e=!1},haveRun:function(){return b}}};c.new_fArray=function(){return v()};d.timer=null;(function(){function a(f,g){return function(){f.apply(g,arguments)}}window.console||(window.console={});var b=window.console;if(!b.log)if(window.log4javascript){var e=log4javascript.getDefaultLogger();b.log=a(e.info,e);b.debug=a(e.debug,e);b.info=a(e.info,e);b.warn=a(e.warn,e);b.error=a(e.error,e)}else b.log=function(){};b.debug||(b.debug=b.log);b.info||(b.info=b.log);b.warn||(b.warn=b.log);b.error||(b.error=
b.log)})();document.addEventListener?(-1<navigator.userAgent.indexOf("AppleWebKit/")?d.timer=window.setInterval(function(){/loaded|interactive|complete/.test(document.readyState)&&(clearInterval(d.timer),c.callOnDOMParsed())},50):document.addEventListener("DOMContentLoaded",c.callOnDOMParsed,!1),window.addEventListener("load",c.callOnDOMLoaded,!1)):(setTimeout(function(){var a=window.document;(function(){try{if(!document.body)throw"continue";a.documentElement.doScroll("left")}catch(b){setTimeout(arguments.callee,
15);return}window[ensightenOptions.ns].callOnDOMParsed()})()},1),window.attachEvent("onload",function(){window[ensightenOptions.ns].callOnDOMLoaded()}));document.readyState&&"complete"===document.readyState&&(c.executionState.DOMParsed=!0,c.executionState.DOMLoaded=!0);"true"===d.options.enableTagAuditBeacon&&c.sampleBeacon()&&window.setTimeout(function(){if(window[ensightenOptions.ns]&&!window[ensightenOptions.ns].mobilePlatform)try{for(var a=[],b,e,f,g,l=0;l<d.ruleList.length;++l)e=d.ruleList[l],
f=e.executionData.hasRun?"1":"0",g=e.deploymentId.toString()+"|"+e.id.toString()+"|"+f,a.push(g);b="["+a.join(";")+"]";var m=window.location.protocol+"//"+d.nexus+"/"+encodeURIComponent(h.client)+"/"+encodeURIComponent(h.publishPath)+"/TagAuditBeacon.rnc?cid="+encodeURIComponent(h.clientId)+"&data="+b+"&idx=0&r="+d.rand;c.imageRequest(m)}catch(r){c.currentRuleId=-1,c.currentDeploymentId=-1,a=new d.BeaconException(r),window[ensightenOptions.ns].reportException(a)}},3E3);window.setInterval(c.testAll,
d.options.interval);return c}(ensightenOptions);
"true"===ensightenOptions.enablePagePerfBeacon&&window[ensightenOptions.ns]&&window[ensightenOptions.ns].sampleBeacon()&&window[ensightenOptions.ns].bindDOMParsed(function(){if(!window[ensightenOptions.ns].mobilePlatform){var h=window.performance;if(h){h=h.timing||{};var n=h.navigationStart||0,p={connectEnd:"ce",connectStart:"cs",domComplete:"dc",domContentLoadedEventEnd:"dclee",domContentLoadedEventStart:"dcles",domInteractive:"di",domLoading:"dl",domainLookupEnd:"dle",domainLookupStart:"dls",fetchStart:"fs",
loadEventEnd:"lee",loadEventStart:"les",redirectEnd:"rede",redirectStart:"reds",requestStart:"reqs",responseStart:"resps",responseEnd:"respe",secureConnectionStart:"scs",unloadEventStart:"ues",unloadEventEnd:"uee"};var q="&ns="+encodeURIComponent(h.navigationStart);for(var d in p)if(void 0!==h[d]){var c=h[d]-n;q+="&"+p[d]+"="+(0<c?encodeURIComponent(c):0)}else q+="&"+p[d]+"=-1";window[ensightenOptions.ns].timing=q;d=ensightenOptions.nexus||"nexus.ensighten.com";h=ensightenOptions.staticJavascriptPath||
"";q=h.indexOf("/",0);n=h.indexOf("/code/");h=h.substring(q,n)+"/perf.rnc";h+="?cid="+encodeURIComponent(ensightenOptions.clientId)+window[ensightenOptions.ns].timing;window[ensightenOptions.ns].imageRequest("//"+d+h)}}});
		
  window[ensightenOptions.ns].ensEvent||(window[ensightenOptions.ns].ensEvent=function(p,u){var k={queue:{},pollQueue:{},pushTrigger:function(a,c){if("[object Array]"===Object.prototype.toString.call(a)){for(var g=0;g<a.length;g++)k.pushTrigger(a[g],c);return!0}if("string"!=typeof a)return!1;this.queue[a]=this.queue[a]||{fn:[]};"function"==typeof c&&this.queue[a].fn.push(c);return!0},callTrigger:function(a,c,g){if("string"!=typeof a)return!1;a=k.queue[a];if("object"==typeof a&&a.fn&&a.fn.length&&(0!=
  a.fireOnFirstSet&&c==u||c!=u&&0!=a.fireOnUpdate))for(c=0;c<a.fn.length;c++)try{a.fn[c].call(this)}catch(n){p[ensightenOptions.ns].reportException(n)}},setPollOptions:function(a,c,g){this.queue[a]=this.queue[a]||{fn:[]};this.queue[a].fireOnFirstSet=c;this.queue[a].fireOnUpdate=g},callPoll:function(a,c,g,p,r){if("string"==typeof a&&c&&c.length&&!(1>c.length)){for(var n=0;n<c.length;n++)k.setPollOptions(c[n],p,r);k.pushWatch(a,c,g)}},pushWatch:function(a,c,g){this.pollQueue[a]||(this.pollQueue[a]={previousVal:u,
  eventArr:[],valueFn:g});this.pollQueue[a].eventArr=this.pollQueue[a].eventArr.concat(c);this.pollQueue[a].valueFn=g},globalWatch:function(){setInterval(function(){for(var a in k.pollQueue){var c=k.pollQueue[a],g=c.valueFn(a);if(c.previousVal!==g&&null!==g&&""!==g){for(var n=0;n<c.eventArr.length;n++)k.callTrigger.call(p,c.eventArr[n],c.previousVal,g);k.pollQueue[a].previousVal=g}}},500)}};k.globalWatch();return{add:function(a,c){return k.pushTrigger(a,c)},get:function(a){return k.queue[a]},trigger:function(a,
  c){return k.callTrigger.call(c||p,a)},poll:function(a,c,g,n,r){r=r||p[ensightenOptions.ns].data.resolve;return k.callPoll(a,c,r,g,n)}}}(window),function(p,u,k){u[p]=k()}("qwery",window[ensightenOptions.ns],function(){function p(){this.c={}}function u(b){return H.g(b)||H.s(b,"(^|\\s+)"+b+"(\\s+|$)",1)}function k(b,d){for(var e=0,f=b.length;e<f;e++)d(b[e])}function a(b){for(var d=[],e=0,f=b.length;e<f;++e)l(b[e])?d=d.concat(b[e]):d[d.length]=b[e];return d}function c(b){for(var d=0,e=b.length,f=[];d<
  e;d++)f[d]=b[d];return f}function g(b){for(;(b=b.previousSibling)&&1!=b.nodeType;);return b}function n(b,d,e,f,a,h,l,c,g,k,y){var I,B,m;if(1!==this.nodeType||d&&"*"!==d&&this.tagName&&this.tagName.toLowerCase()!==d||e&&(I=e.match(Q))&&I[1]!==this.id)return!1;if(e&&(m=e.match(R)))for(b=m.length;b--;)if(!u(m[b].slice(1)).test(this.className))return!1;if(g&&v.pseudos[g]&&!v.pseudos[g](this,y))return!1;if(f&&!l)for(B in g=this.attributes,g)if(Object.prototype.hasOwnProperty.call(g,B)&&(g[B].name||B)==
  a)return this;return f&&!x(h,S(this,a)||"",l)?!1:this}function r(b){return J.g(b)||J.s(b,b.replace(T,"\\$1"))}function x(b,d,e){switch(b){case "=":return d==e;case "^=":return d.match(w.g("^="+e)||w.s("^="+e,"^"+r(e),1));case "$=":return d.match(w.g("$="+e)||w.s("$="+e,r(e)+"$",1));case "*=":return d.match(w.g(e)||w.s(e,r(e),1));case "~=":return d.match(w.g("~="+e)||w.s("~="+e,"(?:^|\\s+)"+r(e)+"(?:\\s+|$)",1));case "|=":return d.match(w.g("|="+e)||w.s("|="+e,"^"+r(e)+"(-|$)",1))}return 0}function q(b,
  d){var e=[],f=[],a,h,l=d,c=C.g(b)||C.s(b,b.split(K)),g=b.match(L);if(!c.length)return e;var m=(c=c.slice(0)).pop();c.length&&(a=c[c.length-1].match(M))&&(l=N(d,a[1]));if(!l)return e;var y=m.match(E);var v=l!==d&&9!==l.nodeType&&g&&/^[+~]$/.test(g[g.length-1])?function(b){for(;l=l.nextSibling;)1==l.nodeType&&(y[1]?y[1]==l.tagName.toLowerCase():1)&&(b[b.length]=l);return b}([]):l.getElementsByTagName(y[1]||"*");a=0;for(m=v.length;a<m;a++)if(h=n.apply(v[a],y))e[e.length]=h;if(!c.length)return e;k(e,
  function(b){t(b,c,g)&&(f[f.length]=b)});return f}function t(b,d,e,a){function l(b,a,c){for(;c=U[e[a]](c,b);)if(f(c)&&n.apply(c,d[a].match(E)))if(a){if(h=l(c,a-1,c))return h}else return c}var h;return(h=l(b,d.length-1,b))&&(!a||z(h,a))}function f(b,d){return b&&"object"===typeof b&&(d=b.nodeType)&&(1==d||9==d)}function h(b){var d=[],e;var f=0;a:for(;f<b.length;++f){for(e=0;e<d.length;++e)if(d[e]==b[f])continue a;d[d.length]=b[f]}return d}function l(b){return"object"===typeof b&&isFinite(b.length)}
  function N(b,d,e){return 9===b.nodeType?b.getElementById(d):b.ownerDocument&&((e=b.ownerDocument.getElementById(d))&&z(e,b)&&e||!z(b,b.ownerDocument)&&F('[id="'+d+'"]',b)[0])}function v(b,d){var e,h;var g=d?"string"==typeof d?v(d)[0]:!d.nodeType&&l(d)?d[0]:d:m;if(!g||!b)return[];if(b===window||f(b))return!d||b!==window&&f(g)&&z(b,g)?[b]:[];if(b&&l(b))return a(b);if(e=b.match(V)){if(e[1])return(h=N(g,e[1]))?[h]:[];if(e[2])return c(g.getElementsByTagName(e[2]));if(W&&e[3])return c(g.getElementsByClassName(e[3]))}return F(b,
  g)}function y(b,d){return function(e){var f,a;O.test(e)?9!==b.nodeType&&((a=f=b.getAttribute("id"))||b.setAttribute("id",a="__qwerymeupscotty"),d(b.parentNode||b,'[id="'+a+'"]'+e,!0),f||b.removeAttribute("id")):e.length&&d(b,e,!1)}}var m=document,D=m.documentElement,F,Q=/#([\w\-]+)/,R=/\.[\w\-]+/g,M=/^#([\w\-]+)$/,X=/^([\w]+)?\.([\w\-]+)$/,O=/(^|,)\s*[>~+]/,Y=/^\s+|\s*([,\s\+~>]|$)\s*/g,A=/[\s>\+~]/,P=/(?![\s\w\-\/\?&=:\.\(\)!,@#%<>\{\}\$\*\^'"]*\]|[\s\w\+\-]*\))/,T=/([.*+?\^=!:${}()|\[\]\/\\])/g,
  V=new RegExp(M.source+"|"+/^([\w\-]+)$/.source+"|"+/^\.([\w\-]+)$/.source),L=new RegExp("("+A.source+")"+P.source,"g"),K=new RegExp(A.source+P.source),E=new RegExp(/^(\*|[a-z0-9]+)?(?:([\.#]+[\w\-\.#]+)?)/.source+"("+/\[([\w\-]+)(?:([\|\^\$\*~]?=)['"]?([ \w\-\/\?&=:\.\(\)!,@#%<>\{\}\$\*\^]+)["']?)?\]/.source+")?("+/:([\w\-]+)(\(['"]?([^()]+)['"]?\))?/.source+")?"),U={" ":function(b){return b&&b!==D&&b.parentNode},">":function(b,d){return b&&b.parentNode==d.parentNode&&b.parentNode},"~":function(b){return b&&
  b.previousSibling},"+":function(b,d,e,f){return b?(e=g(b))&&(f=g(d))&&e==f&&e:!1}};p.prototype={g:function(b){return this.c[b]||void 0},s:function(b,d,e){d=e?new RegExp(d):d;return this.c[b]=d}};var H=new p,J=new p,w=new p,C=new p,z="compareDocumentPosition"in D?function(b,d){return 16==(d.compareDocumentPosition(b)&16)}:"contains"in D?function(b,d){d=9===d.nodeType||d==window?D:d;return d!==b&&d.contains(b)}:function(b,d){for(;b=b.parentNode;)if(b===d)return 1;return 0},S=function(){var b=m.createElement("p");
  return(b.innerHTML='<a href="#x">x</a>',"#x"!=b.firstChild.getAttribute("href"))?function(b,e){return"class"===e?b.className:"href"===e||"src"===e?b.getAttribute(e,2):b.getAttribute(e)}:function(b,e){return b.getAttribute(e)}}(),W=!!m.getElementsByClassName,Z=m.querySelector&&m.querySelectorAll,aa=function(b,d){var e=[],f,a;try{if(9===d.nodeType||!O.test(b))return c(d.querySelectorAll(b));k(f=b.split(","),y(d,function(b,d){a=b.querySelectorAll(d);1==a.length?e[e.length]=a.item(0):a.length&&(e=e.concat(c(a)))}));
  return 1<f.length&&1<e.length?h(e):e}catch(ba){}return G(b,d)},G=function(b,d){var e=[],f,a;b=b.replace(Y,"$1");if(f=b.match(X)){var l=u(f[2]);f=d.getElementsByTagName(f[1]||"*");var c=0;for(a=f.length;c<a;c++)l.test(f[c].className)&&(e[e.length]=f[c]);return e}k(f=b.split(","),y(d,function(b,f,h){l=q(f,b);c=0;for(a=l.length;c<a;c++)if(9===b.nodeType||h||z(l[c],d))e[e.length]=l[c]}));return 1<f.length&&1<e.length?h(e):e};A=function(b){"undefined"!==typeof b.useNativeQSA&&(F=b.useNativeQSA?Z?aa:G:
  G)};A({useNativeQSA:!0});v.configure=A;v.uniq=h;v.is=function(b,d,e){if(f(d))return b==d;if(l(d))return!!~a(d).indexOf(b);for(var c=d.split(","),h;d=c.pop();)if(h=C.g(d)||C.s(d,d.split(K)),d=d.match(L),h=h.slice(0),n.apply(b,h.pop().match(E))&&(!h.length||t(b,h,d,e)))return!0;return!1};v.pseudos={};return v}),function(){function p(f,a,c){n||(n=window[ensightenOptions.ns].qwery);var h=n;if((h=h.call(c,a,c))&&0<h.length){if("_root"==a)f=c;else if(f===c)f=void 0;else{b:{for(var l=h.length,g=0;g<l;g++)if(f===
  h[g]){h=!0;break b}h=!1}h||(f.parentNode?(r++,f=p(f.parentNode,a,c)):f=void 0)}return f}return!1}function u(f,a,c,g){q[f.id]||(q[f.id]={});q[f.id][a]||(q[f.id][a]={});q[f.id][a][c]||(q[f.id][a][c]=[]);q[f.id][a][c].push(g)}function k(f,a,c,g){if(g||c)if(g)for(var h=0;h<q[f.id][a][c].length;h++){if(q[f.id][a][c][h]===g){q[f.id][a][c].pop(h,1);break}}else delete q[f.id][a][c];else q[f.id][a]={}}function a(a,c,l){if(q[a][l]){var f=c.target||c.srcElement,h,k,m={},n=k=0;r=0;for(h in q[a][l])q[a][l].hasOwnProperty(h)&&
  (k=p(f,h,t[a].element))&&g.matchesEvent(l,t[a].element,k,"_root"==h,c)&&(r++,q[a][l][h].match=k,m[r]=q[a][l][h]);c.stopPropagation=function(){c.cancelBubble=!0};for(k=0;k<=r;k++)if(m[k])for(n=0;n<m[k].length;n++){if(!1===m[k][n].call(m[k].match,c)){g.cancel(c);return}if(c.cancelBubble)return}}}function c(c,h,l,n){function f(c){return function(f){a(p,f,c)}}c instanceof Array||(c=[c]);l||"function"!=typeof h||(l=h,h="_root");var p=this.id,m;for(m=0;m<c.length;m++)q[p]&&q[p][c[m]]||g.addEvent(this,c[m],
  f(c[m])),n?k(this,c[m],h,l):u(this,c[m],h,l);return this}function g(a,c,l,k){if("string"==typeof a&&"function"==typeof c||"string"==typeof c)g(document).on(a,c,l,k||!1);if(!(this instanceof g)){for(var f in t)if(t[f].element===a)return t[f];x++;t[x]=new g(a,x);t[x]._on=t[x].on;t[x].on=function(a,c,f,g){var h="function"==typeof c?c:f;if("function"==typeof c?f:g)a=[a],"string"==typeof c&&a.push(c),a.push(function(a){return function(c){c.defaultPrevented||window[ensightenOptions.ns].Delegate.load(this);
  if(this.nodeName&&"a"!=this.nodeName.toLowerCase())return a.call(this);"undefined"!=typeof c.preventDefault?c.preventDefault():c.returnValue=!1;a.call(this)}}(h)),this._on.apply(this,a);else return this._on.call(this,a,c,f)};return t[x]}this.element=a;this.id=c}var n,r=0,x=0,q={},t={};g.prototype.on=function(a,g,l){return c.call(this,a,g,l)};g.prototype.off=function(a,g,l){return c.call(this,a,g,l,!0)};g.cancel=function(a){a.preventDefault();a.stopPropagation()};g.addEvent=function(a,c,g){a.element.addEventListener(c,
  g,"blur"==c||"focus"==c)};g.matchesEvent=function(){return!0};g.load=function(a){setTimeout(function(a,c){var f=a.getAttribute("target")||"_self";return function(){if(a.nodeName&&"a"==a.nodeName.toLowerCase()){if(c&&/^javascript\s*:/.test(c))return(new Function(unescape(c))).call(window);c&&window.open(c,f)}}}(a,a.href||""),750)};window[ensightenOptions.ns].Delegate=g}(),function(p){var u=p.addEvent;p.addEvent=function(k,a,c){if(k.element.addEventListener)return u(k,a,c);"focus"==a&&(a="focusin");
  "blur"==a&&(a="focusout");k.element.attachEvent("on"+a,c)};p.cancel=function(k){k.preventDefault&&k.preventDefault();k.stopPropagation&&k.stopPropagation();k.returnValue=!1;k.cancelBubble=!0}}(window[ensightenOptions.ns].Delegate),window[ensightenOptions.ns].on=window[ensightenOptions.ns].Delegate);
Bootstrapper.dataDefinitionIds = [];/*
: https://cdn.jsdelivr.net/npm/ismobilejs@1/dist/isMobile.min.js

 Adobe Visitor API for JavaScript version: 4.4.0
 Copyright 2019 Adobe, Inc. All Rights Reserved
 More info available at https://marketing.adobe.com/resources/help/en_US/mcvid/
*/
Bootstrapper.bindDependencyImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;try{if(dS.cfg.amc.target.enabled){window.targetPageParams=function(){var dataLayer={};if(typeof digitalData!="undefined"){dataLayer={userProfileID:digitalData.user[0].profile[0].profileInfo.profileID,usersubscriptionStatus:digitalData.user[0].profile[0].attributes.c1.subscriptionStatus,pagePrimaryCategory:digitalData.page.category.primaryCategory,hasComponentTypeArticle:DANZZ.getComponent("category.componentType",
"article")!==false?true:false,hasTrial:digitalData.user[0].profile[0].attributes.c1.hasTrial,hasAdfree:digitalData.user[0].profile[0].attributes.c1.hasAdFree,hasLessAds:digitalData.user[0].profile[0].attributes.c1.hasLessAds,clientCountryCode:digitalData.user[0].profile[0].attributes.c1.clientCountryCode};return dataLayer}};document.addEventListener("at-request-succeeded",function(event){if(DANZZ.checkDebugLevel(3))console.log("Event",event);dS.ingress.test=dS.ingress.test||{};dS.ingress.test.active=
dS.ingress.test.active||false;dS.ingress.test.activeTest=dS.ingress.test.activeTest||[];var tokens=event.detail.responseTokens;if(isEmpty(tokens))return;dS.ingress.test.active=true;var uniqueTokens=distinct(tokens);uniqueTokens.forEach(function(token){dS.ingress.test.activeTest.push({test_id:token["activity.id"],test_name:token["activity.name"],variant_id:token["experience.id"],variant_name:token["experience.name"]});dS.cfg.amc.target.currentTest={test_id:token["activity.id"],test_name:token["activity.name"],
variant_id:token["experience.id"],variant_name:token["experience.name"]}});DANZZ.sendIngressData("target");function isEmpty(val){return val===undefined||val==null||val.length<=0?true:false}function key(obj){return Object.keys(obj).map(function(k){return k+""+obj[k]}).join("")}function distinct(arr){var result=arr.reduce(function(acc,e){acc[key(e)]=e;return acc},{});return Object.keys(result).map(function(k){return result[k]})}});DANZZ.targetSuccess=function(){if(DANZZ.getNested(window,"dS.cfg.amc.target.currentTest",
"typeof")!=="undefined"){var targetComponent={componentInfo:{componentID:dS.cfg.amc.target.currentTest.test_id,componentName:dS.cfg.amc.target.currentTest.test_name},category:{componentType:"adobe target"}};var targetEvent={eventInfo:{eventName:"Adobe Target Interaction",eventAction:"success",eventNonInteractive:true,type:"experiment",timeStamp:DANZZ.getCurrentDate(),componentID:dS.cfg.amc.target.currentTest.test_id,componentName:dS.cfg.amc.target.currentTest.test_name},category:{primaryCategory:"adobe target",
subCategory1:dS.cfg.amc.target.currentTest.variant_name,subCategory2:dS.cfg.amc.target.currentTest.variant_id}};var tmpTargetComponent=JSON.parse(JSON.stringify(targetComponent));var tmpTargetEvent=JSON.parse(JSON.stringify(targetEvent));DANZZ.pushEvent(tmpTargetComponent,tmpTargetEvent,"adobeTargetSuccess",dS.cfg.amc.target.currentTest.test_id+"|"+tmpTargetEvent.eventInfo.eventAction)}};if(typeof window.MutationObserver!="undefined")(function(win){var listeners=[],doc=win.document,MutationObserver=
win.MutationObserver||win.WebKitMutationObserver,observer;function ready(selector,fn){listeners.push({selector:selector,fn:fn});if(!observer){observer=new MutationObserver(check);observer.observe(doc.documentElement,{childList:true,subtree:true})}check()}function check(){for(var i=0,len=listeners.length,listener,elements;i<len;i++){listener=listeners[i];elements=doc.querySelectorAll(listener.selector);for(var j=0,jLen=elements.length,element;j<jLen;j++){element=elements[j];if(!element.ready){element.ready=
true;listener.fn.call(element,element)}}}}win.nzzTargetReady=ready})(window)}}catch(e){DANZZ.loggr("TMS ERROR ATPP: "+e.message,0)}},3715335,[3738607,3715294],651630,[430195,587003],24);
Bootstrapper.bindDependencyImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;DANZZ.eventTrigger=function(trigger){try{if(dS.cfg.cmp.ready===false)return;if(DANZZ.checkDebugLevel(5)&&dS.event.handler.running===true||DANZZ.checkDebugLevel(7))DANZZ.loggr("Check dS.event.handler.running: "+dS.event.handler.running,5);if(dS.event.handler.running!==true){dS.event.handler.running=true;if(dS.debug.dataLayerObservation===true&&dS.debug.dataLayerObservationInitialized===
true)DANZZ.compareDataLayers();DANZZ.registerAdobeAnalyticsTrackCallbacks("eventTrigger");if(typeof digitalData!=="undefined"&&typeof digitalData.event==="object"&&digitalData.event!==null&&digitalData.event.length!==dS.event.processedCount)while(dS.event.processedCount<digitalData.event.length){if(DANZZ.checkDebugLevel(5))DANZZ.loggr("Start of event loop with event number "+dS.event.processedCount,5);if(DANZZ.getNested(digitalData,"event["+dS.event.processedCount+"].eventInfo.eventName","value")&&
dS.count.error<dS.cfg.error.limit){if(DANZZ.checkDebugLevel(3))DANZZ.loggr("Event Number "+dS.event.processedCount+" called "+digitalData.event[dS.event.processedCount].eventInfo.eventName+" by "+trigger,3);dS.event.processedCount=DANZZ.eventHandler(dS.event.processedCount,trigger);if(dS.event.ingressedCount<dS.event.processedCount)DANZZ.sendIngressData("event")}else{if(DANZZ.checkDebugLevel(2))DANZZ.loggr("Unable to handle event"+dS.event.processedCount,2);dS.event.processedCount++}if(DANZZ.checkDebugLevel(5))DANZZ.loggr("End of event loop",
5)}if(dS.cfg.amc.analytics.consent===true)DANZZ.adobeAnalyticsTracking();dS.event.handler.running=false}}catch(err){DANZZ.loggr("TMS ERROR eT: "+err.message,0);dS.event=dS.event||{};dS.event.processedCount=dS.event.processedCount||0;if(dS.event.processedCount<DANZZ.getNested(digitalData,"event","length"))dS.event.processedCount++;else if(DANZZ.getNested(dS,"aa.event","length")>0)dS.aa.event[Object.keys(dS.aa.event)[0]].splice(0,1)}};DANZZ.eventHandler=function(eventNumber,trigger){try{if(DANZZ.checkDebugLevel(5))DANZZ.loggr("Start eventHandler with eventNumber "+
eventNumber,5);var sessionID;var keepSessionAlive;var trigger=trigger||undefined;while(eventNumber<digitalData.event.length){if(DANZZ.checkDebugLevel(5))DANZZ.loggr("Loop while eventNumber "+eventNumber+"\x3c"+digitalData.event.length,5);if(DANZZ.getNested(digitalData,"event["+eventNumber+"].eventInfo.timeStamp","value")){digitalData.event[eventNumber].eventInfo.diffToInitTS=DANZZ.getDiffToInitTS(digitalData.event[eventNumber].eventInfo.timeStamp,true,dS.ingress.initTS);if(DANZZ.checkDebugLevel(4))DANZZ.loggr("diffToInitTS of "+
digitalData.event[eventNumber].eventInfo.diffToInitTS/1E3+"s added to "+DANZZ.getNested(digitalData,"event["+eventNumber+"].eventInfo.eventName","value")+" with eventAction: "+DANZZ.getNested(digitalData,"event["+eventNumber+"].eventInfo.eventAction","value"),4)}keepSessionAlive=true;var event={};event.aa={};event.aa.data=[];event.aa.data.events=[];event.aa.data.list1=[];event.aa.data.list2=[];event.aa.singleEvent=true;var eventName=DANZZ.getNested(digitalData,"event["+eventNumber+"].eventInfo.eventName",
"value");var eventAction=DANZZ.getNested(digitalData,"event["+eventNumber+"].eventInfo.eventAction","value").toLowerCase();var eventActionBefore=eventNumber>0?digitalData.event[eventNumber-1].eventInfo.eventAction:"";var eventPosition=DANZZ.getNested(digitalData,"event["+eventNumber+"].eventInfo.eventPosition","value");var eventValue=DANZZ.getNested(digitalData,"event["+eventNumber+"].eventInfo.eventValue","value");var eventNonInteractive=DANZZ.getNested(digitalData,"event["+eventNumber+"].eventInfo.eventNonInteractive",
"value");var eventType=DANZZ.getNested(digitalData,"event["+eventNumber+"].eventInfo.type","value");var eventTimeStamp=DANZZ.getNested(digitalData,"event["+eventNumber+"].eventInfo.timeStamp","value");var eventComponentID=DANZZ.getNested(digitalData,"event["+eventNumber+"].eventInfo.componentID","length")>0?digitalData.event[eventNumber].eventInfo.componentID:"Unknown Component ID";var eventComponentName=DANZZ.getNested(digitalData,"event["+eventNumber+"].eventInfo.componentName","length")>0?digitalData.event[eventNumber].eventInfo.componentName:
"Unknown Component Name";var eventPrimaryCategory=DANZZ.getNested(digitalData,"event["+eventNumber+"].category.primaryCategory","value").toLowerCase();var eventSubCategory1=DANZZ.getNested(digitalData,"event["+eventNumber+"].category.subCategory1","value").toLowerCase();var eventSubCategory2=DANZZ.getNested(digitalData,"event["+eventNumber+"].category.subCategory2","value").toLowerCase();eventSubCategory2=eventSubCategory2.lastIndexOf("http")>-1?eventSubCategory2.substring(eventSubCategory2.lastIndexOf("http")):
eventSubCategory2;var eventSubCategory3=DANZZ.getNested(digitalData,"event["+eventNumber+"].category.subCategory3","value").toLowerCase();if(eventAction=="feedback2")eventValue=eventAction=="feedback2"&&isNaN(eventValue)?eventValue.trim().split(/\s+/).length:eventValue;if(eventValue===0||eventValue==="0")eventValue=1;var eventString=((eventName!=null&&eventName!=""?eventName.toString().split(";").join(""):"")+";"+(eventAction!=null&&eventAction!=""?eventAction.toString().split(";").join(""):"")+";"+
(eventPosition!=null&&eventPosition!=""?eventPosition.toString().split(";").join(""):"")+";"+(eventValue!=null&&eventValue!=""?eventValue.toString().split(";").join(""):"")+";"+eventNonInteractive.toString().split(";").join("")+";"+(eventType!=null&&eventType!=""?eventType.toString().split(";").join(""):"")+";"+""+";"+(eventComponentID!=null&&eventComponentID!=""?eventComponentID.toString().split(";").join(""):"")+";"+(eventComponentName!=null&&eventComponentName!=""?eventComponentName.toString().split(";").join("").substr(0,
120):"")+";"+(eventPrimaryCategory!=null&&eventPrimaryCategory!=""?eventPrimaryCategory.toString().split(";").join(""):"")+(eventSubCategory1!=null&&eventSubCategory1!=""?("|"+eventSubCategory1).toString().split(";").join(""):"")+(eventSubCategory2!=null&&eventSubCategory2!=""?("|"+eventSubCategory2).toString().split(";").join(""):"")+(eventSubCategory3!=null&&eventSubCategory3!=""?("|"+eventSubCategory3).toString().split(";").join(""):"")).split(",").join("").replace(/\r?\n|\r/g," ");event.aa.data.list2.push(eventString);
event.aa.data.prop17=(eventSubCategory1+"\x3e"+eventSubCategory2+"\x3e"+eventSubCategory3+"\x3e"+eventAction).split(",").join("").replace(/\r?\n|\r/g," ");event.aa.data.eVar17="D\x3dc17";event.aa.data.eVar187=trigger!=undefined?trigger:"No trigger for Event: "+eventName+" - "+eventAction;DANZZ.updateEngagement(event.aa.data.prop17,eventNonInteractive);var currentComponentIndex=0;var componentFound=false;if(typeof digitalData.component==="object")while(!componentFound&&currentComponentIndex<digitalData.component.length)if(DANZZ.getNested(digitalData,
"component["+currentComponentIndex+"].componentInfo.componentID","value")==eventComponentID)componentFound=true;else currentComponentIndex++;var componentIndex=currentComponentIndex;var componentName;var componentSize=0;var componentString="";if(componentFound){if(DANZZ.checkDebugLevel(4))DANZZ.loggr("Component ID "+eventComponentID+" found",4);componentName=digitalData.component[componentIndex].componentInfo.componentName;componentSize=digitalData.component[componentIndex].componentInfo.componentSize;
if(DANZZ.getNested(digitalData,"component["+componentIndex+"].componentInfo.componentID","value"))componentString=componentString+digitalData.component[componentIndex].componentInfo.componentID.toString().split(";").join("");componentString=componentString+";";if(DANZZ.getNested(digitalData,"component["+componentIndex+"].componentInfo.componentName","value"))componentString=componentString+digitalData.component[componentIndex].componentInfo.componentName.toString().split(";").join("").substr(0,120);
componentString=componentString+";";if(DANZZ.getNested(digitalData,"component["+componentIndex+"].componentInfo.componentURL","value"))if(dS.ingress.publishPath.split("-")[0]!="prod")componentString=componentString+digitalData.component[componentIndex].componentInfo.componentURL.toString().split(";").join("");componentString=componentString+";";if(DANZZ.getNested(digitalData,"component["+componentIndex+"].componentInfo.componentSize","value"))componentString=componentString+digitalData.component[componentIndex].componentInfo.componentSize.toString().split(";").join("");
componentString=componentString+";";if(DANZZ.getNested(digitalData,"component["+componentIndex+"].category","typeof")!=="undefined"){if(digitalData.component[componentIndex].category.primaryCategory&&digitalData.component[componentIndex].category.primaryCategory.length>0)componentString=componentString+digitalData.component[componentIndex].category.primaryCategory.toString().split(";").join("\u00a6");else componentString=componentString+"none";componentString=componentString+"|";if(digitalData.component[componentIndex].category.subCategory1&&
digitalData.component[componentIndex].category.subCategory1.length>0)componentString=componentString+digitalData.component[componentIndex].category.subCategory1.toString().split(";").join("\u00a6");else componentString=componentString+"none";componentString=componentString+"|";if(digitalData.component[componentIndex].category.subCategory2&&digitalData.component[componentIndex].category.subCategory2.length>0)componentString=componentString+digitalData.component[componentIndex].category.subCategory2.toString().split(";").join("\u00a6");
else componentString=componentString+"none";componentString=componentString+"|";if(digitalData.component[componentIndex].category.subCategory3&&digitalData.component[componentIndex].category.subCategory3.length>0)componentString=componentString+digitalData.component[componentIndex].category.subCategory3.toString().split(";").join("\u00a6");else componentString=componentString+"none"}componentString=componentString+";";if(DANZZ.getNested(digitalData,"component["+componentIndex+"].category","typeof")!==
"undefined"){if(digitalData.component[componentIndex].category.componentType&&digitalData.component[componentIndex].category.componentType.length>0)componentString=componentString+digitalData.component[componentIndex].category.componentType.toString().split(";").join("");else componentString=componentString+"none";componentString=componentString+"|";if(digitalData.component[componentIndex].category.componentSubType1&&digitalData.component[componentIndex].category.componentSubType1.length>0)componentString=
componentString+digitalData.component[componentIndex].category.componentSubType1.toString().split(";").join("");else componentString=componentString+"none";componentString=componentString+"|";if(digitalData.component[componentIndex].category.componentSubType2&&digitalData.component[componentIndex].category.componentSubType2.length>0)componentString=componentString+digitalData.component[componentIndex].category.componentSubType2.toString().split(";").join("");else componentString=componentString+"none"}componentString=
componentString+";";if(DANZZ.getNested(digitalData,"component["+componentIndex+"].attributes","typeof")!=="undefined"){var componentAttributes=[];if(DANZZ.getNested(digitalData,"component["+componentIndex+"].attributes.issueTimestamp","typeof")!=="undefined"){componentAttributes.push("issueTimestamp\x3d"+digitalData.component[componentIndex].attributes.issueTimestamp);if(DANZZ.getNested(digitalData,"component["+componentIndex+"].attributes.updateTimestamp","typeof")!=="undefined"&&digitalData.component[componentIndex].attributes.issueTimestamp!==
digitalData.component[componentIndex].attributes.updateTimestamp)componentAttributes.push("updateTimestamp\x3d"+digitalData.component[componentIndex].attributes.updateTimestamp)}componentString=componentString+componentAttributes.join("|")}event.aa.data.list1.push(componentString.split(",").join("").replace(/\r?\n|\r/g," "))}else if(eventComponentName.toLowerCase()!="Connection Issues Snackbar".toLowerCase()&&eventComponentID.toLowerCase().indexOf("bta-section")==-1){DANZZ.loggr("TMS ERROR cF: Component ID "+
eventComponentID+" not found in digitalData",0);componentName="Unknown Component";componentString=eventComponentID+";"+componentName+";;;;";event.aa.data.list1.push(componentString.split(",").join("").replace(/\r?\n|\r/g," "))}else{eventNumber++;continue}event.aa.data.eVar91=eventName!=undefined?eventName:"";event.aa.data.eVar92=eventAction!=undefined?eventAction:"";event.aa.data.eVar93=eventPosition!=undefined?eventPosition:"";event.aa.data.eVar94=eventValue!=undefined?eventValue:"";event.aa.data.eVar95=
eventComponentID!=undefined?eventComponentID:"";event.aa.data.eVar96=eventComponentName!=undefined?eventComponentName:"";event.aa.data.eVar97=(DANZZ.getNested(digitalData,"event["+eventNumber+"].category.primaryCategory","length")>0?DANZZ.getNested(digitalData,"event["+eventNumber+"].category.primaryCategory","value").replace(/\|/g," "):"none")+"|"+(DANZZ.getNested(digitalData,"event["+eventNumber+"].category.subCategory1","length")>0?DANZZ.getNested(digitalData,"event["+eventNumber+"].category.subCategory1",
"value").replace(/\|/g," "):"none")+"|"+(DANZZ.getNested(digitalData,"event["+eventNumber+"].category.subCategory2","length")>0?DANZZ.getNested(digitalData,"event["+eventNumber+"].category.subCategory2","value").replace(/\|/g," "):"none")+"|"+(DANZZ.getNested(digitalData,"event["+eventNumber+"].category.subCategory3","length")>0?DANZZ.getNested(digitalData,"event["+eventNumber+"].category.subCategory3","value").replace(/\|/g," "):"none");event.aa.data.eVar98=componentSize!=undefined?componentSize:
"";event.aa.data.eVar99=(DANZZ.getNested(digitalData,"component["+componentIndex+"].category.componentType","length")>0?DANZZ.getNested(digitalData,"component["+componentIndex+"].category.componentType","value").replace(/\|/g," "):"none")+"|"+(DANZZ.getNested(digitalData,"component["+componentIndex+"].category.componentSubType1","length")>0?DANZZ.getNested(digitalData,"component["+componentIndex+"].category.componentSubType1","value").replace(/\|/g," "):"none")+"|"+(DANZZ.getNested(digitalData,"component["+
componentIndex+"].category.componentSubType2","length")>0?DANZZ.getNested(digitalData,"component["+componentIndex+"].category.componentSubType2","value").replace(/\|/g," "):"none");if(typeof window.snowplow=="function")snowplow("trackStructEvent",{category:DANZZ.getNested(digitalData,"event["+eventNumber+"].category.primaryCategory","value"),action:eventName+" - "+eventAction,label:eventComponentID,property:eventComponentName,value:eventValue});if(typeof window.pa=="object"&&typeof window.pa.sendEvent==
"function")pa.sendEvent("click.action",{click:eventName+" - "+eventAction,eventPosition:eventPosition,eventValue:eventValue,eventComponentID:eventComponentID,eventComponentName:eventComponentName,componentSize:componentSize,event_categories:event.aa.data.eVar97,page:DANZZ.getNested(digitalData,"page.pageInfo.pageName","value"),page_chapter1:DANZZ.getNested(digitalData,"page.category.primaryCategory","value"),page_chapter2:DANZZ.getNested(digitalData,"page.category.subCategory1","value"),page_chapter3:DANZZ.getNested(digitalData,
"page.category.subCategory2","value"),page_type:DANZZ.getNested(digitalData,"page.category.pageType","value")});if(DANZZ.checkDebugLevel(3))DANZZ.loggr("Event on '"+eventName+"' with event number '"+eventNumber+"' the "+(eventNonInteractive?"non-interactive":"interactive")+" Action '"+eventAction+"' (Value '"+eventValue+"' at Position '"+eventPosition+"' of '"+componentSize+"') for Component ID '"+eventComponentID+"' called '"+eventComponentName+"'",3);if(DANZZ.checkDebugLevel(2))DANZZ.loggr("It's a "+
eventName,2);if(eventAction=="download"){if(DANZZ.checkDebugLevel(2))DANZZ.loggr("Action: "+eventAction,2);event.aa.data.events.push("event151");if(eventName=="Issue Interaction"){var issueUniqueEventID=DANZZ.getUniqueEventID([DANZZ.getNested(digitalData,"component["+componentIndex+"].componentInfo.componentID","value"),DANZZ.getNested(dS,"p4m.vid","value")],60,"");event.aa.data.events.push("event154"+":"+issueUniqueEventID)}else if(eventName=="Invoice Interaction")event.aa.data.events.push("event157")}if(eventName==
"Article Interaction"){window.cX=window.cX||{};window.cX.callQueue=window.cX.callQueue||[];window.cX.callQueue.push(["setEventAttributes",{origin:"hil-website",persistedQueryId:"f446ffde9613aa927b6e6ba1219c453aa7d7376d"}]);var dmpEventType=eventName+" - "+eventAction;var dmpArticleID=DANZZ.getNested(digitalData,"component["+componentIndex+"].componentInfo.componentID","value");var dmpArticleTitle=DANZZ.getNested(digitalData,"component["+componentIndex+"].componentInfo.componentName","value");window.cX.callQueue.push(["sendEvent",
dmpEventType,{articleID:dmpArticleID,articleTitle:dmpArticleTitle}]);if(DANZZ.checkDebugLevel(2))DANZZ.loggr("Action: "+eventAction,2);if(DANZZ.checkDebugLevel(6))DANZZ.loggr("Check event: Article View",6);var liveTickerUniqueEventID="";if(componentFound&&DANZZ.getNested(digitalData,"component["+componentIndex+"].attributes.flag","value").toLowerCase()=="live"){liveTickerUniqueEventID=":"+DANZZ.getUniqueEventID([DANZZ.getNested(digitalData,"component["+componentIndex+"].componentInfo.componentID",
"value"),DANZZ.getNested(digitalData,"component["+componentIndex+"].attributes.updateTimestamp","value"),DANZZ.getNested(dS,"p4m.vid","value")],60,"511");event.aa.data.events.push("event520")}if(eventAction=="display"){if(DANZZ.checkDebugLevel(2))DANZZ.loggr("Set event511: Article View",2);event.aa.data.events.push("event511"+liveTickerUniqueEventID);event.aa.data.events.push("event521");if(dS.cfg.technology=="webview")if(typeof digitalData.component=="object"&&digitalData.component.length>0)digitalData.component.forEach(function(component){if((component.componentInfo.componentName==
"Registration Prompt"||component.componentInfo.componentName=="Order Prompt")&&DANZZ.getNested(digitalData,"component[0].category.componentType","value")=="article")digitalData.component[0].attributes.isTruncatedView=true});if(componentFound&&(DANZZ.getNested(digitalData,"component["+componentIndex+"].attributes.isTruncatedView","value")===true||DANZZ.getNested(digitalData,"component["+componentIndex+"].attributes.isTruncatedView","value")==="true")){var articleReducedUniqueEventID=DANZZ.getUniqueEventID([DANZZ.getNested(digitalData,
"component["+componentIndex+"].componentInfo.componentID","value"),DANZZ.getNested(dS,"p4m.vid","value")],60,"513");if(DANZZ.checkDebugLevel(2))DANZZ.loggr("Set event513: Reduced Article View (Unique Event ID: "+articleReducedUniqueEventID+")",2);event.aa.data.events.push("event513"+":"+articleReducedUniqueEventID);event.aa.data.events.push("event523")}else{if(DANZZ.checkDebugLevel(2))DANZZ.loggr("Set event512: Full Article View",2);event.aa.data.events.push("event512"+liveTickerUniqueEventID);event.aa.data.events.push("event522")}Bootstrapper.ensEvent.trigger("digitalData - Article View")}if(eventAction==
"complete"){if(DANZZ.checkDebugLevel(2))DANZZ.loggr("Set event: Article Complete",2);event.aa.data.events.push("event514"+liveTickerUniqueEventID);dS.visibility.scrollPercentageVerticalComplete=dS.visibility.currentViewport.scrollPercentageVertical;dS.ingress.page.articleComplete=true;Bootstrapper.ensEvent.trigger("digitalData  - Article Complete")}event.aa.data.eVar180=DANZZ.getNested(digitalData,"page.attributes.system.fontSize","value")}if(eventName=="Image Gallery Interaction")switch(eventAction){case "display":if(DANZZ.getNested(dS,
"imageGallery.currentID","value")==eventComponentID){event.aa.data.events.push("event422");dS.ingress.page.imageViews++}else{event.aa.data.events.push("event421");event.aa.data.events.push("event422");dS.ingress.page.imageGalleryViews++;dS.ingress.page.imageViews++;dS.imageGallery=dS.imageGallery||{};dS.imageGallery.currentID=eventComponentID;if(Bootstrapper.ensightenOptions.publishPath.split("-")[1]=="nzz"||Bootstrapper.ensightenOptions.publishPath.split("-")[1]=="blv"){var cb_sections=[];if(DANZZ.getNested(digitalData,
"component["+componentIndex+"].category","typeof")!=="undefined"){if(digitalData.component[componentIndex].category.primaryCategory)cb_sections.push(digitalData.component[componentIndex].category.primaryCategory);if(digitalData.component[componentIndex].category.subCategory1)cb_sections.push(digitalData.component[componentIndex].category.subCategory1);if(digitalData.component[componentIndex].category.subCategory2)cb_sections.push(digitalData.component[componentIndex].category.subCategory2)}cbComponentID=
eventComponentID.substring(eventComponentID.length-3,eventComponentID.length)=="img"?eventComponentID.substring(eventComponentID.length-3):eventComponentID;DANZZ.chartBeatVirtualPage(DANZZ.getChartbeatPath(),window.document.title,DANZZ.getChartbeatSections(),DANZZ.getAuthorName().replace(/ ?\(.*?\)/g,"").replace(/ und /g,", ").replace(/;/g,","),DANZZ.getNested(digitalData,"page.category.pageType","value"))}}break;case "close":DANZZ.chartBeatVirtualPage(DANZZ.getChartbeatPath(),window.document.title,
DANZZ.getChartbeatSections(),DANZZ.getAuthorName().replace(/ ?\(.*?\)/g,"").replace(/ und /g,", ").replace(/;/g,","),DANZZ.getNested(digitalData,"page.category.pageType","value"));break}if(eventName=="Social Media Interaction"){if(DANZZ.checkDebugLevel(2))DANZZ.loggr("Action: "+eventAction,2);if(DANZZ.checkDebugLevel(6))DANZZ.loggr("Check event: Social Shares",6);if(eventAction=="share"){if(DANZZ.checkDebugLevel(2))DANZZ.loggr("Set event413: Social Shares",2);event.aa.data.events.push("event413");
dS.ingress.page.socialShares++;Bootstrapper.ensEvent.trigger("digitalData - Article Share");if(eventSubCategory1.toLowerCase()=="pocket"&&eventSubCategory3.toLowerCase()=="actionbar - pocket experiment")event.aa.data.events.push("event990");if(eventSubCategory1.toLowerCase()=="pocket"&&eventSubCategory3.toLowerCase()=="actionbar")event.aa.data.events.push("event991");if(eventSubCategory1.toLowerCase()=="pocket"&&eventSubCategory3.toLowerCase()=="bottom")event.aa.data.events.push("event992")}}if(eventName==
"Storytelling Interaction")if(eventAction=="load"||eventNonInteractive===true){eventNumber++;continue}else if(eventNonInteractive===false){event.aa.data.events.push("event352");dS.ingress.page.storytellingInteractions++}if(eventName=="Bookmark Interaction"){if(eventAction=="add"){event.aa.data.events.push("event341");dS.ingress.page.bookmarkAdds++}if(eventAction=="remove"){event.aa.data.events.push("event342");dS.ingress.page.bookmarkRemoves++}}if(eventAction=="subscribe"){event.aa.data.events.push("event321");
if(eventName=="Newsletter Interaction"){event.aa.data.events.push("event331");dS.nl={};dS.nl.name=eventValue;switch(eventValue){case "NZZ am Morgen":dS.nl.convLabel="nt0bCJ23n28Q6dzC8gM";break;case "NZZ am Abend":dS.nl.convLabel="w8fcCLy1jG8Q6dzC8gM";break;case "Briefing (Morgenausgabe) Schweizer Ausgabe":dS.nl.convLabel="4VUZCN_qhsYBEOncwvID";break;case "Briefing (Morgenausgabe) Deutsche Ausgabe":dS.nl.convLabel="x-X_CIPkk8YBEOncwvID";break;case "Briefing (Abendausgabe) Schweizer Ausgabe":dS.nl.convLabel=
"cCuCCMCs-sUBEOncwvID";break;case "Briefing (Abendausgabe) Deutsche Ausgabe":dS.nl.convLabel="vTgQCO7piMYBEOncwvID";break;case "NZZ am Sonntag":dS.nl.convLabel="oW9-CNG1jG8Q6dzC8gM";break;case "Der andere Blick":dS.nl.convLabel="pXjICKSv6MIBEOncwvID";break;case "Wirtschaft":dS.nl.convLabel="r51FCNi5n28Q6dzC8gM";break;case "International":dS.nl.convLabel="ujpbCM-5n28Q6dzC8gM";break;case "Z\u00fcrich":dS.nl.convLabel="Bqx9CKe7n28Q6dzC8gM";break;case "Sport":dS.nl.convLabel="wpa7CPO5jG8Q6dzC8gM";break;
case "Digital":dS.nl.convLabel="YA9LCMe_pW8Q6dzC8gM";break;case "NZZ Bellevue":dS.nl.convLabel="ELHfCNq-n28Q6dzC8gM";break;case "NZZ Folio":dS.nl.convLabel="iGgbCOy-n28Q6dzC8gM";break;case "NZZ Asien":dS.nl.convLabel="y9aVCPmf1sIBEOncwvID";break;default:dS.nl.convLabel=""}if(document.readyState==="complete")Bootstrapper.ensEvent.trigger("digitalData - Newsletter Subscription");else window.addEventListener("load",function(){Bootstrapper.ensEvent.trigger("digitalData - Newsletter Subscription")})}}if(eventAction==
"unsubscribe"){if(DANZZ.checkDebugLevel(2))DANZZ.loggr("Action: "+eventAction,2);event.aa.data.events.push("event322");if(eventName=="Newsletter Interaction")event.aa.data.events.push("event332")}if(eventName=="Notification Interaction"){if(eventComponentID=="2021-epaper-feedback"&&eventAction=="display"&&eventPosition==2||eventSubCategory3.toLowerCase()=="snackbar"){eventNumber++;continue}var conversionPattern=new RegExp("^conversion","i");var offerPattern=new RegExp("^offer","i");if(DANZZ.checkDebugLevel(2))DANZZ.loggr("Action: "+
eventAction,2);if(eventAction=="display"){event.aa.data.events.push("event311");if(eventComponentName.toLowerCase().search("diamond")>-1)event.aa.data.events.push("event282");if(eventSubCategory2=="non-disruptive"||eventSubCategory1=="adnz"&&eventSubCategory3=="v1")event.aa.data.events.push("event312");else if(eventSubCategory2=="disruptive"||eventSubCategory1=="adnz"&&eventSubCategory3=="v2"){event.aa.data.events.push("event313");if(eventSubCategory3=="order prompt"||eventSubCategory3=="order prompt abo+"){dS.ingress.page.orderPrompt=
true;event.aa.data.events.push("event283");if(document.readyState==="complete")Bootstrapper.ensEvent.trigger("digitalData - Order Prompt");else window.addEventListener("load",function(){Bootstrapper.ensEvent.trigger("digitalData - Order Prompt")})}if(eventSubCategory3=="order prompt premium")event.aa.data.events.push("event284");if(eventSubCategory3=="registration prompt premium")event.aa.data.events.push("event285")}else if(eventSubCategory2=="semi-disruptive")event.aa.data.events.push("event314")}if(eventAction==
"close")event.aa.data.events.push("event318");if(DANZZ.checkDebugLevel(6))DANZZ.loggr("Check event: Notification Success",6);if(eventAction=="success"){if(DANZZ.checkDebugLevel(2))DANZZ.loggr("Set event175: Notification Success",2);if(DANZZ.checkDebugLevel(2))DANZZ.loggr("Set event319: Notification Success",2);event.aa.data.events.push("event175");event.aa.data.events.push("event319")}if(conversionPattern.test(eventAction)){var conversionExtracted=Number(eventAction.replace("conversion",""));if(conversionExtracted>=
1&&conversionExtracted<=9){var conversionNumber="event39"+eventAction.replace("conversion","");event.aa.data.events.push("event390");event.aa.data.events.push(conversionNumber)}else DANZZ.loggr("TMS ERROR Notification Conversion: Out of Range (needs to be between 1 and 9)",0)}if(offerPattern.test(eventAction)){var offerExtracted=Number(eventAction.replace("offer",""));if(offerExtracted>=1&&offerExtracted<=9){var offerNumber="event85"+eventAction.replace("offer","");event.aa.data.events.push("event850");
event.aa.data.events.push(offerNumber)}else DANZZ.loggr("TMS ERROR Notification Offer: Out of Range (needs to be between 1 and 9)",0)}if(eventAction.search("feedback")>-1)event.aa.data.events.push("event380");if(eventAction=="feedback1"){event.aa.data.events.push("event381");if(!isNaN(eventValue))event.aa.data.events.push("event389\x3d"+eventValue);else if(eventSubCategory3=="article feedback")switch(eventValue.toLowerCase()){case "ja":event.aa.data.events.push("event389\x3d"+3);break;case "teilweise":event.aa.data.events.push("event389\x3d"+
2);break;case "nein":event.aa.data.events.push("event389\x3d"+1);break;default:}}else if(eventAction=="feedback2")event.aa.data.events.push("event382");window.setTimeout(function(){DANZZ.getInternalPromotions()},50)}if(eventName=="Form Interaction"||eventName=="Notification Interaction"&&eventSubCategory3=="registration prompt"&&eventPosition==1||eventName=="Notification Interaction"&&eventPrimaryCategory=="user"&&eventSubCategory1=="account"&&eventSubCategory2=="registration"&&eventSubCategory3==
"personal data"){if(DANZZ.checkDebugLevel(2))DANZZ.loggr("Action: "+eventAction,2);if(DANZZ.checkDebugLevel(6))DANZZ.loggr("Check event: Form Start",6);if(eventAction=="display"){var pixelTriggers=["email","login","registration"];dS.form=dS.form||{};dS.form.currentStep=eventSubCategory2;if(pixelTriggers.indexOf(eventSubCategory2)>-1)if(document.readyState==="complete")Bootstrapper.ensEvent.trigger("digitalData - Form Display");else window.addEventListener("load",function(){Bootstrapper.ensEvent.trigger("digitalData - Form Display")});
if(eventPosition=="1"){if(DANZZ.checkDebugLevel(2))DANZZ.loggr("Set event171: Form Start",2);event.aa.data.events.push("event171")}}if(DANZZ.checkDebugLevel(6))DANZZ.loggr("Check event: Form Success",6);if((eventAction=="confirm"||eventAction=="success")&&componentFound&&(eventPosition==digitalData.component[componentIndex].componentInfo.componentSize||eventSubCategory3.search("confirmation")>-1)){if(DANZZ.checkDebugLevel(2))DANZZ.loggr("Set event175: Form Success",2);event.aa.data.events.push("event175")}if(DANZZ.checkDebugLevel(6))DANZZ.loggr("Check event: Form Error",
6);if(eventAction=="error"){if(DANZZ.checkDebugLevel(2))DANZZ.loggr("Set event176: Form Error",2);event.aa.data.events.push("event176")}if(DANZZ.checkDebugLevel(6))DANZZ.loggr("Check event: Form Activation",6);if((eventAction=="confirm"||eventAction=="success")&&eventSubCategory2=="activation"){if(DANZZ.checkDebugLevel(2))DANZZ.loggr("Set event178: Form Activation",2);event.aa.data.events.push("event178")}if(DANZZ.checkDebugLevel(6))DANZZ.loggr("Check event: Login Success",6);if((eventAction=="confirm"||
eventAction=="success")&&eventSubCategory2=="login"&&(eventSubCategory3=="success"||eventSubCategory3=="confirmation")){if(DANZZ.checkDebugLevel(2))DANZZ.loggr("Set event271: Login Success",2);event.aa.data.events.push("event271")}if(DANZZ.checkDebugLevel(6))DANZZ.loggr("Check event: Login Error",6);if(eventAction=="error"&&eventSubCategory2=="login"&&eventSubCategory3=="any"){if(DANZZ.checkDebugLevel(2))DANZZ.loggr("Set event272: Login Error",2);event.aa.data.events.push("event272")}if(DANZZ.checkDebugLevel(6))DANZZ.loggr("Check event: Logout Success",
6);if((eventAction=="confirm"||eventAction=="success")&&eventSubCategory2=="logout"&&(eventSubCategory3=="success"||eventSubCategory3=="confirmation")){if(DANZZ.checkDebugLevel(2))DANZZ.loggr("Set event273: Logout Success",2);event.aa.data.events.push("event273")}if(DANZZ.checkDebugLevel(6))DANZZ.loggr("Check event: Logout Error",6);if(eventAction=="error"&&eventSubCategory2=="logout"&&eventSubCategory3=="any"){if(DANZZ.checkDebugLevel(2))DANZZ.loggr("Set event274: Logout Error",2);event.aa.data.events.push("event274")}if(DANZZ.checkDebugLevel(6))DANZZ.loggr("Check event: Registration Prompt",
6);if(eventAction=="display"&&(eventSubCategory2=="registration"&&eventSubCategory3=="prompt"||eventSubCategory3=="registration prompt"||eventSubCategory3=="registration prompt abo+")){if(DANZZ.checkDebugLevel(2))DANZZ.loggr("Set event281: Registration Prompt",2);event.aa.data.events.push("event281");dS.ingress.page.registrationPrompt=true;Bootstrapper.ensEvent.trigger("digitalData - Registration Prompt")}if(DANZZ.checkDebugLevel(6))DANZZ.loggr("Check event: Registration Success",6);if((eventAction==
"confirm"||eventAction=="success")&&eventSubCategory2=="registration"&&(eventSubCategory3=="success"||eventSubCategory3=="confirmation")){if(DANZZ.checkDebugLevel(2))DANZZ.loggr("Set event275: Registration Success",2);if(DANZZ.getNested(digitalData,"user[0].profile[0].profileInfo.profileID","length")>0)event.aa.data.events.push("event275"+":"+DANZZ.getUniqueEventID([DANZZ.getNested(digitalData,"user[0].profile[0].profileInfo.profileID","value")]));else event.aa.data.events.push("event275");dS.ingress.page.registrationSuccess=
true;if(document.readyState==="complete")Bootstrapper.ensEvent.trigger("digitalData - Registration Success");else window.addEventListener("load",function(){Bootstrapper.ensEvent.trigger("digitalData - Registration Success")})}if(DANZZ.checkDebugLevel(6))DANZZ.loggr("Check event: Registration Error",6);if(eventAction=="error"&&eventSubCategory2=="registration"&&eventSubCategory3=="any"){if(DANZZ.checkDebugLevel(2))DANZZ.loggr("Set event276: Registration Error",2);event.aa.data.events.push("event276")}if(DANZZ.checkDebugLevel(6))DANZZ.loggr("Check event: Activation Success",
6);if((eventAction=="confirm"||eventAction=="success")&&eventSubCategory2=="activation"&&(eventSubCategory3=="success"||eventSubCategory3=="confirmation")){if(DANZZ.checkDebugLevel(2))DANZZ.loggr("Set event277: Activation Success",2);event.aa.data.events.push("event277")}if(DANZZ.checkDebugLevel(6))DANZZ.loggr("Check event: Activation Error",6);if(eventAction=="error"&&eventSubCategory2=="activation"&&eventSubCategory3=="any"){if(DANZZ.checkDebugLevel(2))DANZZ.loggr("Set event278: Activation Error",
2);event.aa.data.events.push("event278")}if(DANZZ.checkDebugLevel(6))DANZZ.loggr("Check event: Forgot Login Credentials",6);if(eventAction=="display"&&eventSubCategory2=="change password"&&eventSubCategory3=="forgot password"){if(DANZZ.checkDebugLevel(2))DANZZ.loggr("Set event233: Activation Success",2);event.aa.data.events.push("event233")}if(DANZZ.checkDebugLevel(6))DANZZ.loggr("Check event: Password Reset Success",6);if(eventAction=="success"&&eventSubCategory2=="change password"&&eventSubCategory3==
"reset password"){if(DANZZ.checkDebugLevel(2))DANZZ.loggr("Set event236: Password Reset Success",2);event.aa.data.events.push("event236")}if(DANZZ.checkDebugLevel(6))DANZZ.loggr("Check event: Password Reset Error",6);if(eventAction=="error"&&eventSubCategory2=="change password"&&eventSubCategory3=="reset password"){if(DANZZ.checkDebugLevel(2))DANZZ.loggr("Set event237: Password Reset Error",2);event.aa.data.events.push("event237")}if(DANZZ.checkDebugLevel(6))DANZZ.loggr("Check event: Password Change Success",
6);if(eventAction=="success"&&eventSubCategory2=="change password"&&eventSubCategory3=="confirmation"){if(DANZZ.checkDebugLevel(2))DANZZ.loggr("Set event246: Password Reset Success",2);event.aa.data.events.push("event246")}if(DANZZ.checkDebugLevel(6))DANZZ.loggr("Check event: Password Change Error",6);if(eventAction=="error"&&eventSubCategory2=="change password"&&eventSubCategory3=="confirmation"){if(DANZZ.checkDebugLevel(2))DANZZ.loggr("Set event247: Password Reset Error",2);event.aa.data.events.push("event247")}}if(eventPrimaryCategory==
"product"&&eventSubCategory1=="shop"&&eventSubCategory2=="order"){if(DANZZ.checkDebugLevel(6))DANZZ.loggr("Check event: Order Prompt",6);if(eventAction=="display"&&eventSubCategory3=="prompt"){if(DANZZ.checkDebugLevel(2))DANZZ.loggr("Set event283: Order Prompt",2);dS.ingress.page.orderPrompt=true;if(DANZZ.isComponentPremium()=="premium"&&dS.ingress.publishPath.split("-")[1]=="nzznews")event.aa.data.events.push("event284");else{event.aa.data.events.push("event283");if(document.readyState==="complete")Bootstrapper.ensEvent.trigger("digitalData - Order Prompt");
else window.addEventListener("load",function(){Bootstrapper.ensEvent.trigger("digitalData - Order Prompt")})}}if(DANZZ.checkDebugLevel(6))DANZZ.loggr("Check event: Cart Addition",6);if(eventAction=="add"&&eventSubCategory3=="cart"){if(DANZZ.checkDebugLevel(2))DANZZ.loggr("Set scOpen/scAdd: Cart Addition",2);if(!(window.location.host=="abo.nzz.ch"&&window.location.pathname=="/epaper/")){event.aa.data.events.push("scOpen"+(DANZZ.getNested(digitalData,"cart.cartID","value")?":"+DANZZ.getUniqueEventID([DANZZ.getNested(digitalData,
"cart.cartID","value")]):""));event.aa.data.events.push("scAdd");event.aa.data.products=DANZZ.getProducts().split(",")}else if(window.location.host=="abo.nzz.ch"&&window.location.pathname=="/epaper/"&&DANZZ.getURLParam("reopen","param")!="form"){event.aa.data.events.push("scOpen"+(DANZZ.getNested(digitalData,"cart.cartID","value")?":"+DANZZ.getUniqueEventID([DANZZ.getNested(digitalData,"cart.cartID","value")]):""));event.aa.data.events.push("scAdd");event.aa.data.events.push("scView");event.aa.data.events.push("scCheckout");
if(DANZZ.getNested(digitalData,"cart.price.paymentMethod","typeof")!=="undefined")event.aa.data.eVar88=digitalData.cart.price.paymentMethod;event.aa.data.products=DANZZ.getProducts().split(",")}else{eventNumber++;continue}dS.aa.checkout_event=true;if(document.readyState==="complete")Bootstrapper.ensEvent.trigger("digitalData - Cart Addition");else window.addEventListener("load",function(){Bootstrapper.ensEvent.trigger("digitalData - Cart Addition")})}if(DANZZ.checkDebugLevel(6))DANZZ.loggr("Check event: Order Payment",
6);if(eventAction=="display"&&eventSubCategory3=="payment"){if(DANZZ.checkDebugLevel(2))DANZZ.loggr("Set scView: Order Payment",2);event.aa.data.events.push("scView");event.aa.data.products=DANZZ.getProducts().split(",");dS.aa.checkout_event=true;if(document.readyState==="complete")Bootstrapper.ensEvent.trigger("digitalData - Order Payment");else window.addEventListener("load",function(){Bootstrapper.ensEvent.trigger("digitalData - Order Payment")})}if(DANZZ.checkDebugLevel(6))DANZZ.loggr("Check event: Order Overview",
6);if(eventAction=="display"&&eventSubCategory3=="overview"){if(DANZZ.checkDebugLevel(2))DANZZ.loggr("Set scCheckout: Order Overview",2);event.aa.data.events.push("scCheckout");if(DANZZ.getNested(digitalData,"cart.price.paymentMethod","typeof")!=="undefined")event.aa.data.eVar88=digitalData.cart.price.paymentMethod;event.aa.data.products=DANZZ.getProducts().split(",");dS.aa.checkout_event=true;if(document.readyState==="complete")Bootstrapper.ensEvent.trigger("digitalData - Order Overview");else window.addEventListener("load",
function(){Bootstrapper.ensEvent.trigger("digitalData - Order Overview")})}if(DANZZ.checkDebugLevel(6))DANZZ.loggr("Check event: Order Success",6);if((eventAction=="confirm"||eventAction=="success")&&(eventSubCategory3=="success"||eventSubCategory3=="confirmation")){if(DANZZ.checkDebugLevel(2))DANZZ.loggr("Set purchase: Order Success",2);if(DANZZ.checkDebugLevel(5))DANZZ.loggr("digitalData.transaction: "+JSON.stringify(digitalData.transaction,null,4),5);event.aa.data.purchaseID=DANZZ.getNested(digitalData,
"transaction.transactionID","typeof")!=="undefined"?DANZZ.fnv(digitalData.transaction.transactionID):DANZZ.fnv(DANZZ.getCurrentDate().getTime().toString()+"_"+DANZZ.getNested(dS,"ingress.instance","value"));if(DANZZ.getNested(digitalData,"transaction.total.paymentMethod","typeof")!=="undefined")event.aa.data.eVar88=digitalData.transaction.total.paymentMethod;if(DANZZ.getNested(digitalData,"transaction.profile.profileInfo.profileType","typeof")!=="undefined")event.aa.data.eVar89=digitalData.transaction.profile.profileInfo.profileType;
if(DANZZ.getNested(digitalData,"transaction.profile.profileInfo.isNewRegistration","value")!==false)event.aa.data.eVar90="new registration";event.aa.data.events.push("purchase");event.aa.data.products=DANZZ.getProducts().split(",");dS.aa.checkout_event=true;dS.ingress.page.orderSuccess=true;if(Bootstrapper.hasPageSpecificCompletion())DANZZ.orderConvPxl();else Bootstrapper.bindPageSpecificCompletion(function(){DANZZ.orderConvPxl()})}if(DANZZ.checkDebugLevel(6))DANZZ.loggr("Check event: Cross-Sell Offer",
6);if(eventAction=="display"&&eventSubCategory3=="cross-sell offer"){if(DANZZ.checkDebugLevel(2))DANZZ.loggr("Set events for: Cross-Sell Offer",2);event.aa.data.events.push("event811");event.aa.data.events.push("event812");var backupTransaction=digitalData.transaction;delete digitalData.transaction;var splitProducts=DANZZ.getProducts().split(",");digitalData.transaction=backupTransaction;var crossSellProduct=digitalData.transaction.item[0].productInfo.productID+"\u00b7"+digitalData.transaction.item[0].attributes.plan;
for(i=0;i<splitProducts.length;i++){for(j=(splitProducts[i].match(/;/g)||[]).length;j<5;j++)splitProducts[i]=splitProducts[i]+";";splitProducts[i]=splitProducts[i]+"eVar81\x3d"+crossSellProduct}event.aa.data.products=splitProducts.join(",");if(DANZZ.checkDebugLevel(3))DANZZ.loggr("event.aa.data.products: "+event.aa.data.products,3);event.aa.data.singleEvent=true}if(DANZZ.checkDebugLevel(6))DANZZ.loggr("Check event: Cross-Sell Cart Addition",6);if(eventAction=="add"&&eventSubCategory3=="cross-sell cart"){if(DANZZ.checkDebugLevel(2))DANZZ.loggr("Set cart addition: Cross-Sell Cart Addition",
2);event.aa.data.events.push("scOpen"+(DANZZ.getNested(digitalData,"cart.cartID","value")?":"+DANZZ.getUniqueEventID([DANZZ.getNested(digitalData,"cart.cartID","value")]):""));event.aa.data.events.push("scAdd");event.aa.data.events.push("scView");event.aa.data.events.push("scCheckout");event.aa.data.events.push("event813");event.aa.data.products=DANZZ.getProducts().split(",");dS.aa.checkout_event=true}if(DANZZ.checkDebugLevel(6))DANZZ.loggr("Check event: Cross-Sell Order Success",5);if((eventAction==
"confirm"||eventAction=="success")&&(eventSubCategory3=="cross-sell success"||eventSubCategory3=="cross-sell confirmation")){if(DANZZ.checkDebugLevel(2))DANZZ.loggr("Set purchase: Order Success",2);if(DANZZ.checkDebugLevel(5))DANZZ.loggr("digitalData.transaction: "+JSON.stringify(digitalData.transaction,null,4),5);event.aa.data.purchaseID=DANZZ.getNested(digitalData,"transaction.transactionID","typeof")!=="undefined"?digitalData.transaction.transactionID.slice(-21,-1):DANZZ.fnv(DANZZ.getCurrentDate().getTime().toString()+
"_"+DANZZ.getNested(dS,"ingress.instance","value"));if(DANZZ.getNested(digitalData,"transaction.total.paymentMethod","typeof")!=="undefined")event.aa.data.eVar88=digitalData.transaction.total.paymentMethod;if(DANZZ.getNested(digitalData,"transaction.profile.profileInfo.profileType","typeof")!=="undefined")event.aa.data.eVar89=digitalData.transaction.profile.profileInfo.profileType;if(DANZZ.getNested(digitalData,"transaction.profile.profileInfo.isNewRegistration","value")!==false)event.aa.data.eVar90=
"new registration";event.aa.data.events.push("purchase");event.aa.data.events.push("event814"+(event.aa.data.purchaseID?":"+event.aa.data.purchaseID:""));event.aa.data.products=DANZZ.getProducts().split(",");dS.aa.checkout_event=true;event.aa.singleEvent=true;window.addEventListener("load",function(){DANZZ.orderConvPxl()});dS.ingress.page.crossSellSuccess=true}if(DANZZ.checkDebugLevel(1))DANZZ.loggr("Event(s) in event.aa.data.events: "+event.aa.data.events.join(","),1)}if(eventName=="Video Player Interaction"){var videoName=
componentName+" ("+eventComponentID+")";var playerType=eventSubCategory1;var eventPositionRounded=Math.round(eventPosition);var divisor=4;var videoCategories=(DANZZ.getNested(digitalData,"component["+componentIndex+"].category.primaryCategory","length")>0?DANZZ.getNested(digitalData,"component["+componentIndex+"].category.primaryCategory","value"):"none")+"|"+(DANZZ.getNested(digitalData,"component["+componentIndex+"].category.subCategory1","length")>0?DANZZ.getNested(digitalData,"component["+componentIndex+
"].category.subCategory1","value"):"none")+"|"+(DANZZ.getNested(digitalData,"component["+componentIndex+"].category.subCategory2","length")>0?DANZZ.getNested(digitalData,"component["+componentIndex+"].category.subCategory2","value"):"none")+"|"+(DANZZ.getNested(digitalData,"component["+componentIndex+"].category.subCategory3","length")>0?DANZZ.getNested(digitalData,"component["+componentIndex+"].category.subCategory3","value"):"none");switch(eventAction){case "play":case "doplay":if(DANZZ.getNested(dS,
"videoPlayer.currentID","value")==eventComponentID){s.Media.play(videoName,eventPositionRounded);if(DANZZ.checkDebugLevel(2))DANZZ.loggr('play -\x3e s.Media.play("'+videoName+'", '+eventPositionRounded+")",2)}else{s.Media.open(videoName,componentSize,playerType);if(DANZZ.checkDebugLevel(2))DANZZ.loggr('ready -\x3e s.Media.open("'+videoName+'", '+componentSize+', "'+playerType+'")',2);s.Media.play(videoName,eventPositionRounded);if(DANZZ.checkDebugLevel(2))DANZZ.loggr('play -\x3e s.Media.play("'+videoName+
'", '+eventPositionRounded+")",2);dS.videoPlayer=dS.videoPlayer||{};dS.videoPlayer.currentID=eventComponentID;dS.videoPlayer.currentName=videoName;dS.ingress.page.videoViews++;event.aa.data.eVar110=videoName;event.aa.data.eVar111=componentSize;event.aa.data.eVar112=videoCategories;event.aa.data.events.push("event741");event.aa.data.events.push("event758\x3d"+componentSize);Bootstrapper.ensEvent.trigger("digitalData - Video View")}break;case "pause":case "dopause":s.Media.stop(videoName,eventPositionRounded);
if(DANZZ.checkDebugLevel(2))DANZZ.loggr('pause -\x3e s.Media.stop("'+videoName+'", '+eventPositionRounded+")",2);break;case "progress":case "customprogress":event.aa.data.events.push("event743\x3d"+Math.floor(componentSize/divisor));var eventValueMap={25:"event745",50:"event747",75:"event749"};if(eventValueMap[eventValue]!=undefined){event.aa.data.eVar110=videoName;event.aa.data.eVar111=componentSize;event.aa.data.eVar112=videoCategories;event.aa.data.events.push(eventValueMap[eventValue])}break;
case "complete":case "dostop":case "ended":s.Media.close(videoName);if(DANZZ.checkDebugLevel(2))DANZZ.loggr('complete -\x3e s.Media.close("'+videoName+'")',2);event.aa.data.eVar110=videoName;event.aa.data.eVar111=componentSize;event.aa.data.eVar112=videoCategories;event.aa.data.events.push("event742");event.aa.data.events.push("event743\x3d"+Math.floor(componentSize/divisor));break;case "loaded":event.aa.data.eVar110=videoName;event.aa.data.eVar111=componentSize;event.aa.data.eVar112=videoCategories;
event.aa.data.events.push("event751");break;case "impression":eventNumber++;continue;break;case "playbackstart":event.aa.data.eVar110=videoName;event.aa.data.eVar111=componentSize;event.aa.data.eVar112=videoCategories;event.aa.data.events.push("event752");break;case "adstarted":event.aa.data.eVar110=videoName;event.aa.data.eVar111=componentSize;event.aa.data.eVar112=videoCategories;event.aa.data.events.push("event753");break;case "adcompleted":event.aa.data.eVar110=videoName;event.aa.data.eVar111=
componentSize;event.aa.data.eVar112=videoCategories;event.aa.data.events.push("event754");break;case "aderror":event.aa.data.eVar110=videoName;event.aa.data.eVar111=componentSize;event.aa.data.eVar112=videoCategories;event.aa.data.events.push("event755");break;default:eventNumber++;continue}}if(eventName=="Audio Interaction"){var audioUniqueEventID=DANZZ.getUniqueEventID([DANZZ.getNested(digitalData,"component["+componentIndex+"].componentInfo.componentID","value"),DANZZ.getNested(dS,"p4m.vid","value")],
60,"");switch(eventAction){case "play":if(DANZZ.checkDebugLevel(2))DANZZ.loggr("Action: "+eventAction,2);if(DANZZ.checkDebugLevel(2))DANZZ.loggr("Set event431: Audio Listens",2);event.aa.data.events.push("event431"+":"+audioUniqueEventID);dS.ingress.page.audioListens++;if(eventSubCategory2=="text-to-speech"){if(DANZZ.checkDebugLevel(2))DANZZ.loggr("Action: "+eventAction,2);if(DANZZ.checkDebugLevel(2))DANZZ.loggr("Set event441: Listens to Article (Unique Event ID: "+audioUniqueEventID+")",2);event.aa.data.events.push("event441"+
":"+audioUniqueEventID);Bootstrapper.ensEvent.trigger("digitalData - TTS Listen")}if(eventSubCategory2=="podcast"||eventSubCategory2=="audio"&&DANZZ.getNested(digitalData,"component[0].attributes.flag","value")=="Podcast"){if(DANZZ.checkDebugLevel(2))DANZZ.loggr("Action: "+eventAction,2);if(DANZZ.checkDebugLevel(2))DANZZ.loggr("Set event451: Listens to Podcast",2);event.aa.data.events.push("event451"+":"+audioUniqueEventID);dS.podcast={};dS.podcast.name=eventComponentName;Bootstrapper.ensEvent.trigger("digitalData - Podcast Listen")}break;
case "complete":if(DANZZ.checkDebugLevel(2))DANZZ.loggr("Action: "+eventAction,2);if(DANZZ.checkDebugLevel(2))DANZZ.loggr("Set event432: Audio Completes",2);event.aa.data.events.push("event432"+":"+audioUniqueEventID);if(eventSubCategory2=="text-to-speech"){if(DANZZ.checkDebugLevel(2))DANZZ.loggr("Action: "+eventAction,2);if(DANZZ.checkDebugLevel(2))DANZZ.loggr("Set event442: Text-to-Speech Completes (Unique Event ID: "+audioUniqueEventID+")",2);event.aa.data.events.push("event442"+":"+audioUniqueEventID)}if(eventSubCategory2==
"podcast"||eventSubCategory2=="audio"&&DANZZ.getNested(digitalData,"component[0].attributes.flag","value")=="Podcast"){if(DANZZ.checkDebugLevel(2))DANZZ.loggr("Action: "+eventAction,2);if(DANZZ.checkDebugLevel(2))DANZZ.loggr("Set event452: Podcast Completes",2);event.aa.data.events.push("event452"+":"+audioUniqueEventID)}break}}if(eventName=="Contest Interaction")switch(eventAction){case "success":if(DANZZ.checkDebugLevel(2))DANZZ.loggr("Action: "+eventAction,2);event.aa.data.events.push("event261");
if(eventComponentID.search("themarket_trial")>=0)if(document.readyState==="complete")Bootstrapper.ensEvent.trigger("digitalData - Contest Success The Market Trial");else window.addEventListener("load",function(){Bootstrapper.ensEvent.trigger("digitalData - Contest Success The Market Trial")});break}if(eventName=="Internal Promotion Interaction"){var intprosToSkip=["reg_nzz_prompt_1023","reg_nzz_prompt_1022","reg_nzzas_prompt_1019"];if(DANZZ.checkDebugLevel(2))DANZZ.loggr("Action: "+eventAction,2);
switch(eventAction){case "display":if(intprosToSkip.indexOf(eventComponentID)>-1||eventComponentID.indexOf("_grows119_")>-1){eventNumber++;continue}else{event.aa.data.events.push("event591");break}case "clickthrough":event.aa.data.events.push("event595");event.aa.data.eVar159=eventComponentID;break}event.aa.data.prop59=eventComponentID;event.aa.data.eVar59="D\x3dc59"}if(eventName=="App Lifecycle"){switch(eventAction){case "start":dS.visibility.appLifecycleIsBackground=false;break;case "active":dS.visibility.appLifecycleIsBackground=
false;break;case "inactive":dS.visibility.appLifecycleIsBackground=true;break;case "background":dS.visibility.appLifecycleIsBackground=true;break}eventNumber++;continue}if(eventName=="UI Interaction"){if(DANZZ.checkDebugLevel(2))DANZZ.loggr("Set event551: UI Interactions",2);if(eventSubCategory1.toLowerCase()=="bta container"||eventSubCategory1.toLowerCase()=="bta section"){eventNumber++;continue}event.aa.data.events.push("event551");if(eventComponentName.toLowerCase()=="carousel"&&digitalData.product.length>
0){event.aa.data.products=DANZZ.getProducts().split(",");if(DANZZ.checkDebugLevel(2))DANZZ.loggr("Set event811: Product Views from Carousel for: "+event.aa.data.products,2);event.aa.data.events.push("event811")}}if(eventName=="content-view"){event.aa.data.events.push("event561");if(eventPrimaryCategory=="company")event.aa.data.events.push("event562")}if(eventName=="Adobe Target Interaction"){if(DANZZ.checkDebugLevel(2))DANZZ.loggr("Set event600: Generic Adobe Target Interaction",2);event.aa.data.events.push("event600");
if(eventAction=="success"){DANZZ.loggr("Set event601: Adobe Target Interaction -\x3e Success",2);event.aa.data.events.push("event601")}}if(eventName=="TMS Event"&&eventAction=="loggr"&&digitalData.component[componentIndex].category.subCategory2===0)event.aa.data.events.push("event999"+":"+DANZZ.getUniqueEventID([eventValue,eventSubCategory2,DANZZ.getSessionID()]));if(eventName=="System Interaction"){event.aa.data.events.push("event541");if(eventComponentID=="fontchanger")event.aa.data.events.push("event542")}if(Object.keys(event.aa.data).length){dS.aa.event[eventComponentID]=
dS.aa.event[eventComponentID]||[];dS.aa.event[eventComponentID].push(event.aa)}if(dS.cfg.hj.enabled&&event.aa.data.events!=undefined){window.hj=window.hj||function(){(hj.q=hj.q||[]).push(arguments)};for(var i=0;i<event.aa.data.events.length;i++){var currentItem=event.aa.data.events[i];if(currentItem.indexOf(":")>-1)currentItem=currentItem.substring(0,currentItem.indexOf(":"));if(currentItem.indexOf("\x3d")>-1)currentItem=currentItem.substring(0,currentItem.indexOf("\x3d"));hj("event",currentItem)}}if(keepSessionAlive===
false&&DANZZ.getNested(dS,"p4m.currentSessionID","typeof")!=="undefined")sessionID=dS.p4m.currentSessionID;else sessionID=DANZZ.getSessionID();digitalData.event[eventNumber].attributes=digitalData.event[eventNumber].attributes||{};digitalData.event[eventNumber].attributes.sessionID=sessionID;eventNumber++;if(DANZZ.checkDebugLevel(5))DANZZ.loggr("End of while loop",5)}if(dS.cfg.amc.analytics.consent===true){if(DANZZ.checkDebugLevel(5))DANZZ.loggr("Call adobeAnalyticsTracking",5);DANZZ.adobeAnalyticsTracking()}else dS.aa.event=
{};if(DANZZ.checkDebugLevel(5))DANZZ.loggr("End of eventHandler!",5);return eventNumber}catch(err){DANZZ.loggr("TMS ERROR eH: "+err.message,0);eventNumber++;return eventNumber}}},3738602,[3715282,3738607],281205,[281887,430195],24);
Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;window.DANZZ=window.DANZZ||{};DANZZ.getURLParam=function(parameter){try{var url;var paramValue;var urlString=window.location.protocol+"//"+window.location.hostname+window.location.pathname+window.location.search;if(typeof window.URL.prototype!="undefined"){url=new URL(urlString);paramValue=url.searchParams.get(parameter)}else{var queryString={};url=document.createElement("a");
url.href=urlString;var urlParams=url.search.replace("?","").split("\x26");for(var i=0;i<urlParams.length;i++){var pair=urlParams[i].split("\x3d");var key=decodeURIComponent(pair[0]);var value=decodeURIComponent(pair[1]);if(typeof queryString[key]==="undefined")queryString[key]=decodeURIComponent(value);else if(typeof queryString[key]==="string"){var arr=[queryString[key],decodeURIComponent(value)];queryString[key]=arr}else queryString[key].push(decodeURIComponent(value))}paramValue=queryString[parameter]}return paramValue!=
null?paramValue:""}catch(e){console.log(e.message)}};if(typeof window.performance!=="undefined")window.performance.mark("js.bootstrap.init");try{if(DANZZ.getURLParam("ens_dbglvl","param")!==""){console.log("Bootstrap.js Init");console.log("%c"+JSON.stringify(digitalData,null,4),"color: #aaccff")}}catch(err){console.log("Catch me if you can: "+err.message)}try{window.addEventListener("digitalData:loaded",function(){if(typeof adobe!="undefined"&&adobe.hasOwnProperty("target")&&dS.cfg.amc.lastPageID!=
digitalData.page.pageInfo.pageID&&dS.cfg.amc.analytics.consent==true){DANZZ.adobeTargetView();dS.cfg.amc.lastPageID=digitalData.page.pageInfo.pageID}});window.addEventListener("tms:pageReady",function(){dS=dS||{};dS.trigger=dS.trigger||{};dS.trigger.pageReadyConsecutive=dS.trigger.pageReadyFull===true&&dS.trigger.pageReadyListener===false?true:dS.trigger.pageReady;dS.trigger.pageReadyFull=true;if(DANZZ.getURLParam("ens_dbglvl","param")!==""||typeof dS!="undefined"&&typeof dS.debug!="undefined"&&typeof dS.debug.level!=
"undefined"&&dS.debug.level>0){console.log("tms:pageReady");console.log("%c"+JSON.stringify(digitalData,null,4),"color: #aaccff")}Bootstrapper.ensEvent.trigger("digitalData - "+DANZZ.getNested(digitalData,"page.category.primaryCategory","value"))},true)}catch(err){console.log("Catch me if you bottle: "+err.message)}},3715291,508285,24);
Bootstrapper.bindDependencyImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;window.dS=window.dS||{};dS.cfg=dS.cfg||{};dS.cfg.technology="n/a";dS.cfg.delayed=false;dS.cfg.event=dS.cfg.event||{};dS.cfg.event.parseType="interval";dS.cfg.event.parseInterval=250;dS.cfg.event.pageReadyListener=false;dS.cfg.gallery=dS.cfg.gallery||{};dS.cfg.gallery.overlay=false;dS.cfg.error=dS.cfg.error||{};dS.cfg.error.limit=100;dS.cfg.videoPlayer="n/a";dS.cfg.ingress=
dS.cfg.ingress||{};dS.cfg.ingress.domain="https://gc-ingress-prod.danzz.ch";dS.cfg.ingress.path="/ws-ingress";dS.cfg.amc=dS.cfg.amc||{};dS.cfg.amc.rsid=["nzzlive"];dS.cfg.amc.target=dS.cfg.amc.target||{};dS.cfg.amc.target.enabled=dS.cfg.amc.target.enabled||false;dS.cfg.amc.analytics=dS.cfg.amc.analytics||{};dS.cfg.amc.analytics.consent=dS.cfg.amc.analytics.consent||false;dS.cfg.cb=dS.cfg.cb||{};dS.cfg.cb.enabled=false;dS.cfg.cb.mabtest=dS.cfg.cb.mabtest||false;dS.cfg.cb.pingerurl="https://static.chartbeat.com/js/chartbeat_video.js";
dS.cfg.cb.maburl="//static.chartbeat.com/js/chartbeat_mab_image.js";dS.cfg.cb.uid=8912;dS.cfg.cb.domain="";dS.cfg.cb.publishPathSwitcher="generic";dS.cfg.cb.consent=dS.cfg.cb.consent||false;dS.cb=dS.cb||{};dS.cb.pingerLoaded=dS.cb.pingerLoaded||false;dS.cfg.c1=dS.cfg.c1||{};dS.cfg.c1.enabled=false;dS.cfg.c1.templateClient=false;dS.cfg.adnz=dS.cfg.adnz||{};dS.cfg.adnz.dmp=dS.cfg.adnz.dmp||{};dS.cfg.adnz.dmp.loadScript=true;dS.cfg.adnz.dmp.providerID="-1262851859831711409";dS.cfg.hj=dS.cfg.hj||{};dS.cfg.hj.enabled=
dS.cfg.hj.enabled||false;dS.cfg.hj.consent=dS.cfg.hj.consent||false;dS.cfg.sl=dS.cfg.sl||{};dS.cfg.sl.enabled=false;dS.cfg.pl=dS.cfg.pl||{};dS.cfg.pl.enabled=false;dS.cfg.mp=dS.cfg.mp||{};dS.cfg.mp.enabled=false;dS.cfg.mp.consent=dS.cfg.mp.consent||false;dS.cfg.mp.loaded=false;dS.cfg.mp.delayed=false;dS.cfg.cmp=dS.cfg.cmp||{};dS.cfg.cmp.enabled=typeof window.__cmp==="function"?true:false;switch(Bootstrapper.ensightenOptions.publishPath.split("-")[1]){case "nzz":dS.cfg.cmp.gdprApplies=true;break;case "nzzas":dS.cfg.cmp.gdprApplies=
true;break;case "blv":dS.cfg.cmp.gdprApplies=true;break;case "m":dS.cfg.cmp.gdprApplies=true;break;case "nzzmag":dS.cfg.cmp.gdprApplies=true;break;default:dS.cfg.cmp.gdprApplies=false;break}dS.cfg.debug=dS.cfg.debug||{};dS.cfg.debug.jsonParser=false;dS.cfg.debug.pixel=false;dS.cfg.debug.ingressLevel=0},3715294,[3715285,3715291],587003,[300516,508285],24);
Bootstrapper.bindDependencyImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;window.DANZZ=window.DANZZ||{};DANZZ.includes=function(input,search,start){if(typeof start!=="number")start=0;if(start+search.length>input.length)return false;else return input.indexOf(search,start)!==-1};DANZZ.BrowsingModeDetector=function(){var _instance=this;var _ignoringBots=true;var _browsingInIncognitoMode;var _callbackForNormalMode;var _callbackForIncognitoOrPrivateMode;
var _callbackDefault;this.BROWSING_NORMAL_MODE="NORMAL_MODE";this.BROWSING_INCOGNITO_PRIVATE_MODE="INCOGNITO_PRIVATE_MODE";this.ignoringBots=function(){_ignoringBots=true;return this};this.notIgnoringBots=function(){_ignoringBots=false;return this};this.getBrowsingMode=function(){return _browsingInIncognitoMode?this.BROWSING_INCOGNITO_PRIVATE_MODE:this.BROWSING_NORMAL_MODE};this.setBrowsingInIncognitoMode=function(){_browsingInIncognitoMode=true};this.setBrowsingInNormalMode=function(){_browsingInIncognitoMode=
false};this.isBotBrowsing=function(callback){var userAgentToTest=window.navigator.userAgent;var isBot=/googlebot|Googlebot-Mobile|Googlebot-Image|Google favicon|Mediapartners-Google|bingbot|slurp|java|wget|curl|Commons-HttpClient|Python-urllib|libwww|httpunit|nutch|phpcrawl|msnbot|jyxobot|FAST-WebCrawler|FAST Enterprise Crawler|biglotron|teoma|convera|seekbot|gigablast|exabot|ngbot|ia_archiver|GingerCrawler|webmon |httrack|webcrawler|grub.org|UsineNouvelleCrawler|antibot|netresearchserver|speedy|fluffy|bibnum.bnf|findlink|msrbot|panscient|yacybot|AISearchBot|IOI|ips-agent|tagoobot|MJ12bot|dotbot|woriobot|yanga|buzzbot|mlbot|yandexbot|purebot|Linguee Bot|Voyager|CyberPatrol|voilabot|baiduspider|citeseerxbot|spbot|twengabot|postrank|turnitinbot|scribdbot|page2rss|sitebot|linkdex|Adidxbot|blekkobot|ezooms|dotbot|Mail.RU_Bot|discobot|heritrix|findthatfile|europarchive.org|NerdByNature.Bot|sistrix crawler|ahrefsbot|Aboundex|domaincrawler|wbsearchbot|summify|ccbot|edisterbot|seznambot|ec2linkfinder|gslfbot|aihitbot|intelium_bot|facebookexternalhit|yeti|RetrevoPageAnalyzer|lb-spider|sogou|lssbot|careerbot|wotbox|wocbot|ichiro|DuckDuckBot|lssrocketcrawler|drupact|webcompanycrawler|acoonbot|openindexspider|gnam gnam spider|web-archive-net.com.bot|backlinkcrawler|coccoc|integromedb|content crawler spider|toplistbot|seokicks-robot|it2media-domain-crawler|ip-web-crawler.com|siteexplorer.info|elisabot|proximic|changedetection|blexbot|arabot|WeSEE:Search|niki-bot|CrystalSemanticsBot|rogerbot|360Spider|psbot|InterfaxScanBot|Lipperhey SEO Service|CC Metadata Scaper|g00g1e.net|GrapeshotCrawler|urlappendbot|brainobot|fr-crawler|binlar|SimpleCrawler|Livelapbot|Twitterbot|cXensebot|smtbot|bnf.fr_bot|A6-Indexer|ADmantX|Facebot|Twitterbot|OrangeBot|memorybot|AdvBot|MegaIndex|SemanticScholarBot|ltx71|nerdybot|xovibot|BUbiNG|Qwantify|archive.org_bot|Applebot|TweetmemeBot|crawler4j|findxbot|SemrushBot|yoozBot|lipperhey|y!j-asr|Domain Re-Animator Bot|AddThis/i.test(userAgentToTest);
return typeof callback==="undefined"?isBot:callback(isBot)};this.setCallbackForNormalMode=function(callback){_callbackForNormalMode=callback;return this};this.setCallbackForIncognitoOrPrivateMode=function(callback){_callbackForIncognitoOrPrivateMode=callback;return this};this.do=function(defaultCallback){_validateUserCallback(defaultCallback);if(_ignoringBots&&this.isBotBrowsing()){_browsingInIncognitoMode=false;_executeUserCallback();return}(new BrowserFactory).browser(this).detectBrowsingMode(_executeUserCallback)};
var _validateUserCallback=function(defaultCallback){_callbackDefault=defaultCallback;if(typeof _callbackDefault!=="function"&&(typeof _callbackForNormalMode!=="function"||typeof _callbackForIncognitoOrPrivateMode!=="function"))throw"Default callback or specific callbacks are required";};var _executeUserCallback=function(){if(_browsingInIncognitoMode&&typeof _callbackForIncognitoOrPrivateMode==="function")_callbackForIncognitoOrPrivateMode(_instance);else if(!_browsingInIncognitoMode&&typeof _callbackForNormalMode===
"function")_callbackForNormalMode(_instance);if(typeof _callbackDefault!=="undefined")_callbackDefault(_browsingInIncognitoMode,_instance)};return this};var BrowserFactory=function(){var _browser;this.browser=function(BrowsingModeDetector){if(typeof _browser==="object")return _browser;return _browser=_resolve(BrowsingModeDetector)};var _resolve=function(BrowsingModeDetector){if(/constructor/i.test(window.HTMLElement)||navigator.vendor&&navigator.vendor.indexOf("Apple")>-1){dS.bMD.b="Safari";if(DANZZ.checkDebugLevel(1))DANZZ.loggr("bMD: Safari Browser",
1);return new SafariBrowser(BrowsingModeDetector)}else if("MozAppearance"in document.documentElement.style){dS.bMD.b="Mozilla";if(DANZZ.checkDebugLevel(1))DANZZ.loggr("bMD: Mozilla Browser",1);return new MozillaBrowser(BrowsingModeDetector)}else if(window.webkitRequestFileSystem){dS.bMD.b="Webkit";if(DANZZ.checkDebugLevel(1))DANZZ.loggr("bMD: WebkitBrowser",1);return new WebkitBrowser(BrowsingModeDetector)}else if((DANZZ.includes(navigator.userAgent,"Edge")||DANZZ.includes(navigator.userAgent,"Trident")||
DANZZ.includes(navigator.userAgent,"msie"))&&(window.PointerEvent||window.MSPointerEvent)){dS.bMD.b="Microsoft";if(DANZZ.checkDebugLevel(1))DANZZ.loggr("bMD: Microsoft Browser",1);return new IE10EdgeBrowser(BrowsingModeDetector)}else{dS.bMD.b="Other";if(DANZZ.checkDebugLevel(1))DANZZ.loggr("bMD: Other Browser",1);return new OtherBrowser(BrowsingModeDetector)}};return this};var WebkitBrowser=function(BrowsingModeDetector){this.BrowsingModeDetector=BrowsingModeDetector;this.detectBrowsingMode=function(_executeUserCallback){var self=
this;var callbackWhenWebkitRequestFileSystemIsON=function(){self.BrowsingModeDetector.setBrowsingInNormalMode();_executeUserCallback();return};var callbackWhenWebkitRequestFileSystemIsOFF=function(){self.BrowsingModeDetector.setBrowsingInIncognitoMode();_executeUserCallback();return};window.webkitRequestFileSystem(window.TEMPORARY,1,callbackWhenWebkitRequestFileSystemIsON,callbackWhenWebkitRequestFileSystemIsOFF)};return this};var MozillaBrowser=function(BrowsingModeDetector){this.BrowsingModeDetector=
BrowsingModeDetector;this.detectBrowsingMode=function(_executeUserCallback){if(navigator.serviceWorker)this.BrowsingModeDetector.setBrowsingInNormalMode();else this.BrowsingModeDetector.setBrowsingInIncognitoMode();_executeUserCallback()};return this};var SafariBrowser=function(BrowsingModeDetector){this.BrowsingModeDetector=BrowsingModeDetector;this.detectBrowsingMode=function(_executeUserCallback){if(window.safariIncognito){his.BrowsingModeDetector.setBrowsingInIncognitoMode();_executeUserCallback();
return}try{window.openDatabase(null,null,null,null);window.localStorage.setItem("test",1)}catch(e){this.BrowsingModeDetector.setBrowsingInIncognitoMode();_executeUserCallback();return}try{if(!localStorage.length){localStorage.i=1;localStorage.removeItem("i")}this.BrowsingModeDetector.setBrowsingInNormalMode()}catch(e){if(navigator.cookieEnabled)this.BrowsingModeDetector.setBrowsingInIncognitoMode();else this.BrowsingModeDetector.setBrowsingInNormalMode()}_executeUserCallback();return};return this};
var IE10EdgeBrowser=function(BrowsingModeDetector){this.BrowsingModeDetector=BrowsingModeDetector;this.detectBrowsingMode=function(_executeUserCallback){if(window.indexedDB)this.BrowsingModeDetector.setBrowsingInNormalMode();else this.BrowsingModeDetector.setBrowsingInIncognitoMode();_executeUserCallback()};return this};var OtherBrowser=function(BrowsingModeDetector){this.BrowsingModeDetector=BrowsingModeDetector;this.detectBrowsingMode=function(_executeUserCallback){this.BrowsingModeDetector.setBrowsingInNormalMode();
_executeUserCallback()};return this};DANZZ.setBrowsingMode=function(){try{dS=dS||{};dS.bMD=dS.bMD||{};var myCallback=function(browsingInIncognitoMode,BrowsingModeDetectorInstance){dS.bMD.iP=browsingInIncognitoMode;dS.bMD.iB=BrowsingModeDetectorInstance.isBotBrowsing();dS.bMD.bM=BrowsingModeDetectorInstance.getBrowsingMode()};var BrowsingModeDetector=new DANZZ.BrowsingModeDetector;BrowsingModeDetector.do(myCallback)}catch(err){DANZZ.loggr("TMS ERROR sBM: "+err.message,0)}};Bootstrapper.bindDependencyImmediate(function(){DANZZ.setBrowsingMode()},
120677107,[120677102],120677207,[120677202])},3715332,[3738607],590037,[430195],24);
Bootstrapper.bindDependencyImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;Bootstrapper.bindImmediate(function(){dS.cfg.technology="nuxt";dS.cfg.event.parseInterval=1E3;dS.cfg.event.pageReadyListener=true;dS.cfg.gallery.overlay=true;if(window.location.host.search("abo")>-1||window.location.host.search("login")>-1)dS.cfg.amc.target.enabled=true;else dS.cfg.amc.target.enabled=dS.cfg.amc.target.enabled||false;dS.cfg.videoPlayer="JW Player";
dS.cfg.cb.enabled=true;dS.cfg.cb.domain="nzz.ch";dS.cfg.cb.pingerurl="https://static.chartbeat.com/js/chartbeat.js";if(window.location.host.indexOf("piano-test")>-1)dS.cfg.c1.enabled=false;else dS.cfg.c1.enabled=true;dS.cfg.c1.serviceID="nzz";dS.cfg.c1.trackingURL="//track.nzz.ch/cre-1.0/tracking/tracking.js";dS.cfg.c1.site="nzz.ch";dS.cfg.c1.templateClient=false;dS.cfg.c1.templateClientURL="//track.nzz.ch/cre-1.0/api/tracking/service/nzz/templateclient.js";dS.cfg.adnz.dmp.loadScript=window.location.host.search("abo")>
-1||window.location.host.search("login")>-1?false:true;if(window.location.host.search("abo")>-1||window.location.host.search("login")>-1)dS.cfg.hj.enabled=true;else dS.cfg.hj.enabled=dS.cfg.hj.enabled||false;dS.cfg.pl.enabled=true;dS.cfg.pl.cntDomain="pl01";dS.cfg.pl.cntMark="vzm.3805";dS.cfg.mp.enabled=true;dS.cfg.mp.publisherID="25855845";dS.cfg.mp.brand="NZZ";dS.cfg.mp.site="www.nzz.ch"},120677101,120677201)},3715564,[3715294],585658,[587003],24);
Bootstrapper.bindDependencyDOMParsed(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;window.DANZZ=window.DANZZ||{};window.dS=window.dS||{};dS.visibility=dS.visibility||{};dS.visibility.currentState=dS.visibility.currentState||document.visibilityState;dS.count=dS.count||{};dS.trigger=dS.trigger||{};dS.interval=dS.interval||{};DANZZ.addEvent=function(evnt,elem,func){if(elem.addEventListener)elem.addEventListener(evnt,func,false);else if(elem.attachEvent)elem.attachEvent("on"+
evnt,func);else elem[evnt]=func};DANZZ.addEventListeners=function(){try{DANZZ.addEvent("visibilitychange",document,function(){if(DANZZ.checkDebugLevel(5))DANZZ.loggr("document.visibilityState: "+document.visibilityState,5);if(document.visibilityState!==dS.visibility.currentState)DANZZ.pushViewportInfo("visibilitychange")});DANZZ.addEvent("focus",window,function(){DANZZ.updateEngagement("focus",false)});DANZZ.addEvent("blur",window,function(){DANZZ.updateEngagement("blur",false)});DANZZ.addEvent("scroll",
window,function(){DANZZ.pushViewportInfo("scroll")});DANZZ.addEvent("resize",window,function(){DANZZ.pushViewportInfo("resize")});DANZZ.addEvent("orientationchange",window,function(){DANZZ.pushViewportInfo("orientationchange")});DANZZ.addEvent("beforeunload",window,function(){DANZZ.pushViewportInfo("beforeunload")})}catch(err){DANZZ.loggr("TMS ERROR aE: "+err.message,0)}};Bootstrapper.bindDependencyImmediate(function(){dS.trigger.eventListenerAdded=false;dS.count.eventListenerLoops=1;function checkInitDSStatus(){if(dS.trigger.eventListenerAdded===
false)if(typeof dS.status!=="undefined"&&dS.status=="ready"){if(DANZZ.checkDebugLevel(1))DANZZ.loggr("adding event listeners started.",1);DANZZ.addEventListeners();dS.trigger.eventListenerAdded=true;if(DANZZ.checkDebugLevel(1))DANZZ.loggr("adding event listeners completed in "+dS.count.eventListenerLoops+" loops.",1)}else dS.count.eventListenerLoops++;else clearInterval(dS.interval.checkInitDSStatus)}dS.interval.checkInitDSStatus=window.setInterval(checkInitDSStatus,250)},120677104,[120677102],120677204,
[120677202])},3715331,[3738607],558265,[430195],24);Bootstrapper.bindDependencyImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;DANZZ.fnv=function(s){var h=2166136261;for(var i=0,l=s.length;i<l;i++){h^=s.charCodeAt(i);h+=(h<<1)+(h<<4)+(h<<7)+(h<<8)+(h<<24)}return h>>>0}},3715330,[3738607],452504,[430195],24);
Bootstrapper.bindDependencyImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;window.digitalData=window.digitalData||{};window.DANZZ=window.DANZZ||{};window.dS=window.dS||{};dS.ingress=dS.ingress||{};dS.timestamp=dS.timestamp||{};dS.timestamp.initDate=new Date;dS.timestamp.initNow=typeof window.performance!=="undefined"&&typeof window.performance.now=="function"?performance.now():1E3;dS.debug=dS.debug||{};dS.debug.console=dS.debug.console||
{};dS.debug.console.danzz=dS.debug.console.danzz||{};dS.debug.level=dS.debug.level||0;dS.debug.dataLayerObservation=dS.debug.dataLayerObservation||false;DANZZ.getCurrentDate=function(){try{return new Date(dS.timestamp.initDate-dS.timestamp.initNow+(typeof window.performance!=="undefined"&&typeof window.performance.now=="function"?performance.now():Date.now()-dS.timestamp.initDate))}catch(err){DANZZ.loggr("TMS ERROR gCD: "+err.message,0);return new Date}};DANZZ.initdS=function(){try{dS.cache={};dS.visibility=
{};dS.visibility.viewport=[];dS.visibility.currentViewport={};dS.visibility.currentViewport.scrollPercentageVertical=0;dS.visibility.currentState=dS.visibility.currentState||document.visibilityState;dS.visibility.lastState="";dS.visibility.changeCount=0;dS.visibility.visibleTime=0;dS.visibility.hiddenTime=0;dS.visibility.updateTS=DANZZ.getCurrentDate();dS.visibility.appLifecycleIsBackground=false;dS.interval=dS.interval||{};dS.trigger=dS.trigger||{};dS.trigger.vIDa=false;dS.trigger.vID=false;dS.trigger.vIDc=
true;dS.trigger.pageReadyListener=dS.trigger.pageReadyListener||false;dS.trigger.pageReadyConsecutive=dS.trigger.pageReadyConsecutive||false;dS.ingress.initTS=DANZZ.getCurrentDate();dS.ingress.stats={};dS.ingress.stats.trigger={};dS.ingress.stats.session=dS.ingress.stats.session||{};dS.ingress.stats.session.sessionNumberTotal=dS.ingress.stats.session.sessionNumberTotal||DANZZ.getSessionNumber();dS.ingress.stats.instance=dS.ingress.stats.instance||{};dS.ingress.stats.instance.instanceNumberSession=
dS.ingress.stats.instance.instanceNumberSession||0;dS.ingress.stats.instance.instanceNumberTotal=dS.ingress.stats.instance.instanceNumberTotal||0;dS.ingress.stats.instance.consecutive=dS.ingress.stats.instance.consecutive||false;dS.ingress.session=dS.ingress.session||{};dS.ingress.session.sessionCount=dS.ingress.session.sessionCount||0;dS.ingress.session.array=dS.ingress.session.array||[];dS.ingress.publishPath=dS.ingress.publishPath||Bootstrapper.ensightenOptions.publishPath+(window.location.host.search("abo")==
0?"abo":"");dS.ingress.error={};dS.ingress.referral=dS.ingress.referral||{};dS.ingress.referral.trackingCode=DANZZ.getURLParam("trco","param")||DANZZ.getURLParam("KAVZ","param");dS.ingress.referral.mostRecentTrackingCode=DANZZ.getMostRecentTrackingCode();dS.ingress.referral.marketingChannelID=DANZZ.getURLParam("mktcid","param");dS.ingress.referral.marketingChannelValue=DANZZ.getURLParam("mktcval","param");dS.ingress.referral.mostRecentMarketingChannelID=DANZZ.getMostRecentMarketingChannelID();dS.ingress.referral.mostRecentMarketingChannelValue=
DANZZ.getMostRecentMarketingChannelValue();dS.ingress.referral.internalPromotionClickthrough=DANZZ.getURLParam("intpro","param");dS.ingress.referral.mostRecentInternalPromotionClickthrough=DANZZ.getMostRecentInternalPromotionClickthrough();dS.ingress.page={};dS.ingress.page.registrationPrompt=false;dS.ingress.page.registrationSuccess=false;dS.ingress.page.articleComplete=false;dS.ingress.page.bookmarkAdds=0;dS.ingress.page.bookmarkRemoves=0;dS.ingress.page.socialShares=0;dS.ingress.page.storytellingInteractions=
0;dS.ingress.page.audioListens=0;dS.ingress.page.videoViews=0;dS.ingress.page.imageGalleryViews=0;dS.ingress.page.imageViews=0;dS.ingress.page.orderPrompt=false;dS.ingress.page.orderSuccess=false;dS.ingress.page.crossSellSuccess=false;dS.ingress.device=dS.ingress.device||{};dS.ingress.device.preferredColorScheme=DANZZ.getPreferredColorScheme();dS.cache.engagement={};dS.cache.engagement.lastLog={logID:1,logTimeStamp:dS.ingress.initTS,eventName:"initPageView",eventNonInteractive:false,visibilityState:dS.visibility.currentState,
lastLogID:null,lastEventName:null,timeSinceLastEvent:0,lastInteractiveLogID:null,lastInteractiveEventName:null,timeSinceLastInteractiveEvent:0};dS.cache.engagement.lastInteractive=JSON.parse(JSON.stringify(dS.cache.engagement.lastLog));dS.engagement={};dS.engagement.log=[];dS.engagement.log.push(JSON.parse(JSON.stringify(dS.cache.engagement.lastLog)));dS.p4m=dS.p4m||{};dS.aa=dS.aa||{};dS.aa.event={};dS.aa.trackCallbackRegistered=dS.aa.trackCallbackRegistered||false;dS.aa.preTrack=false;dS.aa.postTrack=
false;dS.aa.firstRequest=true;dS.aa.checkout_event=false;dS.ga=dS.ga||{};dS.currentCustomLinkLength=0;dS.count=dS.count||{};dS.count.error=0;dS.event={};dS.event.pusher={};dS.event.pusher.deduplicate=[];dS.event.handler=dS.event.handler||{};dS.event.handler.running=dS.event.handler.running||false;dS.event.ingressedCount=0;dS.event.processedCount=0;dS.status="ready";DANZZ.loggr("initdS completed.",1)}catch(err){DANZZ.loggr("TMS ERROR iDS: "+err.message,0)}};DANZZ.getDiffToInitTS=function(calcTS,checkDeviation,
initTS){try{checkDeviation=typeof checkDeviation!="undefined"?checkDeviation:false;calcTS=new Date(calcTS)!="Invalid Date"&&(!checkDeviation||Math.abs(DANZZ.getCurrentDate()-new Date(calcTS))<dS.cfg.event.parseInterval*1.5)?new Date(calcTS):DANZZ.getCurrentDate();initTS=typeof initTS!="undefined"&&new Date(initTS)!="Invalid Date"?new Date(initTS):dS.ingress.initTS;return calcTS.getTime()-initTS.getTime()}catch(err){DANZZ.loggr("TMS ERROR iDS: "+err.message,0)}};DANZZ.getNested=function(obj,path,func){try{if(typeof obj!=
"object")return"";var result;var available=true;var nested=[];if(path.length>0)nested=path.split("[").join(".").split("]").join("").split(".");for(var i=0;i<nested.length;i++){if(!obj||!obj.hasOwnProperty(nested[i])){available=false;DANZZ.loggr("getNested for path '"+path+"' is undefined.",7);break}obj=obj[nested[i]]}switch(func){case "value":result=available?obj:"";break;case "typeof":result=available?typeof obj:"undefined";break;case "length":if(available&&obj===null)result=0;else if(typeof obj==
"object")result=available?window.Object.keys(obj).length:0;else result=available&&typeof obj!=="undefined"?obj.toString().length:0;break;default:result="undefined"}DANZZ.loggr("getNested result for path '"+path+"': "+result,7);return result}catch(err){DANZZ.loggr("TMS ERROR gN: "+err.message+" (path: "+path+" / func: "+func+")",0)}};DANZZ.hasComponent=function(field,value){try{if(DANZZ.getNested(digitalData,"component","length")>0)for(var i=0;i<digitalData.component.length;i++)if(DANZZ.getNested(digitalData,
"component["+i+"]."+field,"value")===value)return true;return false}catch(err){DANZZ.loggr("TMS ERROR hC: "+err.message,0)}};DANZZ.getComponent=function(field,value){try{if(DANZZ.getNested(digitalData,"component","length")>0)for(var i=0;i<digitalData.component.length;i++)if(DANZZ.getNested(digitalData,"component["+i+"]."+field,"value")===value)return i;return false}catch(err){DANZZ.loggr("TMS ERROR gC: "+err.message,0)}};DANZZ.hasMainComponent=function(){try{if(DANZZ.hasComponent("category.componentType",
"article")||DANZZ.hasComponent("category.componentType","image gallery"))return true;else return false}catch(err){DANZZ.loggr("TMS ERROR gMC: "+err.message,0)}};DANZZ.hasEvent=function(field,value){try{if(DANZZ.getNested(digitalData,"event","length")>0)for(var i=0;i<digitalData.event.length;i++)if(DANZZ.getNested(digitalData,"event["+i+"]."+field,"value")===value)return true;return false}catch(err){DANZZ.loggr("TMS ERROR hE: "+err.message,0)}};DANZZ.getIngressInstance=function(forceNew){try{forceNew=
typeof forceNew!=="undefined"?forceNew:false;var currentDate=DANZZ.getCurrentDate();var instance;if(!dS.ingress.instance){var cryptoString="";var cryptoArray=[];try{if(typeof window.crypto!=="undefined"&&typeof window.crypto.getRandomValues=="function"){cryptoArray=window.crypto.getRandomValues(new Uint32Array(4));if(DANZZ.getNested(cryptoArray,"join","typeof")=="function"&&cryptoArray.length>0)cryptoString=cryptoArray.join("-");else if(typeof cryptoArray!=="undefined"&&cryptoArray.length>0)for(i=
0;i<cryptoArray.length;i++)cryptoString=cryptoString+cryptoArray[i]+(cryptoArray.length-i==1?"":"-")}}catch(err){DANZZ.loggr("TMS ERROR gIIa (userAgent: "+navigator.userAgent+"): "+err.message,0)}if(cryptoString.length===0)try{cryptoString=Math.floor(Math.random()*1E7)+"-"+DANZZ.fnv(navigator.userAgent)+"-"+DANZZ.fnv(window.location.href)}catch(err){var randomItems=["S","h","o","e","s","t","a","r",1977];var cryptoItem=[];for(i=0;i<4;i++)cryptoItem[i]=randomItems[Math.floor(Math.random()*randomItems.length)];
cryptoString=Math.floor(Math.random()*1E7)+"-"+cryptoItem[0]+"-"+cryptoItem[1]+"-"+cryptoItem[2]+"-"+cryptoItem[3];DANZZ.loggr("TMS ERROR gIIb (userAgent: "+navigator.userAgent+" / cryptoString: "+cryptoString+"): "+err.message,0)}instance=currentDate.getTime()+"_"+cryptoString;DANZZ.increaseInstanceNumber()}else if(forceNew){instance=currentDate.getTime()+dS.ingress.instance.substr(dS.ingress.instance.search("_"));DANZZ.increaseInstanceNumber()}else instance=dS.ingress.instance;return instance}catch(err){DANZZ.loggr("TMS ERROR gII: "+
err.message,0)}};DANZZ.setPerformanceMark=function(name){if(typeof window.performance!=="undefined"&&typeof window.performance.getEntriesByName=="function"&&window.performance.getEntriesByName(name).length==0)window.performance.mark(name)};DANZZ.getPerformance=function(){try{var performance={};if(typeof window.performance!=="undefined"&&typeof window.performance.getEntriesByName=="function"){var performanceMarkArray=window.performance.getEntriesByType("mark");if(typeof window.performance.getEntriesByName==
"function"&&window.performance.getEntriesByName("first-contentful-paint").length>0)performanceMarkArray.push(window.performance.getEntriesByName("first-contentful-paint")[0]);var performanceMarkPrefix="";if(performanceMarkArray.length>0){performance.mark=JSON.parse(JSON.stringify(performanceMarkArray));for(i=0;i<performanceMarkArray.length;i++)if(performanceMarkArray[i].name.split(".")[2]=="start"){performanceMarkPrefix=performanceMarkArray[i].name.split(".")[0]+"."+performanceMarkArray[i].name.split(".")[1];
if(window.performance.getEntriesByName(performanceMarkPrefix+".complete").length<1&&window.performance.getEntriesByName(performanceMarkPrefix+".start").length>0&&window.performance.getEntriesByName(performanceMarkPrefix+".done").length)window.performance.measure(performanceMarkPrefix+".complete",performanceMarkPrefix+".start",performanceMarkPrefix+".done");if(window.performance.getEntriesByName(performanceMarkPrefix+".load").length<1&&window.performance.getEntriesByName(performanceMarkPrefix+".start").length>
0&&window.performance.getEntriesByName(performanceMarkPrefix+".init").length)window.performance.measure(performanceMarkPrefix+".load",performanceMarkPrefix+".start",performanceMarkPrefix+".init");performanceMarkPrefix=""}}if(window.performance.getEntriesByType("measure").length>0)performance.measure=JSON.parse(JSON.stringify(window.performance.getEntriesByType("measure")))}return performance}catch(err){DANZZ.loggr("TMS ERROR gP: "+err.message,0)}};DANZZ.increaseInstanceNumber=function(){try{var instanceNumberSession=
0;var instanceNumberTotal=0;var currentDate=DANZZ.getCurrentDate();var cookieExpDate=DANZZ.getCurrentDate();cookieExpDate.setDate(currentDate.getDate()+3650);if(Bootstrapper.Cookies.test("p4m_inos")){instanceNumberSession=Number(Bootstrapper.Cookies.get("p4m_inos"));instanceNumberSession++}else instanceNumberSession=1;Bootstrapper.Cookies.set("p4m_inos",instanceNumberSession,cookieExpDate);dS.ingress.stats.instance.instanceNumberSession=instanceNumberSession;if(Bootstrapper.Cookies.test("p4m_inot")){instanceNumberTotal=
Number(Bootstrapper.Cookies.get("p4m_inot"));instanceNumberTotal++}else instanceNumberTotal=1;Bootstrapper.Cookies.set("p4m_inot",instanceNumberTotal,cookieExpDate);dS.ingress.stats.instance.instanceNumberTotal=instanceNumberTotal}catch(err){DANZZ.loggr("TMS ERROR iIN: "+err.message,0)}};DANZZ.getSessionNumber=function(){try{var sessionNumberTotal=0;if(Bootstrapper.Cookies.test("p4m_snot"))sessionNumberTotal=Number(Bootstrapper.Cookies.get("p4m_snot"));else sessionNumberTotal=0;return sessionNumberTotal}catch(err){DANZZ.loggr("TMS ERROR gSN: "+
err.message,0)}};DANZZ.increaseSessionNumber=function(){try{var sessionNumberTotal=0;var currentDate=DANZZ.getCurrentDate();var cookieExpDate=DANZZ.getCurrentDate();cookieExpDate.setDate(currentDate.getDate()+3650);if(Bootstrapper.Cookies.test("p4m_snot")){sessionNumberTotal=Number(Bootstrapper.Cookies.get("p4m_snot"));sessionNumberTotal++}else sessionNumberTotal=1;Bootstrapper.Cookies.set("p4m_snot",sessionNumberTotal,cookieExpDate.toUTCString());dS.ingress.stats.session.sessionNumberTotal=sessionNumberTotal}catch(err){DANZZ.loggr("TMS ERROR iSN: "+
err.message,0)}};DANZZ.getSessionID=function(forceNew){try{forceNew=typeof forceNew!=="undefined"?forceNew:false;var sessionID;var currentDate=DANZZ.getCurrentDate();var sessionTimeout=30;var cookieExpDate=DANZZ.getCurrentDate();cookieExpDate.setTime(currentDate.getTime()+sessionTimeout*60*1E3);var sessionArrayLength=Object.keys(dS.ingress.session.array).length;if(Bootstrapper.Cookies.test("p4m_sid")&&forceNew===false){var cookieSessionTimeout=new Date(Bootstrapper.Cookies.get("p4m_sid").split(";")[1]);
if(cookieSessionTimeout.toUTCString()<currentDate.toUTCString()){DANZZ.loggr("Session cookie exists but sessionTimeout is achieved: forceNew \x3d true",5);forceNew=true}else{sessionID=Bootstrapper.Cookies.get("p4m_sid").split(";")[0];DANZZ.loggr("Get sessionID ("+sessionID+" ) from cookie",5)}}else{DANZZ.loggr("Session cookie does not exist and forceNew is: "+forceNew,5);forceNew=true}if(forceNew===true){if(typeof dS.p4m.currentSessionID!=="undefined"){sessionID=dS.p4m.currentSessionID+"+";DANZZ.loggr("Session ID ("+
sessionID+") generated from dS.p4m.currentSessionID",5)}else{sessionID=DANZZ.getIngressInstance();DANZZ.loggr("new Session ID ("+sessionID+") generated from ingress.instance",5)}DANZZ.increaseSessionNumber();Bootstrapper.Cookies.set("p4m_inos",1,currentDate.getDate()+3650);dS.ingress.stats.instance.instanceNumberSession=1}Bootstrapper.Cookies.set("p4m_sid",sessionID+";"+cookieExpDate,cookieExpDate.toUTCString());dS.p4m.currentSessionID=sessionID;if(sessionArrayLength!==0&&dS.ingress.session.array[sessionArrayLength-
1].sessionID==dS.p4m.currentSessionID)dS.ingress.session.array[sessionArrayLength-1].updateTS=currentDate;else{var newSession={};newSession.sessionID=sessionID;newSession.initTS=currentDate;newSession.updateTS=currentDate;dS.ingress.session.array.push(newSession);dS.ingress.session.sessionCount=dS.ingress.session.array.length}return sessionID}catch(err){DANZZ.loggr("TMS ERROR gSID: "+err.message,0)}};DANZZ.getUserGroup=function(){try{var c1Status="anonymous";var c1SubscriptionStatus=DANZZ.getNested(digitalData,
"user[0].profile[0].attributes.c1.subscriptionStatusStore","value");var c1ProfileID=DANZZ.getNested(digitalData,"user[0].profile[0].profileInfo.profileID","value");if((c1SubscriptionStatus===true||c1SubscriptionStatus==="true")&&(DANZZ.getNested(digitalData,"user[0].profile[0].attributes.c1.subscriptionStatus","value")===true||DANZZ.getNested(digitalData,"user[0].profile[0].attributes.c1.subscriptionStatus","value")=="true"))c1Status="subscriber";else if(c1ProfileID!==null&&c1ProfileID!=="")c1Status=
"registered";return c1Status}catch(err){DANZZ.loggr("TMS ERROR gUG: "+err.message,0)}};DANZZ.getUniqueEventID=function(array,uniqueTimeout,eventID){try{if(typeof array!=="object")array=[array];var uniqueEventID=DANZZ.fnv(array.join(";"));var cookieName="ens_ueid_"+uniqueEventID+(typeof eventID!=="undefined"?"_"+eventID:"");DANZZ.loggr("Unique Event ID - Cookie Name: "+cookieName,4);if(typeof uniqueTimeout!=="undefined"){var currentDate=DANZZ.getCurrentDate();var currentTimestamp=(new Date(currentDate)).getTime();
if(Bootstrapper.Cookies.test(cookieName)&&Bootstrapper.Cookies.get(cookieName)>=currentTimestamp)return DANZZ.fnv(array.join(";")+Bootstrapper.Cookies.get(cookieName));else{var cookieExpDate=currentDate;cookieExpDate.setTime(currentDate.getTime()+uniqueTimeout*60*1E3);Bootstrapper.Cookies.set(cookieName,(new Date(cookieExpDate)).getTime(),cookieExpDate);return DANZZ.fnv(array.join(";")+Bootstrapper.Cookies.get(cookieName))}}else return uniqueEventID}catch(err){DANZZ.loggr("TMS ERROR gUEID: "+err.message,
0)}};DANZZ.proLitterisTracking=function(){try{if(dS.cfg.pl.enabled){DANZZ.loggr("ProLitteris Page View",3);if(DANZZ.hasComponent("category.componentType","article")){var articleId=DANZZ.getNested(digitalData,"component["+DANZZ.getComponent("category.componentType","article")+"].componentInfo.componentID","value");Bootstrapper.imageRequest("https://"+dS.cfg.pl.cntDomain+".owen.prolitteris.ch/na/"+dS.cfg.pl.cntMark+"-"+articleId)}}}catch(err){DANZZ.loggr("TMS ERROR pPV: "+err.message,0)}};DANZZ.mediaPulsTracking=
function(){try{if(dS.cfg.mp.enabled==true&&dS.cfg.mp.consent==true){var platform="ns_site";var mpData={};mpData.c1="2";mpData.c2=dS.cfg.mp.publisherID;mpData.mp_brand=dS.cfg.mp.brand;mpData[platform]=dS.cfg.mp.site;if(DANZZ.getNested(dS,"ingress.app.version","value"))mpData.mp_v=dS.ingress.app.version;mpData.cs_fpid=DANZZ.getNested(digitalData,"user[0].profile[0].attributes.c1.trackingID","value");mpData.mp_login=3;if(DANZZ.getNested(digitalData,"user[0].profile[0].profileInfo.profileID","length")>
0){mpData.mp_fpid=DANZZ.getNested(digitalData,"user[0].profile[0].profileInfo.profileID","value");mpData.mp_login=1}if(typeof COMSCORE!="undefined")COMSCORE.beacon(mpData)}}catch(err){DANZZ.loggr("TMS ERROR mPT: "+err.message,0)}};DANZZ.chartBeatVirtualPage=function(url,title,sections,authors,type){try{if(typeof _sf_async_config!=="undefined"&&typeof pSUPERFLY!=="undefined"){DANZZ.loggr("Start of chartBeatVirtualPage event (url: "+url+" / title: "+title+" / sections: "+sections+" / authors: "+authors+
" / type: "+type+")",3);if(sections!=="undefined")_sf_async_config.sections=sections;if(authors!=="undefined")_sf_async_config.authors=authors;if(type!=="undefined")_sf_async_config.type=type;DANZZ.chartBeatSubscriberEngagement();pSUPERFLY.virtualPage(url,title)}}catch(err){DANZZ.loggr("TMS ERROR cBVP: "+err.message,0)}};DANZZ.chartBeatSubscriberEngagement=function(){try{var _cbq=window._cbq=window._cbq||[];switch(DANZZ.getUserGroup()){case "subscriber":window._cbq.push(["_acct","paid"]);break;case "registered":window._cbq.push(["_acct",
"lgdin"]);break;default:window._cbq.push(["_acct","anon"])}}catch(err){DANZZ.loggr("TMS ERROR cBSE: "+err.message,0)}};DANZZ.pianoAnalyticsTracking=function(){try{window.pa.sendEvent("page.display",{page:DANZZ.getNested(digitalData,"page.pageInfo.pageName","value"),page:DANZZ.getNested(digitalData,"page.pageInfo.pageName","value"),page_chapter1:DANZZ.getNested(digitalData,"page.category.primaryCategory","value"),page_chapter2:DANZZ.getNested(digitalData,"page.category.subCategory1","value"),page_chapter3:DANZZ.getNested(digitalData,
"page.category.subCategory2","value"),page_type:DANZZ.getNested(digitalData,"page.category.pageType","value")})}catch(err){DANZZ.loggr("TMS ERROR pAT: "+err.message,0)}};DANZZ.registerAdobeAnalyticsTrackCallbacks=function(trigger){try{if(!dS.aa.trackCallbackRegistered&&typeof dS.interval.registerAATrackCallbacks=="undefined")dS.interval.registerAATrackCallbacks=setInterval(function(){if(!dS.aa.trackCallbackRegistered){if(typeof window.s!=="undefined"&&typeof window.s.registerPreTrackCallback==="function"&&
typeof window.s.registerPostTrackCallback==="function"){window.s.registerPreTrackCallback(function(){dS.aa.preTrack=true;DANZZ.loggr("preTrackRegistered",3)});window.s.registerPostTrackCallback(function(){dS.aa.postTrack=true;DANZZ.setPerformanceMark("danzz.aa.done");DANZZ.loggr("postTrackRegistered",3)});dS.aa.trackCallbackRegistered=true;DANZZ.loggr("Adobe Analytics Track Callbacks registered by '"+trigger+"' trigger",3)}}else clearInterval(dS.interval.registerAATrackCallbacks)},25)}catch(err){DANZZ.loggr("TMS ERROR rAATC: "+
err.message,0)}};DANZZ.adobeAnalyticsPageView=function(){try{if(dS.cfg.amc.analytics.consent===true&&/applebot|phantomjs|bot|spider|crawl|apis-google|adsbot|googlebot|mediapartners|google favicon|feedfetcher|google-read-aloud|duplexweb-google|googleweblight|bing|yandex|baidu|duckduck|yahoo|ecosia|ia_archiver|facebook|instagram|pinterest|reddit|slack|twitter|whatsapp|youtube|semrush/i.test(navigator.userAgent)==false){DANZZ.loggr("Run DANZZ.eventTrigger('adobeAnalyticsPageView')",3);DANZZ.eventTrigger("adobeAnalyticsPageView");
if(typeof s!=="undefined"&&s.isReadyToTrack()){DANZZ.loggr("Call s.t()",5);Bootstrapper.bindPageSpecificCompletion(function(){setTimeout(function(){Bootstrapper.AF.push(["call","s","exec"])},250)})}else{DANZZ.loggr("Delay s.t() for 50ms",5);window.setTimeout(DANZZ.adobeAnalyticsPageView,50)}}}catch(err){DANZZ.loggr("TMS ERROR aAPV: "+err.message,0)}};DANZZ.adobeAnalyticsTracking=function(){try{if(typeof s!=="undefined"&&typeof dS!=="undefined"&&typeof dS.aa!=="undefined"&&typeof dS.aa.event==="object"&&
Object.keys(dS.aa.event).length>0&&/applebot|phantomjs|bot|spider|crawl|apis-google|adsbot|googlebot|mediapartners|google favicon|feedfetcher|google-read-aloud|duplexweb-google|googleweblight|bing|yandex|baidu|duckduck|yahoo|ecosia|ia_archiver|facebook|instagram|pinterest|reddit|slack|twitter|whatsapp|youtube|semrush/i.test(navigator.userAgent)==false){DANZZ.loggr("Start of adobeAnalyticsTracking event (typeof s: "+typeof s+" / event.length: "+Object.keys(dS.aa.event).length+")",3);var iC;var iE;
var firstEvent;if(dS.aa.checkout_event===true&&typeof s.events!=="undefined"&&s.events.search("event811")>=0){DANZZ.loggr("Remove event811: Product View from s.events",2);s.events.replace(",event811","").replace("event811","")}for(iC in dS.aa.event){DANZZ.loggr("Start of Component loop (eventComponentID: "+iC+" / dS.aa.event["+iC+"].length: "+dS.aa.event[iC].length+")",4);var componentEvent={};firstEvent=true;for(var i in dS.aa.event[iC]){DANZZ.loggr("Start of Event loop (dS.aa.event["+iC+"]["+i+
"].singleEvent: "+dS.aa.event[iC][i].singleEvent+" / firstEvent: "+firstEvent+" / dS.aa.firstRequest: "+dS.aa.firstRequest+" / dS.aa.postTrack: "+dS.aa.postTrack+")",4);if(dS.aa.event[iC][i].singleEvent===true&&firstEvent===true&&(dS.aa.firstRequest||dS.aa.postTrack)||dS.aa.event[iC][i].singleEvent===false){for(iE in dS.aa.event[iC][i].data){DANZZ.loggr("Switch for adobeAnalyticsTracking event (eventKey: "+iE+" / eventValues: "+dS.aa.event[iC][i].data[iE]+")",3);if(dS.aa.event[iC][i].data.hasOwnProperty(iE)){componentEvent[iE]=
s.apl(componentEvent[iE],typeof dS.aa.event[iC][i].data[iE]==="object"?dS.aa.event[iC][i].data[iE].join(","):dS.aa.event[iC][i].data[iE].toString(),",",2);delete dS.aa.event[iC][i].data[iE]}}if(Object.keys(dS.aa.event[iC][i].data).length===0)delete dS.aa.event[iC][i]}DANZZ.loggr("set firstEvent \x3d false",4);firstEvent=false}if(Object.keys(dS.aa.event[iC]).length===0){DANZZ.loggr("Delete component: "+iC,3);delete dS.aa.event[iC]}else DANZZ.loggr("component "+iC+" still has "+Object.keys(dS.aa.event[iC]).length+
" event(s)",3);DANZZ.loggr("dS.aa.preTrack: "+dS.aa.preTrack+" / dS.aa.firstRequest: "+dS.aa.firstRequest);if(!dS.aa.preTrack&&dS.aa.firstRequest){DANZZ.loggr("Start adding componentEvent to s Object with "+Object.keys(componentEvent).length+" value(s)",3);for(iE in componentEvent){DANZZ.loggr("Add '"+iE+"' with value '"+componentEvent[iE]+"' to s Object",5);s[iE]=s.apl(s[iE],componentEvent[iE],",",2)}dS.aa.firstRequest=false}else if(Object.keys(componentEvent).length>0){DANZZ.loggr("Start for adobeAnalyticsTracking customLink "+
(dS.currentCustomLinkLength+1),3);var variableOverrides={};var sBackup={};sBackup.linkTrackVars=s.linkTrackVars;sBackup.linkTrackEvents=s.linkTrackEvents;for(iE in componentEvent){DANZZ.loggr("Process componentEvent["+iE+"] (typeof: "+typeof componentEvent[iE]+" / length: "+Object.keys(componentEvent[iE]).length+"): "+componentEvent[iE],5);if(iE=="events"&&componentEvent[iE].length>0){s.linkTrackVars=s.apl(s.linkTrackVars,"events",",",2);if(s.linkTrackEvents=="None"){DANZZ.loggr("Remove None from s.linkTrackEvents",
5);s.linkTrackEvents=""}s.linkTrackEvents=s.apl(s.linkTrackEvents,componentEvent[iE].replace(new RegExp(":(.*?)(,|$)","g"),",").replace(new RegExp("\x3d(.*?)(,|$)","g"),",").replace(new RegExp("(,$)","g"),""),",",2)}else s.linkTrackVars=s.apl(s.linkTrackVars,iE,",",2);variableOverrides[iE]=s.apl(variableOverrides[iE],componentEvent[iE],",",2)}var postPageEventNumber=++dS.currentCustomLinkLength;s.linkTrackVars=s.apl(s.linkTrackVars,"eVar198",",",2);variableOverrides.eVar198=s.apl(variableOverrides.eVar198,
(DANZZ.getNested(dS,"ingress.stats.instance.consecutive","value")?"consecutive:":"initial:")+postPageEventNumber,",",2);DANZZ.loggr("s.linkTrackVars: "+s.linkTrackVars+" / s.linkTrackEvents: "+s.linkTrackEvents,4);DANZZ.loggr("variableOverrides: "+JSON.stringify(variableOverrides,null,4),4);s.tl(true,"o","Post Page Event "+postPageEventNumber,variableOverrides);s.linkTrackVars=sBackup.linkTrackVars;s.linkTrackEvents=sBackup.linkTrackEvents}}}}catch(err){DANZZ.loggr("TMS ERROR aAT: "+err.message,0);
if(dS.count.error>dS.cfg.error.limit)dS.aa.event={}}};DANZZ.setHJTags=function(){try{window.hj=window.hj||function(){(hj.q=hj.q||[]).push(arguments)};var articleTemplate=DANZZ.getNested(digitalData,"page.category.pageType","value");if(articleTemplate=="regular"||articleTemplate=="magazine"||articleTemplate=="reportage"||articleTemplate=="briefing"&&!DANZZ.getURLParam("reduced","param")){switch(articleTemplate){case "regular":hj("event","Article Template Regular");break;case "magazine":hj("event",
"Article Template Magazin");break;case "reportage":hj("event","Article Template Reportage");break;case "briefing":hj("event","Page Type Briefing");break}if(DANZZ.getNested(digitalData,"page.pageInfo.referringElement","length")!=0){var referringElementItems=DANZZ.getNested(digitalData,"page.pageInfo.referringElement","value").split(";");referringElementItems[3]=referringElementItems[3].replace(" ","-").toLowerCase();hj("event",referringElementItems[3])}}if(DANZZ.getNested(digitalData,"user[0].profile[0].profileInfo.profileID",
"value"))hj("event","Logged in Users");else hj("event","Logged out Users");if(DANZZ.getNested(digitalData,"user[0].profile[0].attributes.c1.subscriptionStatus","value")==true||DANZZ.getNested(digitalData,"user[0].profile[0].attributes.c1.subscriptionStatus","value")=="true")hj("event","User is Subscriber");else hj("event","User is Non-Subscriber");if(DANZZ.getNested(digitalData,"user[0].profile[0].profileInfo.gender","length")>0)hj("event",DANZZ.getNested(digitalData,"user[0].profile[0].profileInfo.gender",
"value"));if(DANZZ.getNested(digitalData,"component[0].attributes.flag","value")==="Podcast")hj("event","podcast_article");if(NodeList.prototype.forEach)document.querySelectorAll("[data-frequency]").forEach(function(rButton){rButton.addEventListener("change",function(){hj("event","Aboshop Frequency Change")})});if(document.referrer)hj("event",document.referrer.match(/:\/\/(.[^/]+)/)[1])}catch(err){DANZZ.loggr("TMS ERROR sHJT: "+err.message,0)}};DANZZ.adobeTargetView=function(){try{var genericPageType=
DANZZ.getGenericPageType();adobe.target.triggerView("View: "+genericPageType);DANZZ.loggr("ATV: "+genericPageType,3)}catch(err){DANZZ.loggr("TMS ERROR aTV: "+err.message,0)}};DANZZ.sendIngressData=function(trigger){try{if(/applebot|phantomjs|bot|spider|crawl|apis-google|adsbot|googlebot|mediapartners|google favicon|feedfetcher|google-read-aloud|duplexweb-google|googleweblight|bing|yandex|baidu|duckduck|yahoo|ecosia|ia_archiver|facebook|instagram|pinterest|reddit|slack|twitter|whatsapp|youtube|semrush/i.test(navigator.userAgent)==
true)return;DANZZ.loggr("called sendIngressData("+trigger+")",5);var currentDate=DANZZ.getCurrentDate();dS.ingress.version="202204121330";dS.ingress.updateTS=currentDate;DANZZ.loggr("set trigger ("+trigger+")",5);dS.ingress.trigger=trigger||"undefined";DANZZ.loggr("set trigger stats ("+trigger+")",5);if(typeof dS.ingress.stats.trigger[dS.ingress.trigger]!=="undefined"){DANZZ.loggr("init trigger ("+trigger+")",5);dS.ingress.stats.trigger[dS.ingress.trigger].count+=1}else{DANZZ.loggr("add trigger count ("+
trigger+")",5);dS.ingress.stats.trigger[dS.ingress.trigger]={};dS.ingress.stats.trigger[dS.ingress.trigger].count=1}dS.ingress.timezoneOffset=dS.ingress.timezoneOffset||currentDate.getTimezoneOffset();if(!dS.ingress.instance){DANZZ.loggr("DANZZ.getIngressInstance()",5);dS.ingress.instance=DANZZ.getIngressInstance()}DANZZ.loggr("dS.ingress.instance: "+dS.ingress.instance,6);dS.ingress.session=dS.ingress.session||{};dS.ingress.session.initSessionID=dS.ingress.session.initSessionID||DANZZ.getSessionID();
DANZZ.loggr("dS.ingress.session.initSessionID : "+dS.ingress.session.initSessionID,6);dS.ingress.sequence=typeof dS.ingress.sequence!=="undefined"?dS.ingress.sequence+1:1;dS.ingress.clientIP=dS.ingress.clientIP||Bootstrapper._clientIP;dS.ingress.location=dS.ingress.location||{};dS.ingress.location.href=window.location.href;try{if(dS.cfg.technology!="webview")dS.ingress.referrer=window.document.referrer;else dS.ingress.referrer=DANZZ.getURLParam("referrerOrigin")}catch(err){dS.ingress.referrer="Referrer not available"}dS.ingress.navigator=
dS.ingress.navigator||{};dS.ingress.navigator.userAgent=window.navigator.userAgent;dS.ingress.navigator.platform=window.navigator.platform;dS.ingress.navigator.cookieEnabled=window.navigator.cookieEnabled;dS.ingress.navigator.doNotTrack=window.navigator.doNotTrack;dS.ingress.navigator.language=window.navigator.language;dS.ingress.navigator.languages=window.navigator.languages;if(typeof dS.ingress.navigator.isMobile!=="object"&&typeof isMobile=="object")dS.ingress.navigator.isMobile=window.isMobile.any?
window.isMobile:{any:false};dS.bMD=dS.bMD||{};dS.ingress.navigator.browsingMode=dS.bMD.bM||undefined;dS.ingress.navigator.isBot=dS.bMD.iB||undefined;dS.ingress.navigator.isPrivate=dS.bMD.iP||undefined;dS.ingress.page=dS.ingress.page||{};dS.ingress.page.mostRecentComponents=DANZZ.getMostRecentComponents();dS.ingress.profile=dS.ingress.profile||{};dS.ingress.profile.profileID=dS.ingress.profile.profileID||(dS.ingress.sequence<10?DANZZ.getProfileID():"");dS.ingress.profile.mostRecentProfileID=dS.ingress.profile.mostRecentProfileID||
(dS.ingress.sequence<10?DANZZ.getMostRecentProfileID():"");var ingressData={};ingressData.ingress=JSON.parse(JSON.stringify(dS.ingress));if(DANZZ.getNested(dS,"cache.viewport","typeof")!=="undefined"){dS.visibility.viewport.push(dS.cache.viewport);dS.visibility.lastActivityTS=dS.cache.viewport.timeStamp;DANZZ.loggr("pushViewportInfo added by '"+dS.ingress.trigger+"' from cache",6);delete dS.cache.viewport}ingressData.ingress.performance=DANZZ.getPerformance();ingressData.ingress.visibility=DANZZ.getVisibility();
ingressData.ingress.engagement=DANZZ.getEngagement();if(typeof digitalData!=="undefined"){var digitalDataCopy=JSON.parse(JSON.stringify(digitalData));if(DANZZ.getNested(digitalDataCopy,"user[0].profile[0].profileInfo.userName","typeof")!=="undefined")delete digitalDataCopy.user[0].profile[0].profileInfo.userName;if(DANZZ.getNested(digitalDataCopy,"page.pageInfo.referringElement","typeof")=="object")digitalDataCopy.page.pageInfo.referringElement="";dS.event.ingressedCount=DANZZ.getNested(digitalDataCopy,
"event","length");ingressData.digitalData=digitalDataCopy}if(JSON.stringify(ingressData).length<7E5)if(typeof navigator.sendBeacon==="function")try{var headers={type:"application/json"};var blob=new Blob([JSON.stringify(ingressData)],headers);navigator.sendBeacon(dS.cfg.ingress.domain+dS.cfg.ingress.path,blob)}catch(err){DANZZ.xhrRequest(dS.cfg.ingress.domain+dS.cfg.ingress.path,ingressData)}else DANZZ.xhrRequest(dS.cfg.ingress.domain+dS.cfg.ingress.path,ingressData);if(trigger=="initial")DANZZ.setPerformanceMark("danzz.ingrezz.done");
DANZZ.loggr("!ngr3ss3d by "+trigger,5);if(trigger!="ping")DANZZ.jsonParser(ingressData,trigger)}catch(err){DANZZ.loggr("TMS ERROR sID: "+err.message,0,trigger)}};DANZZ.checkPingTiming=function(initTS,updateTS,lastActivityTS){var currentTS=DANZZ.getCurrentDate().getTime();var minPingInterval=1E4;var timeSinceUpdate=currentTS-updateTS;var doPing=false;if(timeSinceUpdate>=minPingInterval){var timeSinceLastActivity=currentTS-lastActivityTS;if(timeSinceLastActivity<=30*1E3)doPing=true;else if(timeSinceLastActivity<=
3*60*1E3&&timeSinceUpdate>=3E4)doPing=true;else if(timeSinceLastActivity<=10*60*1E3&&timeSinceUpdate>=6E4)doPing=true;else if(timeSinceLastActivity<=30*60*1E3&&timeSinceUpdate>=36E4)doPing=true;else if(timeSinceLastActivity<=60*60*1E3&&timeSinceUpdate>=6E5)doPing=true;else if(timeSinceUpdate>=30*60*1E3)doPing=true;if(doPing&&DANZZ.checkDebugLevel(6)){var minSinceUpdate=Math.floor(timeSinceUpdate/1E3/60);var minSinceLastActivity=Math.floor(timeSinceLastActivity/1E3/60);DANZZ.loggr("timeSinceUpdate: "+
minSinceUpdate+":"+(Math.floor(timeSinceUpdate/1E3)-minSinceUpdate*60+100).toString().substring(1)+" / timeSinceLastActivity: "+minSinceLastActivity+":"+(Math.floor(timeSinceLastActivity/1E3)-minSinceLastActivity*60+100).toString().substring(1),6)}}return doPing};DANZZ.getTimeDifference=function(date1,date2,format){try{DANZZ.loggr("date1: "+date1+" (typeof: "+typeof date1+") / date2: "+date2+" (typeof: "+typeof date2+")",5);date1=typeof date1=="string"&&date1.search(/[0-9\-]{10} /i)>-1?date1.replace(" ",
"T"):date1;date2=typeof date2=="string"&&date2.search(/[0-9\-]{10} /i)>-1?date2.replace(" ","T"):date2;if(new Date(date1)=="Invalid Date"||new Date(date2)=="Invalid Date")return"Invalid Date";var difference=(new Date(date1)).getTime()-(new Date(date2)).getTime();var differenceFormatted="";switch(format){case "h":differenceFormatted=Math.ceil(difference/1E3/60/60);break;case "d":differenceFormatted=Math.ceil(difference/1E3/60/60/24);break;default:differenceFormatted="format not defined"}return differenceFormatted}catch(err){DANZZ.loggr("TMS ERROR gTD: "+
err.message,0)}};DANZZ.isNumeric=function(n){try{return!isNaN(parseFloat(n))&&isFinite(n)}catch(err){DANZZ.loggr("TMS ERROR iN: "+err.message,0)}};DANZZ.getXHR=function(){try{return new XMLHttpRequest}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(e){}try{return new ActiveXObject("Microsoft.XMLHttp")}catch(e){}DANZZ.loggr("TMS ERROR gX: ",0)};DANZZ.xhrRequest=function(uri,data){try{var xhr=DANZZ.getXHR();if("withCredentials"in
xhr)xhr.open("POST",uri,true);xhr.onreadystatechange=function(){if(xhr.readyState===4){if(xhr.status===200||xhr.status===304){var response=JSON.parse(xhr.responseText);if(response.status==="ok");else if(response.status==="error");else;}}else;};xhr.setRequestHeader("Content-Type","application/json; charset\x3dUTF-8");xhr.send(JSON.stringify(data))}catch(err){DANZZ.loggr("TMS ERROR xR: "+err.message,0)}};DANZZ.checkDebugLevel=function(debugLevel){try{if(typeof dS.debug.level!=="undefined"&&debugLevel<=
dS.debug.level||debugLevel<=dS.cfg.debug.ingressLevel)return true;else return false}catch(err){DANZZ.loggr("TMS ERROR cDL: "+err.message,0)}};DANZZ.pushEvent=function(component,event,trigger,deduplicate){try{trigger=trigger||"pushEvent";window.digitalData=window.digitalData||{};digitalData.component=digitalData.component||[];digitalData.event=digitalData.event||[];var componentID=DANZZ.getComponent("componentInfo.componentID",component.componentInfo.componentID);if(componentID===false)digitalData.component.push(component);
if(typeof deduplicate=="undefined"||typeof deduplicate!="undefined"&&dS.event.pusher.deduplicate.indexOf(deduplicate)<0){dS.event.pusher.deduplicate.push(deduplicate);digitalData.event.push(event);DANZZ.eventTrigger(trigger)}}catch(err){DANZZ.loggr("TMS ERROR pE: "+err.message,0)}};DANZZ.loggr=function(msg,lvl,trg){try{if(!DANZZ.checkDebugLevel(lvl))return;var currentDate=DANZZ.getCurrentDate();dS.count=dS.count||{};dS.count.loggr=dS.count.loggr+1||1;var consCss;var digitalDataLog=false;switch(lvl){case 0:consCss=
"background: #F3B2AE; color: #000000; font-weight: bold";digitalDataLog=true;dS.count.error++;break;case 1:consCss="background: #F7D49F; color: #000000;";break;case 2:consCss="background: #FEFFBB; color: #000000";break;case 3:consCss="background: #E4FED8; color: #000000";break;case 4:consCss="background: #A7C3FC; color: #000000";break;case 5:consCss="background: #BBB3FC; color: #000000";break;case 6:consCss="background: #F6C9FD; color: #000000; font-style: italic";break;case 7:consCss="background: #EBEBEB; color: #000000; font-style: italic";
break;default:consCss="background: #B6B6B6; color: #000000"}if(lvl>0||dS.count.error<dS.cfg.error.limit){if(lvl<=dS.cfg.debug.ingressLevel){dS.ingress.error=dS.ingress.error||{};dS.ingress.error.nzz=dS.ingress.error.nzz||[];dS.ingress.error.nzz.push({msg:msg,lvl:lvl,trg:trg})}if(lvl==0&&digitalDataLog){var msgCategory=msg.substring(0,msg.search(":"));var msgDetail=msg.substring(msg.search(":")+1).trim();var errorComponent={componentInfo:{componentID:"tms_loggr",componentName:"TMS Debug Log"},category:{primaryCategory:"TMS",
subCategory1:"Log",subCategory2:lvl,componentType:"tms"}};var errorEvent={eventInfo:{eventName:"TMS Event",eventAction:"loggr",eventValue:msgDetail,eventNonInteractive:true,type:"tms",timeStamp:currentDate,componentID:"tms_loggr",componentName:"TMS Debug Log"},category:{primaryCategory:"tms",subCategory1:"log",subCategory2:msgCategory,subCategory3:trg||""}};DANZZ.pushEvent(errorComponent,errorEvent,"loggr")}if(typeof dS.debug.level!=="undefined"&&(lvl<=dS.debug.level||lvl==0))if(dS.cfg.debug.pixel===
true)(new Image).src="//tms.nzz.ch/danzz/loggr/pixel.gif?seq\x3d"+dS.count.loggr+"\x26lvl\x3d"+encodeURI(lvl)+"\x26msg\x3d"+encodeURI(msg)+"\x26rnd\x3d"+parseInt(Math.random()*1E9);else console.log("["+currentDate.toLocaleString()+"."+currentDate.getMilliseconds()+"] "+"%c "+msg+" ",consCss)}}catch(err){dS.count.error++;catchMsg="TMS ERROR loggr: "+err.message;var catchDate=DANZZ.getCurrentDate();if(dS.cfg.debug.pixel===true)(new Image).src="//tms.nzz.ch/danzz/loggr/pixel.gif?seq\x3d"+dS.count.loggr+
"\x26lvl\x3d"+encodeURI(0)+"\x26msg\x3d"+encodeURI(catchMsg)+"\x26rnd\x3d"+parseInt(Math.random()*1E9);else console.log("["+catchDate.toLocaleString()+"."+catchDate.getMilliseconds()+"] "+"%c "+catchMsg+" ","background: #ff0000; color: #ffffbb")}};DANZZ.jsonParser=function(jsonData,trigger){function pad(num,size){var s=num+"";while(s.length<size)s="0"+s;return s}if(dS.cfg.debug.jsonParser===true){jsonData=typeof jsonData=="object"?jsonData:JSON.parse(jsonData);var instance=DANZZ.getNested(jsonData,
"ingress.instance","value");var sequence=DANZZ.getNested(jsonData,"ingress.sequence","value");DANZZ.xhrRequest("//tms.nzz.ch/danzz/helper/parser.php?instance\x3d"+instance+"\x26sequence\x3d"+pad(sequence,4)+"\x26trigger\x3d"+trigger,jsonData)}};DANZZ.orderConvPxl=function(){try{var productList=DANZZ.getProducts().split(",");dS.order={};dS.order.googleAdsLabel="";dS.order.adnzPxl="";if(typeof productList==="object"&&productList.length>0)for(var i=0;i<productList.length;i++){if(productList[i].indexOf("DE2AU000")>
-1)dS.order.adnzPxl="https://secure.adnxs.com/px?id\x3d1283016\x26t\x3d2";else if(productList[i].indexOf("DEPAC000")>-1)dS.order.adnzPxl="https://secure.adnxs.com/px?id\x3d1283016\x26t\x3d2";else if(productList[i].indexOf("WEPCV000")>-1)dS.order.adnzPxl="https://secure.adnxs.com/px?id\x3d1283016\x26t\x3d2";else if(productList[i].indexOf("MGGAJ000")>-1)dS.order.googleAdsLabel="TwKtCPfErNUBEOncwvID";else if(productList[i].indexOf("DE2AI000")>-1)dS.order.adnzPxl="https://secure.adnxs.com/px?id\x3d1283016\x26t\x3d2";
else if(productList[i].indexOf("DEPAA000")>-1)dS.order.adnzPxl="https://secure.adnxs.com/px?id\x3d1283016\x26t\x3d2";else if(productList[i].indexOf("WEBAV000")>-1)dS.order.adnzPxl="https://secure.adnxs.com/px?id\x3d1283016\x26t\x3d2";else if(productList[i].indexOf("DEPAG000")>-1)dS.order.adnzPxl="https://secure.adnxs.com/px?id\x3d1517493\x26t\x3d2";else if(productList[i].indexOf("DEPAH000")>-1){dS.order.googleAdsLabel="rWYnCPOTs5ICEOncwvID";dS.order.adnzPxl="https://secure.adnxs.com/px?id\x3d1517497\x26t\x3d2"}else if(productList[i].indexOf("DEPAI000")>
-1)dS.order.adnzPxl="https://secure.adnxs.com/px?id\x3d1517501\x26t\x3d2";else if(productList[i].indexOf("STAAA001")>-1)dS.order.googleAdsLabel="zhD_CI3FytUBEOncwvID";else if(productList[i].indexOf("WNWAA000")>-1)dS.order.adnzPxl="https://secure.adnxs.com/px?id\x3d1519732\x26t\x3d2";else if(productList[i].indexOf("WNWAB000")>-1)dS.order.adnzPxl="https://secure.adnxs.com/px?id\x3d1529212\x26t\x3d2";else if(productList[i].indexOf("STAAN000")>-1)dS.order.adnzPxl="https://secure.adnxs.com/px?id\x3d1546168\x26t\x3d2";
else if(productList[i].indexOf("DEPAU000")>-1)dS.order.adnzPxl="https://secure.adnxs.com/px?id\x3d1549484\x26t\x3d2";else if(productList[i].indexOf("WEPBE000")>-1)dS.order.googleAdsLabel="n6Z8CISwytUBEOncwvID";if(dS.order.adnzPxl.length>0||dS.order.googleAdsLabel.length>0)Bootstrapper.ensEvent.trigger("digitalData - Order Success Specific")}Bootstrapper.ensEvent.trigger("digitalData - Order Success");DANZZ.loggr("Order Pixel executed",3)}catch(err){DANZZ.loggr("TMS ERROR oCP: "+err.message,0)}};DANZZ.getEngagement=
function(){try{return dS.engagement}catch(err){DANZZ.loggr("TMS ERROR gE: "+err.message,0)}};DANZZ.updateEngagement=function(eventName,eventNonInteractive){try{DANZZ.loggr("call updateEngagement with eventName: "+eventName+" and eventNonInteractive: "+eventNonInteractive,3);var logTimeStamp=DANZZ.getCurrentDate();var lastLog=JSON.parse(JSON.stringify(dS.cache.engagement.lastLog));var lastInteractive=JSON.parse(JSON.stringify(dS.cache.engagement.lastInteractive));var engagementLog={logID:lastLog.logID+
1,logTimeStamp:logTimeStamp,eventName:eventName,eventNonInteractive:eventNonInteractive,visibilityState:dS.visibility.currentState,lastLogID:lastLog.logID,lastEventName:lastLog.eventName,timeSinceLastEvent:new Date(logTimeStamp)-new Date(lastLog.logTimeStamp),lastInteractiveLogID:lastInteractive.logID,lastInteractiveEventName:lastInteractive.eventName,timeSinceLastInteractiveEvent:new Date(logTimeStamp)-new Date(lastInteractive.logTimeStamp)};dS.engagement.log.push(JSON.parse(JSON.stringify(engagementLog)));
if(!eventNonInteractive)dS.cache.engagement.lastInteractive=JSON.parse(JSON.stringify(engagementLog));dS.cache.engagement.lastLog=JSON.parse(JSON.stringify(engagementLog))}catch(err){DANZZ.loggr("TMS ERROR uE: "+err.message,0)}};DANZZ.getVisibility=function(){try{DANZZ.updateVisibility();return dS.visibility}catch(err){DANZZ.loggr("TMS ERROR gV: "+err.message,0)}};DANZZ.updateVisibility=function(){try{var updateState;var currentDate=DANZZ.getCurrentDate();var timeStampDifference=Math.round((currentDate.getTime()-
dS.visibility.updateTS.getTime())/1E3);if(timeStampDifference<0){DANZZ.loggr("TMS ERROR uVa: "+timeStampDifference+" (currentDate ("+currentDate+") \x3c dS.visibility.updateTS("+dS.visibility.updateTS+"))",0);timeStampDifference=0}dS.visibility.updateTS=currentDate;if(document.visibilityState!==dS.visibility.currentState){dS.visibility.lastState=dS.visibility.currentState;dS.visibility.currentState=document.visibilityState;dS.visibility.changeCount=dS.visibility.changeCount+1;updateState=dS.visibility.lastState;
if(dS.visibility.currentState=="visible")dS.visibility.lastActivityTS=currentDate}else{updateState=dS.visibility.currentState;if(dS.visibility.currentState=="visible"&&!dS.visibility.lastActivityTS)dS.visibility.lastActivityTS=currentDate}switch(updateState){case "hidden":dS.visibility.hiddenTime=dS.visibility.hiddenTime+timeStampDifference;break;case "visible":dS.visibility.visibleTime=dS.visibility.visibleTime+timeStampDifference;break}dS.visibility.updateTS=currentDate}catch(err){DANZZ.loggr("TMS ERROR uV: "+
err.message,0)}};DANZZ.getBrowserWidth=function(){try{if(typeof window.innerWidth=="number")return window.innerWidth;else if(document.documentElement&&document.documentElement.clientWidth)return document.documentElement.clientWidth;else if(document.body&&document.body.clientWidth)return document.body.clientWidth;else return 0}catch(err){DANZZ.loggr("TMS ERROR gBW: "+err.message,0)}};DANZZ.getBrowserHeight=function(){try{if(typeof window.innerHeight=="number")return window.innerHeight;else if(document.documentElement&&
document.documentElement.clientHeight)return document.documentElement.clientHeight;else if(document.body&&document.body.clientHeight)return document.body.clientHeight;else return 0}catch(err){DANZZ.loggr("TMS ERROR gBH: "+err.message,0)}};DANZZ.getScrollTop=function(){try{var num;if(typeof window.pageYOffset=="number")num=window.pageYOffset;else if(document.documentElement&&document.documentElement.scrollTop)num=document.documentElement.scrollTop;else if(document.body&&document.body.scrollTop)num=
document.body.scrollTop;else num=0;return Math.round(num)}catch(err){DANZZ.loggr("TMS ERROR gST: "+err.message,0)}};DANZZ.getScrollHeight=function(){try{var num;if(document.documentElement&&document.documentElement.scrollHeight)num=document.documentElement.scrollHeight;else if(document.body&&document.body.scrollHeight)num=document.body.scrollHeight;else num=0;return num}catch(err){DANZZ.loggr("TMS ERROR gSH: "+err.message,0)}};DANZZ.getScrollWidth=function(){try{var num;if(document.documentElement&&
document.documentElement.scrollWidth)num=document.documentElement.scrollWidth;else if(document.body&&document.body.scrollWidth)num=document.body.scrollWidth;else num=0;return num}catch(err){DANZZ.loggr("TMS ERROR gSW: "+err.message,0)}};DANZZ.getScrollLeft=function(){try{var num;if(typeof window.pageXOffset=="number")num=window.pageXOffset;else if(document.documentElement&&document.documentElement.scrollLeft)num=document.documentElement.scrollLeft;else if(document.body&&document.body.scrollLeft)num=
document.body.scrollLeft;else num=0;return Math.round(num)}catch(err){DANZZ.loggr("TMS ERROR gSL: "+err.message,0)}};DANZZ.pushViewportInfo=function(trigger){try{var currentDate=DANZZ.getCurrentDate();if(!((trigger=="scroll"||trigger=="resize")&&currentDate.getTime()-dS.visibility.updateTS.getTime()<100)){var viewportInfo=dS.visibility.currentViewport={};viewportInfo.timeStamp=currentDate;viewportInfo.trigger=trigger;viewportInfo.state=document.visibilityState;viewportInfo.screenWidth=window.screen.width;
viewportInfo.screenHeight=window.screen.height;viewportInfo.browserWidth=DANZZ.getBrowserWidth();viewportInfo.browserHeight=DANZZ.getBrowserHeight();if(window.screen&&window.screen.orientation&&(window.screen.orientation.angle||window.screen.orientation.type)){viewportInfo.orientationAngle=window.screen.orientation.angle;viewportInfo.orientationType=window.screen.orientation.type}viewportInfo.scrollTop=DANZZ.getScrollTop();viewportInfo.scrollHeight=DANZZ.getScrollHeight();viewportInfo.scrollPercentageVertical=
Math.round(viewportInfo.scrollTop/(viewportInfo.scrollHeight-viewportInfo.browserHeight)*100);if(dS.cfg.technology=="webview")viewportInfo.articleCompletionPercentage=Math.round(window.scrollY/(document.body.offsetHeight-window.innerHeight)*100);else viewportInfo.articleCompletionPercentage=DANZZ.getNested(window,"dS.ld.articleProgress","typeof")!=="undefined"?dS.ld.articleProgress:0;viewportInfo.scrollLeft=DANZZ.getScrollLeft();viewportInfo.scrollWidth=DANZZ.getScrollWidth();viewportInfo.scrollPercentageHorizontal=
Math.round(viewportInfo.scrollLeft/(viewportInfo.scrollWidth-viewportInfo.browserWidth)*100);dS.visibility.scrollPercentageVerticalMax=typeof dS.visibility.scrollPercentageVerticalMax!=="undefined"?dS.visibility.scrollPercentageVerticalMax<viewportInfo.scrollPercentageVertical?viewportInfo.scrollPercentageVertical:dS.visibility.scrollPercentageVerticalMax:0;dS.visibility.scrollPercentageVerticalLast=viewportInfo.scrollPercentageVertical;if(viewportInfo.scrollPercentageVertical<=10&&dS.visibility.scrollPercentageVerticalMaxReset>
10)dS.visibility.resetMax=true;else if(dS.visibility.resetMax&&viewportInfo.scrollPercentageVertical>10){dS.visibility.scrollPercentageVerticalMaxReset=viewportInfo.scrollPercentageVertical;delete dS.visibility.resetMax}else dS.visibility.scrollPercentageVerticalMaxReset=typeof dS.visibility.scrollPercentageVerticalMaxReset!=="undefined"?dS.visibility.scrollPercentageVerticalMaxReset<viewportInfo.scrollPercentageVertical?viewportInfo.scrollPercentageVertical:dS.visibility.scrollPercentageVerticalMaxReset:
0;if(typeof viewportInfo.articleCompletionPercentage!=="undefined")if(typeof dS.visibility.articleCompletionPercentageMax==="undefined"||dS.visibility.articleCompletionPercentageMax<viewportInfo.articleCompletionPercentage)dS.visibility.articleCompletionPercentageMax=viewportInfo.articleCompletionPercentage;DANZZ.updateVisibility();viewportInfo.visibleTimeline=dS.visibility.visibleTime;viewportInfo.totalTimeline=dS.visibility.visibleTime+dS.visibility.hiddenTime;if(currentDate-dS.visibility.lastActivityTS>
3E3||!(viewportInfo.trigger=="scroll"||viewportInfo.trigger=="resize")){if(DANZZ.getNested(dS,"cache.viewport.trigger","typeof")!="undefined"){if(dS.cache.viewport.trigger!=viewportInfo.trigger){dS.visibility.viewport.push(dS.cache.viewport);DANZZ.loggr("pushViewportInfo added by '"+dS.cache.viewport.trigger+"' from cache",6)}delete dS.cache.viewport}dS.visibility.viewport.push(viewportInfo);dS.visibility.lastActivityTS=currentDate;DANZZ.updateEngagement(trigger,trigger=="readyState"?true:false);
DANZZ.sendIngressData(viewportInfo.trigger)}else{dS.cache.viewport=viewportInfo;DANZZ.loggr("pushViewportInfo added by '"+viewportInfo.trigger+"' to cache",7)}}}catch(err){DANZZ.loggr("TMS ERROR pVI: "+err.message,0,trigger)}};DANZZ.initVID=function(){try{if(!DANZZ.getNested(dS,"ingress.vID","value")&&typeof DANZZ.vID=="function"){if(dS.trigger.vID===true){dS.trigger.vID="init";try{var vIDOptions={excludeColorDepth:true,excludeScreenResolution:true,excludeAvailableScreenResolution:true,excludePixelRatio:true,
excludeTouchSupport:true,excludeHasLiedResolution:true,excludeAdBlock:true};(new DANZZ.vID(vIDOptions)).get(function(result,components){dS.ingress.navigator=dS.ingress.navigator||{};dS.ingress.navigator.components=dS.ingress.navigator.components||{};dS.ingress.vID=result;components.forEach(pusH);function pusH(item,index,arr){var ivalue=typeof item.value==="object"?item.value.join(","):item.value;dS.ingress.navigator.components[item.key]=ivalue.length>64?DANZZ.fnv(ivalue):ivalue}})}catch(err){DANZZ.loggr("TMS ERROR vID: "+
err.message,0)}}if(dS.trigger.vIDa===true){dS.trigger.vIDa="init";try{var vIDaOptions={excludeUserAgent:true,excludeColorDepth:true,excludeScreenResolution:true,excludeAvailableScreenResolution:true,excludePixelRatio:true,excludeTouchSupport:true,excludeHasLiedResolution:true,excludeHasLiedLanguages:true,excludeHasLiedOs:true,excludeHasLiedBrowser:true,excludePlugins:true,excludeIEPlugins:true,excludeDoNotTrack:true,excludeAdBlock:true};(new DANZZ.vID(vIDaOptions)).get(function(result){dS.ingress.vIDa=
result})}catch(err){DANZZ.loggr("TMS ERROR vIDa: "+err.message,0)}}}if(dS.trigger.vIDc===true){dS.trigger.vIDc="init";try{if(Bootstrapper.Cookies.test("p4m_vid")){dS.p4m=dS.p4m||{};dS.p4m.vid=Bootstrapper.Cookies.get("p4m_vid")}else Bootstrapper.loadScriptCallback("//tms.nzz.ch/p4m/v.js",function(){Bootstrapper.Cookies.set("p4m_vid",DANZZ.getNested(dS,"p4m.vid","value"))})}catch(err){DANZZ.loggr("TMS ERROR vIDc: "+err.message,0)}}}catch(err){DANZZ.loggr("TMS ERROR iV: "+err.message,0)}};DANZZ.checkVID=
function(){try{DANZZ.loggr("checkVID (Interval ID: "+dS.interval.checkVID+")",5);if(dS.trigger.vID=="init"&&DANZZ.getNested(dS,"ingress.vID","value"))dS.trigger.vID="done";if(dS.trigger.vIDa=="init"&&DANZZ.getNested(dS,"ingress.vIDa","value"))dS.trigger.vIDa="done";if(dS.trigger.vIDc=="init"&&DANZZ.getNested(dS,"p4m.vid","value")){dS.ingress=dS.ingress||{};dS.ingress.vIDc=DANZZ.getNested(dS,"p4m.vid","value");dS.trigger.vIDc="done"}if(dS.trigger.vID=="done"){dS.trigger.vID="ingressed";if(dS.trigger.vIDa==
"done")dS.trigger.vIDa="ingressed";if(dS.trigger.vIDc=="done")dS.trigger.vIDc="ingressed";DANZZ.sendIngressData("vID")}if(dS.trigger.vIDa=="done"){dS.trigger.vIDa="ingressed";if(dS.trigger.vIDc=="done")dS.trigger.vIDc="ingressed";DANZZ.sendIngressData("vIDa")}if(dS.trigger.vIDc=="done"){dS.trigger.vIDc="ingressed";DANZZ.sendIngressData("vIDc")}if((dS.trigger.vID=="ingressed"||dS.trigger.vID===false)&&(dS.trigger.vIDa=="ingressed"||dS.trigger.vIDa===false)&&(dS.trigger.vIDc=="ingressed"||dS.trigger.vIDc===
false))clearInterval(dS.interval.checkVID)}catch(err){DANZZ.loggr("TMS ERROR cV: "+err.message,0)}};DANZZ.getVID=function(){try{DANZZ.initVID();dS.interval.checkVID=setInterval(DANZZ.checkVID,25)}catch(err){DANZZ.loggr("TMS ERROR gV: "+err.message,0)}};DANZZ.startInterval=function(){try{dS.interval.parserInterval=window.setInterval(function(){if(localStorage.getItem("pageID")!=DANZZ.getNested(digitalData,"page.pageInfo.pageID","value")&&localStorage.getItem("pageID")!=null&&dS.cfg.technology=="webview")DANZZ.stopInterval(dS.interval.parserInterval);
if(dS.visibility.currentState=="visible"&&DANZZ.checkPingTiming(dS.ingress.initTS,dS.ingress.updateTS,dS.visibility.lastActivityTS)){DANZZ.updateEngagement("ping",true);DANZZ.sendIngressData("ping")}DANZZ.eventTrigger("interval");if(dS.trigger.viewportInfo===false&&document.readyState!=="loading"){DANZZ.pushViewportInfo("readyState");dS.trigger.viewportInfo="done"}},DANZZ.getNested(dS,"cfg.event.parseInterval","value")||250)}catch(err){DANZZ.loggr("TMS ERROR sI1: "+err.message,0)}};DANZZ.stopInterval=
function(interval){try{clearInterval(interval)}catch(err){DANZZ.loggr("TMS ERROR sI2: "+err.message,0)}};DANZZ.initPageView=function(){function initTracking(){try{dS.trigger.pageReadyConsecutive=false;window.removeEventListener("tms:pageReady",initTracking,true);DANZZ.loggr("Run DANZZ.adobeAnalyticsPageView()",3);DANZZ.adobeAnalyticsPageView();DANZZ.loggr("Done DANZZ.adobeAnalyticsPageView()",3);var cbLocationPath=DANZZ.getChartbeatPath();var cbTitle=DANZZ.getChartbeatTitle();var cbSections=DANZZ.getChartbeatSections();
var cbAuthors=DANZZ.getAuthorName().replace(/ ?\(.*?\)/g,"").replace(/ und /g,", ").replace(/;/g,",");var cbType=DANZZ.getNested(digitalData,"page.category.pageType","value");DANZZ.loggr("Run DANZZ.chartBeatVirtualPage("+cbLocationPath+","+cbTitle+","+cbSections+","+cbAuthors+","+cbType+")",3);DANZZ.chartBeatVirtualPage(cbLocationPath,cbTitle,cbSections,cbAuthors,cbType);DANZZ.mediaPulsTracking();Bootstrapper.ensEvent.trigger("digitalData - tms:pageReady");if(window.s&&window.s.Media&&typeof s.Media.close==
"function"&&DANZZ.getNested(dS,"videoPlayer.currentName","length")>0)s.Media.close(dS.videoPlayer.currentName);if(typeof window.snowplow=="function")snowplow("trackPageView");if(typeof window.pa=="object"&&typeof window.pa.sendEvent=="function")DANZZ.pianoAnalyticsTracking()}catch(err){DANZZ.loggr("TMS ERROR iPV-iT: "+err.message,0)}}try{DANZZ.loggr("Manually Init Page View",1);if(typeof window.s!=="undefined"&&dS.aa.postTrack){window.s.clearVars();window.s.pageName=window.location.pathname;window.s.pageURL=
window.location.href}DANZZ.initdS();dS.ingress.instance=DANZZ.getIngressInstance(true);dS.ingress.sequence=0;if(dS.cfg.technology=="nuxt")dS.ingress.stats.instance.consecutive=true;DANZZ.sendIngressData("initial");DANZZ.loggr("Initiate getVID() with document.readyState: "+document.readyState,5);if(document.readyState=="loading")document.addEventListener("DOMContentLoaded",DANZZ.getVID);else DANZZ.getVID();if(dS.trigger.pageReadyConsecutive||dS.cfg.event.pageReadyListener===false)initTracking();else{window.addEventListener("tms:pageReady",
initTracking,true);dS.trigger.pageReadyListener=true}DANZZ.proLitterisTracking();if(dS.cfg.hj.enabled)DANZZ.setHJTags()}catch(err){DANZZ.loggr("TMS ERROR iPV: "+err.message,0)}};DANZZ.parseDataLayerUpdate=function(path){try{DANZZ.loggr("Parse Datalayer Update: Function Start",3);switch(path){case "event":DANZZ.loggr("Parse Datalayer Update: Event",3);DANZZ.eventTrigger(path);break;default:DANZZ.loggr("Parse Datalayer Update: Default",3)}}catch(err){DANZZ.loggr("TMS ERROR pDLU: "+err.message,0)}};
DANZZ.insertScript=function(src,async,reinsert){try{var scripts=document.getElementsByTagName("script");var i;async=void 0!==async?async:true;if(!(void 0!==reinsert?reinsert:false))for(i=0;i<scripts.length;i++)if(scripts[i].src===src&&scripts[i].readyState&&/loaded|complete/.test(scripts[i].readyState))return;(function(metaWindow,doc,src,async){var head=doc.head||doc.getElementsByTagName("head");setTimeout(function(){if("item"in head){if(!head[0]){setTimeout(arguments.callee,25);return}head=head[0]}var a=
doc.createElement("script");a.src=src;if(async)a.setAttribute("async","");a.onload=a.onerror=function(){if(this.addEventListener)this.readyState="loaded"};head.insertBefore(a,head.firstChild)},0)})(window,document,src,async)}catch(err){DANZZ.loggr("TMS ERROR iS: "+err.message+" - Source Script: "+src,0)}};Bootstrapper.bindDependencyImmediate(function(){if(dS.cfg.technology!="webview")DANZZ.initdS()},120677102,[120677101],120677202,[120677201]);try{var currentDate=DANZZ.getCurrentDate();var cookieExpDate=
currentDate;cookieExpDate.setDate(currentDate.getDate()+1);if(DANZZ.getURLParam("ens_dbglvl","param")!==""){Bootstrapper.Cookies.set("ens_dbglvl",DANZZ.getURLParam("ens_dbglvl","param"),cookieExpDate);dS.debug.level=DANZZ.getURLParam("ens_dbglvl","param")}else if(Bootstrapper.Cookies.test("ens_dbglvl"))dS.debug.level=Bootstrapper.Cookies.get("ens_dbglvl");else dS.debug.level=dS.debug.level||-1}catch(err){DANZZ.loggr("TMS ERROR dBG: "+err.message,0)}},3738607,[3715282,3715294,3731039],430195,[281887,
587003,591419],24);
Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;window.SameSiteCompatible=isSameSiteNoneCompatible(navigator.userAgent);function intToString(intValue){return String(intValue)}function stringToInt(strValue){return parseInt(strValue,10)||0}function isSameSiteNoneCompatible(userAgent){return!isSameSiteNoneIncompatible(String(userAgent))}function isSameSiteNoneIncompatible(userAgent){return hasWebKitSameSiteBug(userAgent)||dropsUnrecognizedSameSiteCookies(userAgent)}
function hasWebKitSameSiteBug(userAgent){return isIosVersion(12,userAgent)||isMacosxVersion(10,14,userAgent)&&(isSafari(userAgent)||isMacEmbeddedBrowser(userAgent))}function dropsUnrecognizedSameSiteCookies(userAgent){return isChromiumBased(userAgent)&&isChromiumVersionAtLeast(51,userAgent)&&!isChromiumVersionAtLeast(67,userAgent)||isUcBrowser(userAgent)&&!isUcBrowserVersionAtLeast(12,13,2,userAgent)}function regexContains(stringValue,regex){var matches=stringValue.match(regex);return matches!==null}
function extractRegexMatch(stringValue,regex,offsetIndex){var matches=stringValue.match(regex);if(matches!==null&&matches[offsetIndex]!==undefined)return matches[offsetIndex];return null}function isIosVersion(major,userAgent){var regex=/\(iP.+; CPU .*OS (\d+)[_\d]*.*\) AppleWebKit\//;return extractRegexMatch(userAgent,regex,1)===intToString(major)}function isMacosxVersion(major,minor,userAgent){var regex=/\(Macintosh;.*Mac OS X (\d+)_(\d+)[_\d]*.*\) AppleWebKit\//;return extractRegexMatch(userAgent,
regex,1)===intToString(major)&&extractRegexMatch(userAgent,regex,2)===intToString(minor)}function isSafari(userAgent){var safari_regex=/Version\/.* Safari\//;return userAgent.match(safari_regex)!==null&&!isChromiumBased(userAgent)}function isMacEmbeddedBrowser(userAgent){var regex=/^Mozilla\/[\.\d]+ \(Macintosh;.*Mac OS X [_\d]+\) AppleWebKit\/[\.\d]+ \(KHTML, like Gecko\)$/;return regexContains(userAgent,regex)}function isChromiumBased(userAgent){var regex=/Chrom(e|ium)/;return regexContains(userAgent,
regex)}function isChromiumVersionAtLeast(major,userAgent){var regex=/Chrom[^ \/]+\/(\d+)[\.\d]* /;var version=stringToInt(extractRegexMatch(userAgent,regex,1));return version>=major}function isUcBrowser(userAgent){var regex=/UCBrowser\//;return regexContains(userAgent,regex)}function isUcBrowserVersionAtLeast(major,minor,build,userAgent){var regex=/UCBrowser\/(\d+)\.(\d+)\.(\d+)[\.\d]* /;var major_version=stringToInt(extractRegexMatch(userAgent,regex,1));var minor_version=stringToInt(extractRegexMatch(userAgent,
regex,2));var build_version=stringToInt(extractRegexMatch(userAgent,regex,3));if(major_version!==major)return major_version>major;if(minor_version!=minor)return minor_version>minor;return build_version>=build}Bootstrapper.Cookies=function(){return{domain:function(){return"."+location.host.split(".").slice(-2).join(".")}()||location.hostname,get:function(a,c){for(var b=document.cookie.split(";"),d=0;d<b.length;d++){var e=b[d].replace(/^\s+/,"").split("\x3d");if(e[0]==a)return c?e[1]:decodeURIComponent(e[1])}return""},
set:function(a,c,b,f){var isSecure=/https:/.test(location.protocol),sameSite=f?f:isSecure?"None":"Lax";if(window.SameSiteCompatible){document.cookie=a+"\x3d"+encodeURIComponent(c)+(b?";expires\x3d"+b:"")+";path\x3d/;domain\x3d"+this.domain+";SameSite\x3d"+sameSite+(isSecure?";Secure":"");return this.get(a)===c}else{document.cookie=a+"\x3d"+encodeURIComponent(c)+(b?";expires\x3d"+b:"")+";path\x3d/;domain\x3d"+this.domain+(isSecure?";Secure":"");return this.get(a)===c}},test:function(a){return this.get(a)?
!0:!1},remove:function(a){document.cookie=a+'\x3d"";expires\x3d'+(new Date(0)).toUTCString()+";path\x3d/;domain\x3d"+this.domain;return this.get(a)===""?true:false}}}()},3715282,281887,622);
Bootstrapper.bindDependencyImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;try{window.DANZZ=window.DANZZ||{};dS.cfg.cmp.ready=false;if(dS.cfg.cmp.enabled){DANZZ.getVendorConsent=function(){try{var cmpData=window.__cmp("getCMPData");if(typeof cmpData!=="undefined"&&typeof cmpData.vendorsList!=="undefined"&&Object.keys(cmpData.vendorsList).length>0)if(window.__cmp("getCMPData").gdprApplies==true){dS.cfg.cmp.vendorConsents=cmpData.vendorConsents;
if(dS.cfg.cmp.vendorConsents.hasOwnProperty("s981")&&dS.cfg.cmp.vendorConsents["s981"]==true)dS.cfg.amc.analytics.consent=true;else dS.cfg.amc.analytics.consent=false;if(dS.cfg.cmp.vendorConsents.hasOwnProperty("s28")&&dS.cfg.cmp.vendorConsents["s28"]==true){dS.cfg.cb.consent=true;if(typeof DANZZ.loadChartbeatPinger==="function"&&dS.cb&&dS.cb.pingerLoaded==false)DANZZ.loadChartbeatPinger()}if(dS.cfg.cmp.vendorConsents.hasOwnProperty("s46")&&dS.cfg.cmp.vendorConsents["s46"]==true)dS.cfg.hj.consent=
true;if(dS.cfg.cmp.vendorConsents.hasOwnProperty("77")&&dS.cfg.cmp.vendorConsents["77"]==true){dS.cfg.mp.consent=true;if(typeof DANZZ.loadMediapuls==="function"&&dS.cfg.mp.loaded==false&&dS.cfg.mp.delayed==false)DANZZ.loadMediapuls()}dS.cfg.cmp.ready=true;window.removeEventListener("tms:pageReady",DANZZ.getVendorConsent)}else{dS.cfg.amc.analytics.consent=true;dS.cfg.cmp.gdprApplies=false;dS.cfg.cb.consent=true;if(typeof DANZZ.loadChartbeatPinger==="function"&&dS.cb&&dS.cb.pingerLoaded==false)DANZZ.loadChartbeatPinger();
dS.cfg.hj.consent=true;dS.cfg.mp.consent=true;if(typeof DANZZ.loadMediapuls==="function"&&dS.cfg.mp.loaded==false&&dS.cfg.mp.delayed==false)DANZZ.loadMediapuls();dS.cfg.cmp.ready=true;window.removeEventListener("tms:pageReady",DANZZ.getVendorConsent)}else if(dS.cfg.cmp.ready===false)window.setTimeout(DANZZ.getVendorConsent,200)}catch(e){console.log("DANZZ.getVendorConsent() -\x3e "+e.message)}};__cmp("addEventListener",["consentscreenoff",DANZZ.getVendorConsent,false],null);if(window.location.host.search("abo")>
-1||window.location.host.search("login")>-1)if(document.readyState=="complete")DANZZ.getVendorConsent();else window.addEventListener("load",DANZZ.getVendorConsent);else if(window.nuxtTms===false)window.addEventListener("tms:pageReady",DANZZ.getVendorConsent);else DANZZ.getVendorConsent()}else if(dS.cfg.technology!="webview"){dS.cfg.amc.analytics.consent=true;dS.cfg.cb.consent=true;dS.cfg.hj.consent=true;dS.cfg.mp.consent=true;dS.cfg.cmp.ready=true;window.removeEventListener("tms:pageReady",DANZZ.getVendorConsent)}}catch(e){console.log(e.message)}},
3715295,[3715326,3715294],670814,[413139,587003],24);Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;const styleString=`
    .pageelement--container--exclusive-toplayout-1-thema .teaser__content--3of3:first-of-type {
      margin: 0 !important;
      max-width: 100%;
    }
  `;const style=document.createElement("style");style.textContent=styleString;document.head.append(style)},3667558,706564,24);
Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;(function(global){var f={};var g=/iPhone/i,i=/iPod/i,j=/iPad/i,k=/\biOS-universal(?:.+)Mac\b/i,h=/\bAndroid(?:.+)Mobile\b/i,m=/Android/i,c=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,d=/Silk/i,b=/Windows Phone/i,n=/\bWindows(?:.+)ARM\b/i,p=/BlackBerry/i,q=/BB10/i,s=/Opera Mini/i,t=/\b(CriOS|Chrome)(?:.+)Mobile/i,u=/Mobile(?:.+)Firefox\b/i,v=function(l){return void 0!==l&&"MacIntel"===
l.platform&&"number"==typeof l.maxTouchPoints&&l.maxTouchPoints>1&&"undefined"==typeof MSStream};function w(l){return function($){return $.test(l)}}function x(l){var $={userAgent:"",platform:"",maxTouchPoints:0};l||"undefined"==typeof navigator?"string"==typeof l?$.userAgent=l:l&&l.userAgent&&($={userAgent:l.userAgent,platform:l.platform,maxTouchPoints:l.maxTouchPoints||0}):$={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0};var a=$.userAgent,e=
a.split("[FBAN");void 0!==e[1]&&(a=e[0]),void 0!==(e=a.split("Twitter"))[1]&&(a=e[0]);var r=w(a),o={apple:{phone:r(g)&&!r(b),ipod:r(i),tablet:!r(g)&&(r(j)||v($))&&!r(b),universal:r(k),device:(r(g)||r(i)||r(j)||r(k)||v($))&&!r(b)},amazon:{phone:r(c),tablet:!r(c)&&r(d),device:r(c)||r(d)},android:{phone:!r(b)&&r(c)||!r(b)&&r(h),tablet:!r(b)&&!r(c)&&!r(h)&&(r(d)||r(m)),device:!r(b)&&(r(c)||r(d)||r(h)||r(m))||r(/\bokhttp\b/i)},windows:{phone:r(b),tablet:r(n),device:r(b)||r(n)},other:{blackberry:r(p),blackberry10:r(q),
opera:r(s),firefox:r(u),chrome:r(t),device:r(p)||r(q)||r(s)||r(u)||r(t)},any:!1,phone:!1,tablet:!1};return o.any=o.apple.device||o.android.device||o.windows.device||o.other.device,o.phone=o.apple.phone||o.android.phone||o.windows.phone,o.tablet=o.apple.tablet||o.android.tablet||o.windows.tablet,o}f=x();if(typeof exports==="object"&&typeof module!=="undefined")module.exports=f;else if(typeof define==="function"&&define.amd)define(function(){return f});else this["isMobile"]=f})(window)},3715285,300516,
24);
Bootstrapper.bindDependencyImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;Bootstrapper.bindDependencyImmediate(function(){var vIDSetup=function(){var e=function(){function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t,n){return t in e?Object.defineProperty(e,t,
{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function n(){return{callbacks:{},add:function(e,t){this.callbacks[e]=this.callbacks[e]||[];var n=this.callbacks[e].push(t)-1,i=this;return function(){i.callbacks[e].splice(n,1)}},execute:function(e,t){if(this.callbacks[e]){t=void 0===t?[]:t,t=t instanceof Array?t:[t];try{for(;this.callbacks[e].length;){var n=this.callbacks[e].shift();"function"==typeof n?n.apply(null,t):n instanceof Array&&n[1].apply(n[0],t)}delete this.callbacks[e]}catch(e){}}},
executeAll:function(e,t){(t||e&&!j.isObjectEmpty(e))&&Object.keys(this.callbacks).forEach(function(t){var n=void 0!==e[t]?e[t]:"";this.execute(t,n)},this)},hasCallbacks:function(){return Boolean(Object.keys(this.callbacks).length)}}}function i(e,t,n){var i=null==e?void 0:e[t];return void 0===i?n:i}function r(e){for(var t=/^\d+$/,n=0,i=e.length;n<i;n++)if(!t.test(e[n]))return!1;return!0}function a(e,t){for(;e.length<t.length;)e.push("0");for(;t.length<e.length;)t.push("0")}function o(e,t){for(var n=
0;n<e.length;n++){var i=parseInt(e[n],10),r=parseInt(t[n],10);if(i>r)return 1;if(r>i)return-1}return 0}function s(e,t){if(e===t)return 0;var n=e.toString().split("."),i=t.toString().split(".");return r(n.concat(i))?(a(n,i),o(n,i)):NaN}function l(e){return e===Object(e)&&0===Object.keys(e).length}function c(e){return"function"==typeof e||e instanceof Array&&e.length}function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:
function(){return!0};this.log=_e("log",e,t),this.warn=_e("warn",e,t),this.error=_e("error",e,t)}function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.isEnabled,n=e.cookieName,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=i.cookies;return t&&n&&r?{remove:function(){r.remove(n)},get:function(){var e=r.get(n),t={};try{t=JSON.parse(e)}catch(e){t={}}return t},set:function(e,t){t=t||{},r.set(n,JSON.stringify(e),{domain:t.optInCookieDomain||"",cookieLifetime:t.optInStorageExpiry||
3419E4,expires:!0})}}:{get:Le,set:Le,remove:Le}}function f(e){this.name=this.constructor.name,this.message=e,"function"==typeof Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error(e)).stack}function p(){function e(e,t){var n=Se(e);return n.length?n.every(function(e){return!!t[e]}):De(t)}function t(){M(b),O(ce.COMPLETE),_(h.status,h.permissions),m.set(h.permissions,{optInCookieDomain:l,optInStorageExpiry:c}),C.execute(xe)}function n(e){return function(n,i){if(!Ae(n))throw new Error("[OptIn] Invalid category(-ies). Please use the `OptIn.Categories` enum.");
return O(ce.CHANGED),Object.assign(b,ye(Se(n),e)),i||t(),h}}var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=i.doesOptInApply,a=i.previousPermissions,o=i.preOptInApprovals,s=i.isOptInStorageEnabled,l=i.optInCookieDomain,c=i.optInStorageExpiry,u=i.isIabContext,f=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},p=f.cookies,g=Pe(a);Re(g,"Invalid `previousPermissions`!"),Re(o,"Invalid `preOptInApprovals`!");var m=d({isEnabled:!!s,cookieName:"adobeujs-optin"},{cookies:p}),h=this,
_=le(h),C=ge(),I=Me(g),v=Me(o),S=m.get(),D={},A=function(e,t){return ke(e)||t&&ke(t)?ce.COMPLETE:ce.PENDING}(I,S),y=function(e,t,n){var i=ye(pe,!r);return r?Object.assign({},i,e,t,n):i}(v,I,S),b=be(y),O=function(e){return A=e},M=function(e){return y=e};h.deny=n(!1),h.approve=n(!0),h.denyAll=h.deny.bind(h,pe),h.approveAll=h.approve.bind(h,pe),h.isApproved=function(t){return e(t,h.permissions)},h.isPreApproved=function(t){return e(t,v)},h.fetchPermissions=function(e){var t=arguments.length>1&&void 0!==
arguments[1]&&arguments[1],n=t?h.on(ce.COMPLETE,e):Le;return!r||r&&h.isComplete||!!o?e(h.permissions):t||C.add(xe,function(){return e(h.permissions)}),n},h.complete=function(){h.status===ce.CHANGED&&t()},h.registerPlugin=function(e){if(!e||!e.name||"function"!=typeof e.onRegister)throw new Error(je);D[e.name]||(D[e.name]=e,e.onRegister.call(e,h))},h.execute=Ne(D),Object.defineProperties(h,{permissions:{get:function(){return y}},status:{get:function(){return A}},Categories:{get:function(){return ue}},
doesOptInApply:{get:function(){return!!r}},isPending:{get:function(){return h.status===ce.PENDING}},isComplete:{get:function(){return h.status===ce.COMPLETE}},__plugins:{get:function(){return Object.keys(D)}},isIabContext:{get:function(){return u}}})}function g(e,t){function n(){r=null,e.call(e,new f("The call took longer than you wanted!"))}function i(){r&&(clearTimeout(r),e.apply(e,arguments))}if(void 0===t)return e;var r=setTimeout(n,t);return i}function m(){if(window.__cmp)return window.__cmp;
var e=window;if(e===window.top)return void Ie.error("__cmp not found");for(var t;!t;){e=e.parent;try{e.frames.__cmpLocator&&(t=e)}catch(e){}if(e===window.top)break}if(!t)return void Ie.error("__cmp not found");var n={};return window.__cmp=function(e,i,r){var a=Math.random()+"",o={__cmpCall:{command:e,parameter:i,callId:a}};n[a]=r,t.postMessage(o,"*")},window.addEventListener("message",function(e){var t=e.data;if("string"==typeof t)try{t=JSON.parse(e.data)}catch(e){}if(t.__cmpReturn){var i=t.__cmpReturn;
n[i.callId]&&(n[i.callId](i.returnValue,i.success),delete n[i.callId])}},!1),window.__cmp}function h(){var e=this;e.name="iabPlugin",e.version="0.0.1";var t=ge(),n={allConsentData:null},i=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n[e]=t};e.fetchConsentData=function(e){var t=e.callback,n=e.timeout,i=g(t,n);r({callback:i})},e.isApproved=function(e){var t=e.callback,i=e.category,a=e.timeout;if(n.allConsentData)return t(null,s(i,n.allConsentData.vendorConsents,
n.allConsentData.purposeConsents));var o=g(function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.vendorConsents,a=n.purposeConsents;t(e,s(i,r,a))},a);r({category:i,callback:o})},e.onRegister=function(t){var n=Object.keys(de),i=function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=i.purposeConsents,a=i.gdprApplies,o=i.vendorConsents;!e&&a&&o&&r&&(n.forEach(function(e){var n=s(e,o,r);t[n?"approve":"deny"](e,!0)}),t.complete())};e.fetchConsentData({callback:i})};
var r=function(e){var r=e.callback;if(n.allConsentData)return r(null,n.allConsentData);t.add("FETCH_CONSENT_DATA",r);var s={};o(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.purposeConsents,o=e.gdprApplies,l=e.vendorConsents;(arguments.length>1?arguments[1]:void 0)&&(s={purposeConsents:r,gdprApplies:o,vendorConsents:l},i("allConsentData",s)),a(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(arguments.length>1?arguments[1]:void 0)&&(s.consentString=
e.consentData,i("allConsentData",s)),t.execute("FETCH_CONSENT_DATA",[null,n.allConsentData])})})},a=function(e){var t=m();t&&t("getConsentData",null,e)},o=function(e){var t=Fe(de),n=m();n&&n("getVendorConsents",t,e)},s=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=!!t[de[e]];return i&&function(){return fe[e].every(function(e){return n[e]})}()}}var _="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?
window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};Object.assign=Object.assign||function(e){for(var t,n,i=1;i<arguments.length;++i){n=arguments[i];for(t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])}return e};var C,I,v={HANDSHAKE:"HANDSHAKE",GETSTATE:"GETSTATE",PARENTSTATE:"PARENTSTATE"},S={MCMID:"MCMID",MCAID:"MCAID",MCAAMB:"MCAAMB",MCAAMLH:"MCAAMLH",MCOPTOUT:"MCOPTOUT",CUSTOMERIDS:"CUSTOMERIDS"},D={MCMID:"getMarketingCloudVisitorID",MCAID:"getAnalyticsVisitorID",
MCAAMB:"getAudienceManagerBlob",MCAAMLH:"getAudienceManagerLocationHint",MCOPTOUT:"isOptedOut",ALLFIELDS:"getVisitorValues"},A={CUSTOMERIDS:"getCustomerIDs"},y={MCMID:"getMarketingCloudVisitorID",MCAAMB:"getAudienceManagerBlob",MCAAMLH:"getAudienceManagerLocationHint",MCOPTOUT:"isOptedOut",MCAID:"getAnalyticsVisitorID",CUSTOMERIDS:"getCustomerIDs",ALLFIELDS:"getVisitorValues"},b={MC:"MCMID",A:"MCAID",AAM:"MCAAMB"},O={MCMID:"MCMID",MCOPTOUT:"MCOPTOUT",MCAID:"MCAID",MCAAMLH:"MCAAMLH",MCAAMB:"MCAAMB"},
M={UNKNOWN:0,AUTHENTICATED:1,LOGGED_OUT:2},k={GLOBAL:"global"},E={MESSAGES:v,STATE_KEYS_MAP:S,ASYNC_API_MAP:D,SYNC_API_MAP:A,ALL_APIS:y,FIELDGROUP_TO_FIELD:b,FIELDS:O,AUTH_STATE:M,OPT_OUT:k},T=E.STATE_KEYS_MAP,L=function(e){function t(){}function n(t,n){var i=this;return function(){var r=e(0,t),a={};return a[t]=r,i.setStateAndPublish(a),n(r),r}}this.getMarketingCloudVisitorID=function(e){e=e||t;var i=this.findField(T.MCMID,e),r=n.call(this,T.MCMID,e);return void 0!==i?i:r()},this.getVisitorValues=
function(e){this.getMarketingCloudVisitorID(function(t){e({MCMID:t})})}},P=E.MESSAGES,R=E.ASYNC_API_MAP,w=E.SYNC_API_MAP,F=function(){function e(){}function t(e,t){var n=this;return function(){return n.callbackRegistry.add(e,t),n.messageParent(P.GETSTATE),""}}function n(n){this[R[n]]=function(i){i=i||e;var r=this.findField(n,i),a=t.call(this,n,i);return void 0!==r?r:a()}}function i(t){this[w[t]]=function(){return this.findField(t,e)||{}}}Object.keys(R).forEach(n,this),Object.keys(w).forEach(i,this)},
N=E.ASYNC_API_MAP,x=function(){Object.keys(N).forEach(function(e){this[N[e]]=function(t){this.callbackRegistry.add(e,t)}},this)},j=function(e,t){return t={exports:{}},e(t,t.exports),t.exports}(function(t,n){n.isObjectEmpty=function(e){return e===Object(e)&&0===Object.keys(e).length},n.isValueEmpty=function(e){return""===e||n.isObjectEmpty(e)},n.getIeVersion=function(){if(document.documentMode)return document.documentMode;for(var e=7;e>4;e--){var t=document.createElement("div");if(t.innerHTML="\x3c!--[if IE "+
e+"]\x3e\x3cspan\x3e\x3c/span\x3e\x3c![endif]--\x3e",t.getElementsByTagName("span").length)return t=null,e;t=null}return null},n.encodeAndBuildRequest=function(e,t){return e.map(encodeURIComponent).join(t)},n.isObject=function(t){return null!==t&&"object"===e(t)&&!1===Array.isArray(t)},n.defineGlobalNamespace=function(){return window.adobe=n.isObject(window.adobe)?window.adobe:{},window.adobe},n.pluck=function(e,t){return t.reduce(function(t,n){return e[n]&&(t[n]=e[n]),t},Object.create(null))},n.parseOptOut=
function(e,t,n){t||(t=n,e.d_optout&&e.d_optout instanceof Array&&(t=e.d_optout.join(",")));var i=parseInt(e.d_ottl,10);return isNaN(i)&&(i=7200),{optOut:t,d_ottl:i}},n.normalizeBoolean=function(e){var t=e;return"true"===e?t=!0:"false"===e&&(t=!1),t}}),V=(j.isObjectEmpty,j.isValueEmpty,j.getIeVersion,j.encodeAndBuildRequest,j.isObject,j.defineGlobalNamespace,j.pluck,j.parseOptOut,j.normalizeBoolean,n),H=E.MESSAGES,U={0:"prefix",1:"orgID",2:"state"},B=function(e,t){this.parse=function(e){try{var t=
{};return e.data.split("|").forEach(function(e,n){if(void 0!==e)t[U[n]]=2!==n?e:JSON.parse(e)}),t}catch(e){}},this.isInvalid=function(n){var i=this.parse(n);if(!i||Object.keys(i).length<2)return!0;var r=e!==i.orgID,a=!t||n.origin!==t,o=-1===Object.keys(H).indexOf(i.prefix);return r||a||o},this.send=function(n,i,r){var a=i+"|"+e;r&&r===Object(r)&&(a+="|"+JSON.stringify(r));try{n.postMessage(a,t)}catch(e){}}},G=E.MESSAGES,Y=function(e,t,n,i){function r(e){Object.assign(p,e)}function a(e){Object.assign(p.state,
e),Object.assign(p.state.ALLFIELDS,e),p.callbackRegistry.executeAll(p.state)}function o(e){if(!h.isInvalid(e)){m=!1;var t=h.parse(e);p.setStateAndPublish(t.state)}}function s(e){!m&&g&&(m=!0,h.send(i,e))}function l(){r(new L(n._generateID)),p.getMarketingCloudVisitorID(),p.callbackRegistry.executeAll(p.state,!0),_.removeEventListener("message",c)}function c(e){if(!h.isInvalid(e)){var t=h.parse(e);m=!1,_.clearTimeout(p._handshakeTimeout),_.removeEventListener("message",c),r(new F(p)),_.addEventListener("message",
o),p.setStateAndPublish(t.state),p.callbackRegistry.hasCallbacks()&&s(G.GETSTATE)}}function u(){g&&postMessage?(_.addEventListener("message",c),s(G.HANDSHAKE),p._handshakeTimeout=setTimeout(l,250)):l()}function d(){_.s_c_in||(_.s_c_il=[],_.s_c_in=0),p._c="Visitor",p._il=_.s_c_il,p._in=_.s_c_in,p._il[p._in]=p,_.s_c_in++}function f(){function e(e){0!==e.indexOf("_")&&"function"==typeof n[e]&&(p[e]=function(){})}Object.keys(n).forEach(e),p.getSupplementalDataID=n.getSupplementalDataID,p.isAllowed=function(){return!0}}
var p=this,g=t.whitelistParentDomain;p.state={ALLFIELDS:{}},p.version=n.version,p.marketingCloudOrgID=e,p.cookieDomain=n.cookieDomain||"",p._instanceType="child";var m=!1,h=new B(e,g);p.callbackRegistry=V(),p.init=function(){d(),f(),r(new x(p)),u()},p.findField=function(e,t){if(void 0!==p.state[e])return t(p.state[e]),p.state[e]},p.messageParent=s,p.setStateAndPublish=a},q=E.MESSAGES,X=E.ALL_APIS,W=E.ASYNC_API_MAP,J=E.FIELDGROUP_TO_FIELD,K=function(e,t){function n(){var t={};return Object.keys(X).forEach(function(n){var i=
X[n],r=e[i]();j.isValueEmpty(r)||(t[n]=r)}),t}function i(){var t=[];return e._loading&&Object.keys(e._loading).forEach(function(n){if(e._loading[n]){var i=J[n];t.push(i)}}),t.length?t:null}function r(t){return function n(r){var a=i();if(a){var o=W[a[0]];e[o](n,!0)}else t()}}function a(e,i){var r=n();t.send(e,i,r)}function o(e){l(e),a(e,q.HANDSHAKE)}function s(e){r(function(){a(e,q.PARENTSTATE)})()}function l(n){function i(i){r.call(e,i),t.send(n,q.PARENTSTATE,{CUSTOMERIDS:e.getCustomerIDs()})}var r=
e.setCustomerIDs;e.setCustomerIDs=i}return function(e){if(!t.isInvalid(e))(t.parse(e).prefix===q.HANDSHAKE?o:s)(e.source)}},z=function(e,t){function n(e){return function(n){i[e]=n,r++,r===a&&t(i)}}var i={},r=0,a=Object.keys(e).length;Object.keys(e).forEach(function(t){var i=e[t];if(i.fn){var r=i.args||[];r.unshift(n(t)),i.fn.apply(i.context||null,r)}})},Q={get:function(e){e=encodeURIComponent(e);var t=(";"+document.cookie).split(" ").join(";"),n=t.indexOf(";"+e+"\x3d"),i=n<0?n:t.indexOf(";",n+1);
return n<0?"":decodeURIComponent(t.substring(n+2+e.length,i<0?t.length:i))},set:function(e,t,n){var r=i(n,"cookieLifetime"),a=i(n,"expires"),o=i(n,"domain"),s=i(n,"secure"),l=s?"Secure":"";if(a&&"SESSION"!==r&&"NONE"!==r){var c=""!==t?parseInt(r||0,10):-60;if(c)a=new Date,a.setTime(a.getTime()+1E3*c);else if(1===a){a=new Date;var u=a.getYear();a.setYear(u+2+(u<1900?1900:0))}}else a=0;return e&&"NONE"!==r?(document.cookie=encodeURIComponent(e)+"\x3d"+encodeURIComponent(t)+"; path\x3d/;"+(a?" expires\x3d"+
a.toGMTString()+";":"")+(o?" domain\x3d"+o+";":"")+l,this.get(e)===t):0},remove:function(e,t){var n=i(t,"domain");n=n?" domain\x3d"+n+";":"",document.cookie=encodeURIComponent(e)+"\x3d; Path\x3d/; Expires\x3dThu, 01 Jan 1970 00:00:01 GMT;"+n}},$=function(e){var t;!e&&_.location&&(e=_.location.hostname),t=e;var n,i=t.split(".");for(n=i.length-2;n>=0;n--)if(t=i.slice(n).join("."),Q.set("test","cookie",{domain:t}))return Q.remove("test",{domain:t}),t;return""},Z={compare:s,isLessThan:function(e,t){return s(e,
t)<0},areVersionsDifferent:function(e,t){return 0!==s(e,t)},isGreaterThan:function(e,t){return s(e,t)>0},isEqual:function(e,t){return 0===s(e,t)}},ee=!!_.postMessage,te={postMessage:function(e,t,n){var i=1;t&&(ee?n.postMessage(e,t.replace(/([^:]+:\/\/[^\/]+).*/,"$1")):t&&(n.location=t.replace(/#.*$/,"")+"#"+ +new Date+i++ +"\x26"+e))},receiveMessage:function(e,t){var n;try{ee&&(e&&(n=function(n){if("string"==typeof t&&n.origin!==t||"[object Function]"===Object.prototype.toString.call(t)&&!1===t(n.origin))return!1;
e(n)}),_.addEventListener?_[e?"addEventListener":"removeEventListener"]("message",n):_[e?"attachEvent":"detachEvent"]("onmessage",n))}catch(e){}}},ne=function(e){var t,n,i="0123456789",r="",a="",o=8,s=10,l=10;if(1==e){for(i+="ABCDEF",t=0;16>t;t++)n=Math.floor(Math.random()*o),r+=i.substring(n,n+1),n=Math.floor(Math.random()*o),a+=i.substring(n,n+1),o=16;return r+"-"+a}for(t=0;19>t;t++)n=Math.floor(Math.random()*s),r+=i.substring(n,n+1),0===t&&9==n?s=3:(1==t||2==t)&&10!=s&&2>n?s=10:2<t&&(s=10),n=Math.floor(Math.random()*
l),a+=i.substring(n,n+1),0===t&&9==n?l=3:(1==t||2==t)&&10!=l&&2>n?l=10:2<t&&(l=10);return r+a},ie=function(e,t){return{corsMetadata:function(){var e="none",t=!0;return"undefined"!=typeof XMLHttpRequest&&XMLHttpRequest===Object(XMLHttpRequest)&&("withCredentials"in new XMLHttpRequest?e="XMLHttpRequest":"undefined"!=typeof XDomainRequest&&XDomainRequest===Object(XDomainRequest)&&(t=!1),Object.prototype.toString.call(_.HTMLElement).indexOf("Constructor")>0&&(t=!1)),{corsType:e,corsCookiesEnabled:t}}(),
getCORSInstance:function(){return"none"===this.corsMetadata.corsType?null:new _[this.corsMetadata.corsType]},fireCORS:function(t,n,i){function r(e){var n;try{if((n=JSON.parse(e))!==Object(n))return void a.handleCORSError(t,null,"Response is not JSON")}catch(e){return void a.handleCORSError(t,e,"Error parsing response as JSON")}try{for(var i=t.callback,r=_,o=0;o<i.length;o++)r=r[i[o]];r(n)}catch(e){a.handleCORSError(t,e,"Error forming callback function")}}var a=this;n&&(t.loadErrorHandler=n);try{var o=
this.getCORSInstance();o.open("get",t.corsUrl+"\x26ts\x3d"+(new Date).getTime(),!0),"XMLHttpRequest"===this.corsMetadata.corsType&&(o.withCredentials=!0,o.timeout=e.loadTimeout,o.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),o.onreadystatechange=function(){4===this.readyState&&200===this.status&&r(this.responseText)}),o.onerror=function(e){a.handleCORSError(t,e,"onerror")},o.ontimeout=function(e){a.handleCORSError(t,e,"ontimeout")},o.send(),e._log.requests.push(t.corsUrl)}catch(e){this.handleCORSError(t,
e,"try-catch")}},handleCORSError:function(t,n,i){e.CORSErrors.push({corsData:t,error:n,description:i}),t.loadErrorHandler&&("ontimeout"===i?t.loadErrorHandler(!0):t.loadErrorHandler(!1))}}},re={POST_MESSAGE_ENABLED:!!_.postMessage,DAYS_BETWEEN_SYNC_ID_CALLS:1,MILLIS_PER_DAY:864E5,ADOBE_MC:"adobe_mc",ADOBE_MC_SDID:"adobe_mc_sdid",VALID_VISITOR_ID_REGEX:/^[0-9a-fA-F\-]+$/,ADOBE_MC_TTL_IN_MIN:5,VERSION_REGEX:/vVersion\|((\d+\.)?(\d+\.)?(\*|\d+))(?=$|\|)/,FIRST_PARTY_SERVER_COOKIE:"s_ecid"},ae=function(e,
t){var n=_.document;return{THROTTLE_START:3E4,MAX_SYNCS_LENGTH:649,throttleTimerSet:!1,id:null,onPagePixels:[],iframeHost:null,getIframeHost:function(e){if("string"==typeof e){var t=e.split("/");return t[0]+"//"+t[2]}},subdomain:null,url:null,getUrl:function(){var t,i="http://fast.",r="?d_nsid\x3d"+e.idSyncContainerID+"#"+encodeURIComponent(n.location.origin);return this.subdomain||(this.subdomain="nosubdomainreturned"),e.loadSSL&&(i=e.idSyncSSLUseAkamai?"https://fast.":"https://"),t=i+this.subdomain+
".demdex.net/dest5.html"+r,this.iframeHost=this.getIframeHost(t),this.id="destination_publishing_iframe_"+this.subdomain+"_"+e.idSyncContainerID,t},checkDPIframeSrc:function(){var t="?d_nsid\x3d"+e.idSyncContainerID+"#"+encodeURIComponent(n.location.href);"string"==typeof e.dpIframeSrc&&e.dpIframeSrc.length&&(this.id="destination_publishing_iframe_"+(e._subdomain||this.subdomain||(new Date).getTime())+"_"+e.idSyncContainerID,this.iframeHost=this.getIframeHost(e.dpIframeSrc),this.url=e.dpIframeSrc+
t)},idCallNotProcesssed:null,doAttachIframe:!1,startedAttachingIframe:!1,iframeHasLoaded:null,iframeIdChanged:null,newIframeCreated:null,originalIframeHasLoadedAlready:null,iframeLoadedCallbacks:[],regionChanged:!1,timesRegionChanged:0,sendingMessages:!1,messages:[],messagesPosted:[],messagesReceived:[],messageSendingInterval:re.POST_MESSAGE_ENABLED?null:100,onPageDestinationsFired:[],jsonForComparison:[],jsonDuplicates:[],jsonWaiting:[],jsonProcessed:[],canSetThirdPartyCookies:!0,receivedThirdPartyCookiesNotification:!1,
readyToAttachIframePreliminary:function(){return!(e.idSyncDisableSyncs||e.disableIdSyncs||e.idSyncDisable3rdPartySyncing||e.disableThirdPartyCookies||e.disableThirdPartyCalls)},readyToAttachIframe:function(){return this.readyToAttachIframePreliminary()&&(this.doAttachIframe||e._doAttachIframe)&&(this.subdomain&&"nosubdomainreturned"!==this.subdomain||e._subdomain)&&this.url&&!this.startedAttachingIframe},attachIframe:function(){function e(){r=n.createElement("iframe"),r.sandbox="allow-scripts allow-same-origin",
r.title="Adobe ID Syncing iFrame",r.id=i.id,r.name=i.id+"_name",r.style.cssText="display: none; width: 0; height: 0;",r.src=i.url,i.newIframeCreated=!0,t(),n.body.appendChild(r)}function t(e){r.addEventListener("load",function(){r.className="aamIframeLoaded",i.iframeHasLoaded=!0,i.fireIframeLoadedCallbacks(e),i.requestToProcess()})}this.startedAttachingIframe=!0;var i=this,r=n.getElementById(this.id);r?"IFRAME"!==r.nodeName?(this.id+="_2",this.iframeIdChanged=!0,e()):(this.newIframeCreated=!1,"aamIframeLoaded"!==
r.className?(this.originalIframeHasLoadedAlready=!1,t("The destination publishing iframe already exists from a different library, but hadn't loaded yet.")):(this.originalIframeHasLoadedAlready=!0,this.iframeHasLoaded=!0,this.iframe=r,this.fireIframeLoadedCallbacks("The destination publishing iframe already exists from a different library, and had loaded alresady."),this.requestToProcess())):e(),this.iframe=r},fireIframeLoadedCallbacks:function(e){this.iframeLoadedCallbacks.forEach(function(t){"function"==
typeof t&&t({message:e||"The destination publishing iframe was attached and loaded successfully."})}),this.iframeLoadedCallbacks=[]},requestToProcess:function(t){function n(){r.jsonForComparison.push(t),r.jsonWaiting.push(t),r.processSyncOnPage(t)}var i,r=this;if(t===Object(t)&&t.ibs)if(i=JSON.stringify(t.ibs||[]),this.jsonForComparison.length){var a,o,s,l=!1;for(a=0,o=this.jsonForComparison.length;a<o;a++)if(s=this.jsonForComparison[a],i===JSON.stringify(s.ibs||[])){l=!0;break}l?this.jsonDuplicates.push(t):
n()}else n();if((this.receivedThirdPartyCookiesNotification||!re.POST_MESSAGE_ENABLED||this.iframeHasLoaded)&&this.jsonWaiting.length){var c=this.jsonWaiting.shift();this.process(c),this.requestToProcess()}e.idSyncDisableSyncs||e.disableIdSyncs||!this.iframeHasLoaded||!this.messages.length||this.sendingMessages||(this.throttleTimerSet||(this.throttleTimerSet=!0,setTimeout(function(){r.messageSendingInterval=re.POST_MESSAGE_ENABLED?null:150},this.THROTTLE_START)),this.sendingMessages=!0,this.sendMessages())},
getRegionAndCheckIfChanged:function(t,n){var i=e._getField("MCAAMLH"),r=t.d_region||t.dcs_region;return i?r&&(e._setFieldExpire("MCAAMLH",n),e._setField("MCAAMLH",r),parseInt(i,10)!==r&&(this.regionChanged=!0,this.timesRegionChanged++,e._setField("MCSYNCSOP",""),e._setField("MCSYNCS",""),i=r)):(i=r)&&(e._setFieldExpire("MCAAMLH",n),e._setField("MCAAMLH",i)),i||(i=""),i},processSyncOnPage:function(e){var t,n,i,r;if((t=e.ibs)&&t instanceof Array&&(n=t.length))for(i=0;i<n;i++)r=t[i],r.syncOnPage&&this.checkFirstPartyCookie(r,
"","syncOnPage")},process:function(e){var t,n,i,r,a,o=encodeURIComponent,s=!1;if((t=e.ibs)&&t instanceof Array&&(n=t.length))for(s=!0,i=0;i<n;i++)r=t[i],a=[o("ibs"),o(r.id||""),o(r.tag||""),j.encodeAndBuildRequest(r.url||[],","),o(r.ttl||""),"","",r.fireURLSync?"true":"false"],r.syncOnPage||(this.canSetThirdPartyCookies?this.addMessage(a.join("|")):r.fireURLSync&&this.checkFirstPartyCookie(r,a.join("|")));s&&this.jsonProcessed.push(e)},checkFirstPartyCookie:function(t,n,i){var r="syncOnPage"===i,
a=r?"MCSYNCSOP":"MCSYNCS";e._readVisitor();var o,s,l=e._getField(a),c=!1,u=!1,d=Math.ceil((new Date).getTime()/re.MILLIS_PER_DAY);l?(o=l.split("*"),s=this.pruneSyncData(o,t.id,d),c=s.dataPresent,u=s.dataValid,c&&u||this.fireSync(r,t,n,o,a,d)):(o=[],this.fireSync(r,t,n,o,a,d))},pruneSyncData:function(e,t,n){var i,r,a,o=!1,s=!1;for(r=0;r<e.length;r++)i=e[r],a=parseInt(i.split("-")[1],10),i.match("^"+t+"-")?(o=!0,n<a?s=!0:(e.splice(r,1),r--)):n>=a&&(e.splice(r,1),r--);return{dataPresent:o,dataValid:s}},
manageSyncsSize:function(e){if(e.join("*").length>this.MAX_SYNCS_LENGTH)for(e.sort(function(e,t){return parseInt(e.split("-")[1],10)-parseInt(t.split("-")[1],10)});e.join("*").length>this.MAX_SYNCS_LENGTH;)e.shift()},fireSync:function(t,n,i,r,a,o){var s=this;if(t){if("img"===n.tag){var l,c,u,d,f=n.url,p=e.loadSSL?"https:":"http:";for(l=0,c=f.length;l<c;l++){u=f[l],d=/^\/\//.test(u);var g=new Image;g.addEventListener("load",function(t,n,i,r){return function(){s.onPagePixels[t]=null,e._readVisitor();
var o,l=e._getField(a),c=[];if(l){o=l.split("*");var u,d,f;for(u=0,d=o.length;u<d;u++)f=o[u],f.match("^"+n.id+"-")||c.push(f)}s.setSyncTrackingData(c,n,i,r)}}(this.onPagePixels.length,n,a,o)),g.src=(d?p:"")+u,this.onPagePixels.push(g)}}}else this.addMessage(i),this.setSyncTrackingData(r,n,a,o)},addMessage:function(t){var n=encodeURIComponent,i=n(e._enableErrorReporting?"---destpub-debug---":"---destpub---");this.messages.push((re.POST_MESSAGE_ENABLED?"":i)+t)},setSyncTrackingData:function(t,n,i,r){t.push(n.id+
"-"+(r+Math.ceil(n.ttl/60/24))),this.manageSyncsSize(t),e._setField(i,t.join("*"))},sendMessages:function(){var e,t=this,n="",i=encodeURIComponent;this.regionChanged&&(n=i("---destpub-clear-dextp---"),this.regionChanged=!1),this.messages.length?re.POST_MESSAGE_ENABLED?(e=n+i("---destpub-combined---")+this.messages.join("%01"),this.postMessage(e),this.messages=[],this.sendingMessages=!1):(e=this.messages.shift(),this.postMessage(n+e),setTimeout(function(){t.sendMessages()},this.messageSendingInterval)):
this.sendingMessages=!1},postMessage:function(e){te.postMessage(e,this.url,this.iframe.contentWindow),this.messagesPosted.push(e)},receiveMessage:function(e){var t,n=/^---destpub-to-parent---/;"string"==typeof e&&n.test(e)&&(t=e.replace(n,"").split("|"),"canSetThirdPartyCookies"===t[0]&&(this.canSetThirdPartyCookies="true"===t[1],this.receivedThirdPartyCookiesNotification=!0,this.requestToProcess()),this.messagesReceived.push(e))},processIDCallData:function(i){(null==this.url||i.subdomain&&"nosubdomainreturned"===
this.subdomain)&&("string"==typeof e._subdomain&&e._subdomain.length?this.subdomain=e._subdomain:this.subdomain=i.subdomain||"",this.url=this.getUrl()),i.ibs instanceof Array&&i.ibs.length&&(this.doAttachIframe=!0),this.readyToAttachIframe()&&(e.idSyncAttachIframeOnWindowLoad?(t.windowLoaded||"complete"===n.readyState||"loaded"===n.readyState)&&this.attachIframe():this.attachIframeASAP()),"function"==typeof e.idSyncIDCallResult?e.idSyncIDCallResult(i):this.requestToProcess(i),"function"==typeof e.idSyncAfterIDCallResult&&
e.idSyncAfterIDCallResult(i)},canMakeSyncIDCall:function(t,n){return e._forceSyncIDCall||!t||n-t>re.DAYS_BETWEEN_SYNC_ID_CALLS},attachIframeASAP:function(){function e(){t.startedAttachingIframe||(n.body?t.attachIframe():setTimeout(e,30))}var t=this;e()}}},oe={audienceManagerServer:{},audienceManagerServerSecure:{},cookieDomain:{},cookieLifetime:{},cookieName:{},doesOptInApply:{},disableThirdPartyCalls:{},discardTrackingServerECID:{},idSyncAfterIDCallResult:{},idSyncAttachIframeOnWindowLoad:{},idSyncContainerID:{},
idSyncDisable3rdPartySyncing:{},disableThirdPartyCookies:{},idSyncDisableSyncs:{},disableIdSyncs:{},idSyncIDCallResult:{},idSyncSSLUseAkamai:{},isCoopSafe:{},isIabContext:{},isOptInStorageEnabled:{},loadSSL:{},loadTimeout:{},marketingCloudServer:{},marketingCloudServerSecure:{},optInCookieDomain:{},optInStorageExpiry:{},overwriteCrossDomainMCIDAndAID:{},preOptInApprovals:{},previousPermissions:{},resetBeforeVersion:{},sdidParamExpiry:{},serverState:{},sessionCookieName:{},secureCookie:{},takeTimeoutMetrics:{},
trackingServer:{},trackingServerSecure:{},whitelistIframeDomains:{},whitelistParentDomain:{}},se={getConfigNames:function(){return Object.keys(oe)},getConfigs:function(){return oe},normalizeConfig:function(e){return"function"!=typeof e?e:e()}},le=function(e){var t={};return e.on=function(e,n,i){if(!n||"function"!=typeof n)throw new Error("[ON] Callback should be a function.");t.hasOwnProperty(e)||(t[e]=[]);var r=t[e].push({callback:n,context:i})-1;return function(){t[e].splice(r,1),t[e].length||delete t[e]}},
e.off=function(e,n){t.hasOwnProperty(e)&&(t[e]=t[e].filter(function(e){if(e.callback!==n)return e}))},e.publish=function(e){if(t.hasOwnProperty(e)){var n=[].slice.call(arguments,1);t[e].slice(0).forEach(function(e){e.callback.apply(e.context,n)})}},e.publish},ce={PENDING:"pending",CHANGED:"changed",COMPLETE:"complete"},ue={AAM:"aam",ADCLOUD:"adcloud",ANALYTICS:"aa",CAMPAIGN:"campaign",ECID:"ecid",LIVEFYRE:"livefyre",TARGET:"target",VIDEO_ANALYTICS:"videoaa"},de=(C={},t(C,ue.AAM,565),t(C,ue.ECID,565),
C),fe=(I={},t(I,ue.AAM,[1,2,5]),t(I,ue.ECID,[1,2,5]),I),pe=function(e){return Object.keys(e).map(function(t){return e[t]})}(ue),ge=function(){var e={};return e.callbacks=Object.create(null),e.add=function(t,n){if(!c(n))throw new Error("[callbackRegistryFactory] Make sure callback is a function or an array of functions.");e.callbacks[t]=e.callbacks[t]||[];var i=e.callbacks[t].push(n)-1;return function(){e.callbacks[t].splice(i,1)}},e.execute=function(t,n){if(e.callbacks[t]){n=void 0===n?[]:n,n=n instanceof
Array?n:[n];try{for(;e.callbacks[t].length;){var i=e.callbacks[t].shift();"function"==typeof i?i.apply(null,n):i instanceof Array&&i[1].apply(i[0],n)}delete e.callbacks[t]}catch(e){}}},e.executeAll=function(t,n){(n||t&&!l(t))&&Object.keys(e.callbacks).forEach(function(n){var i=void 0!==t[n]?t[n]:"";e.execute(n,i)},e)},e.hasCallbacks=function(){return Boolean(Object.keys(e.callbacks).length)},e},me=function(){},he=function(e){var t=window,n=t.console;return!!n&&"function"==typeof n[e]},_e=function(e,
t,n){return n()?function(){if(he(e)){for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];console[e].apply(console,[t].concat(i))}}:me},Ce=u,Ie=new Ce("[ADOBE OPT-IN]"),ve=function(t,n){return e(t)===n},Se=function(e,t){return e instanceof Array?e:ve(e,"string")?[e]:t||[]},De=function(e){var t=Object.keys(e);return!!t.length&&t.every(function(t){return!0===e[t]})},Ae=function(e){return!(!e||Oe(e))&&Se(e).every(function(e){return pe.indexOf(e)>-1})},ye=function(e,t){return e.reduce(function(e,
n){return e[n]=t,e},{})},be=function(e){return JSON.parse(JSON.stringify(e))},Oe=function(e){return"[object Array]"===Object.prototype.toString.call(e)&&!e.length},Me=function(e){if(Te(e))return e;try{return JSON.parse(e)}catch(e){return{}}},ke=function(e){return void 0===e||(Te(e)?Ae(Object.keys(e)):Ee(e))},Ee=function(e){try{var t=JSON.parse(e);return!!e&&ve(e,"string")&&Ae(Object.keys(t))}catch(e){return!1}},Te=function(e){return null!==e&&ve(e,"object")&&!1===Array.isArray(e)},Le=function(){},
Pe=function(e){return ve(e,"function")?e():e},Re=function(e,t){ke(e)||Ie.error("".concat(t))},we=function(e){return Object.keys(e).map(function(t){return e[t]})},Fe=function(e){return we(e).filter(function(e,t,n){return n.indexOf(e)===t})},Ne=function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.command,i=t.params,r=void 0===i?{}:i,a=t.callback,o=void 0===a?Le:a;if(!n||-1===n.indexOf("."))throw new Error("[OptIn.execute] Please provide a valid command.");
try{var s=n.split("."),l=e[s[0]],c=s[1];if(!l||"function"!=typeof l[c])throw new Error("Make sure the plugin and API name exist.");var u=Object.assign(r,{callback:o});l[c].call(l,u)}catch(e){Ie.error("[execute] Something went wrong: "+e.message)}}};f.prototype=Object.create(Error.prototype),f.prototype.constructor=f;var xe="fetchPermissions",je="[OptIn#registerPlugin] Plugin is invalid.";p.Categories=ue,p.TimeoutError=f;var Ve=Object.freeze({OptIn:p,IabPlugin:h}),He=function(e,t){e.publishDestinations=
function(n){var i=arguments[1],r=arguments[2];try{r="function"==typeof r?r:n.callback}catch(e){r=function(){}}var a=t;if(!a.readyToAttachIframePreliminary())return void r({error:"The destination publishing iframe is disabled in the Visitor library."});if("string"==typeof n){if(!n.length)return void r({error:"subdomain is not a populated string."});if(!(i instanceof Array&&i.length))return void r({error:"messages is not a populated array."});var o=!1;if(i.forEach(function(e){"string"==typeof e&&e.length&&
(a.addMessage(e),o=!0)}),!o)return void r({error:"None of the messages are populated strings."})}else{if(!j.isObject(n))return void r({error:"Invalid parameters passed."});var s=n;if("string"!=typeof(n=s.subdomain)||!n.length)return void r({error:"config.subdomain is not a populated string."});var l=s.urlDestinations;if(!(l instanceof Array&&l.length))return void r({error:"config.urlDestinations is not a populated array."});var c=[];l.forEach(function(e){j.isObject(e)&&(e.hideReferrer?e.message&&
a.addMessage(e.message):c.push(e))});!function e(){c.length&&setTimeout(function(){var t=new Image,n=c.shift();t.src=n.url,a.onPageDestinationsFired.push(n),e()},100)}()}a.iframe?(r({message:"The destination publishing iframe is already attached and loaded."}),a.requestToProcess()):!e.subdomain&&e._getField("MCMID")?(a.subdomain=n,a.doAttachIframe=!0,a.url=a.getUrl(),a.readyToAttachIframe()?(a.iframeLoadedCallbacks.push(function(e){r({message:"Attempted to attach and load the destination publishing iframe through this API call. Result: "+
(e.message||"no result")})}),a.attachIframe()):r({error:"Encountered a problem in attempting to attach and load the destination publishing iframe through this API call."})):a.iframeLoadedCallbacks.push(function(e){r({message:"Attempted to attach and load the destination publishing iframe through normal Visitor API processing. Result: "+(e.message||"no result")})})}},Ue=function e(t){function n(e,t){return e>>>t|e<<32-t}for(var i,r,a=Math.pow,o=a(2,32),s="",l=[],c=8*t.length,u=e.h=e.h||[],d=e.k=e.k||
[],f=d.length,p={},g=2;f<64;g++)if(!p[g]){for(i=0;i<313;i+=g)p[i]=g;u[f]=a(g,.5)*o|0,d[f++]=a(g,1/3)*o|0}for(t+="\u0080";t.length%64-56;)t+="\x00";for(i=0;i<t.length;i++){if((r=t.charCodeAt(i))>>8)return;l[i>>2]|=r<<(3-i)%4*8}for(l[l.length]=c/o|0,l[l.length]=c,r=0;r<l.length;){var m=l.slice(r,r+=16),h=u;for(u=u.slice(0,8),i=0;i<64;i++){var _=m[i-15],C=m[i-2],I=u[0],v=u[4],S=u[7]+(n(v,6)^n(v,11)^n(v,25))+(v&u[5]^~v&u[6])+d[i]+(m[i]=i<16?m[i]:m[i-16]+(n(_,7)^n(_,18)^_>>>3)+m[i-7]+(n(C,17)^n(C,19)^
C>>>10)|0);u=[S+((n(I,2)^n(I,13)^n(I,22))+(I&u[1]^I&u[2]^u[1]&u[2]))|0].concat(u),u[4]=u[4]+S|0}for(i=0;i<8;i++)u[i]=u[i]+h[i]|0}for(i=0;i<8;i++)for(r=3;r+1;r--){var D=u[i]>>8*r&255;s+=(D<16?0:"")+D.toString(16)}return s},Be=function(e,t){return"SHA-256"!==t&&"SHA256"!==t&&"sha256"!==t&&"sha-256"!==t||(e=Ue(e)),e},Ge=function(e){return String(e).trim().toLowerCase()},Ye=Ve.OptIn;j.defineGlobalNamespace(),window.adobe.OptInCategories=Ye.Categories;var qe=function(t,n,i){function r(e){var t=e;return function(e){var n=
e||v.location.href;try{var i=g._extractParamFromUri(n,t);if(i)return w.parsePipeDelimetedKeyValues(i)}catch(e){}}}function a(e){function t(e,t,n){e&&e.match(re.VALID_VISITOR_ID_REGEX)&&(n===A&&(I=!0),t(e))}t(e[A],g.setMarketingCloudVisitorID,A),g._setFieldExpire(k,-1),t(e[O],g.setAnalyticsVisitorID)}function o(e){e=e||{},g._supplementalDataIDCurrent=e.supplementalDataIDCurrent||"",g._supplementalDataIDCurrentConsumed=e.supplementalDataIDCurrentConsumed||{},g._supplementalDataIDLast=e.supplementalDataIDLast||
"",g._supplementalDataIDLastConsumed=e.supplementalDataIDLastConsumed||{}}function s(e){function t(e,t,n){return n=n?n+="|":n,n+=e+"\x3d"+encodeURIComponent(t)}function n(e,n){var i=n[0],r=n[1];return null!=r&&r!==T&&(e=t(i,r,e)),e}var i=e.reduce(n,"");return function(e){var t=w.getTimestampInSeconds();return e=e?e+="|":e,e+="TS\x3d"+t}(i)}function l(e){var t=e.minutesToLive,n="";return(g.idSyncDisableSyncs||g.disableIdSyncs)&&(n=n||"Error: id syncs have been disabled"),"string"==typeof e.dpid&&e.dpid.length||
(n=n||"Error: config.dpid is empty"),"string"==typeof e.url&&e.url.length||(n=n||"Error: config.url is empty"),void 0===t?t=20160:(t=parseInt(t,10),(isNaN(t)||t<=0)&&(n=n||"Error: config.minutesToLive needs to be a positive number")),{error:n,ttl:t}}function c(){return!!g.configs.doesOptInApply&&!(m.optIn.isComplete&&u())}function u(){return g.configs.isIabContext?m.optIn.isApproved(m.optIn.Categories.ECID)&&C:m.optIn.isApproved(m.optIn.Categories.ECID)}function d(e,t){if(C=!0,e)throw new Error("[IAB plugin] : "+
e);t.gdprApplies&&(h=t.consentString),g.init(),p()}function f(){m.optIn.isApproved(m.optIn.Categories.ECID)&&(g.configs.isIabContext?m.optIn.execute({command:"iabPlugin.fetchConsentData",callback:d}):(g.init(),p()))}function p(){m.optIn.off("complete",f)}if(!i||i.split("").reverse().join("")!==t)throw new Error("Please use `Visitor.getInstance` to instantiate Visitor.");var g=this,m=window.adobe,h="",C=!1,I=!1;g.version="4.4.0";var v=_,S=v.Visitor;S.version=g.version,S.AuthState=E.AUTH_STATE,S.OptOut=
E.OPT_OUT,v.s_c_in||(v.s_c_il=[],v.s_c_in=0),g._c="Visitor",g._il=v.s_c_il,g._in=v.s_c_in,g._il[g._in]=g,v.s_c_in++,g._instanceType="regular",g._log={requests:[]},g.marketingCloudOrgID=t,g.cookieName="AMCV_"+t,g.sessionCookieName="AMCVS_"+t,g.cookieDomain=$(),g.loadSSL=v.location.protocol.toLowerCase().indexOf("https")>=0,g.loadTimeout=3E4,g.CORSErrors=[],g.marketingCloudServer=g.audienceManagerServer="dpm.demdex.net",g.sdidParamExpiry=30;var D=null,A="MCMID",y="MCIDTS",b="A",O="MCAID",M="AAM",k=
"MCAAMB",T="NONE",L=function(e){return!Object.prototype[e]},P=ie(g);g.FIELDS=E.FIELDS,g.cookieRead=function(e){return Q.get(e)},g.cookieWrite=function(e,t,n){var i=g.cookieLifetime?(""+g.cookieLifetime).toUpperCase():"",r=!1;return g.configs&&g.configs.secureCookie&&"https:"===location.protocol&&(r=!0),Q.set(e,""+t,{expires:n,domain:g.cookieDomain,cookieLifetime:i,secure:r})},g.resetState=function(e){e?g._mergeServerState(e):o()},g._isAllowedDone=!1,g._isAllowedFlag=!1,g.isAllowed=function(){return g._isAllowedDone||
(g._isAllowedDone=!0,(g.cookieRead(g.cookieName)||g.cookieWrite(g.cookieName,"T",1))&&(g._isAllowedFlag=!0)),"T"===g.cookieRead(g.cookieName)&&g._helpers.removeCookie(g.cookieName),g._isAllowedFlag},g.setMarketingCloudVisitorID=function(e){g._setMarketingCloudFields(e)},g._use1stPartyMarketingCloudServer=!1,g.getMarketingCloudVisitorID=function(e,t){g.marketingCloudServer&&g.marketingCloudServer.indexOf(".demdex.net")<0&&(g._use1stPartyMarketingCloudServer=!0);var n=g._getAudienceManagerURLData("_setMarketingCloudFields"),
i=n.url;return g._getRemoteField(A,i,e,t,n)},g.getVisitorValues=function(e,t){var n={MCMID:{fn:g.getMarketingCloudVisitorID,args:[!0],context:g},MCOPTOUT:{fn:g.isOptedOut,args:[void 0,!0],context:g},MCAID:{fn:g.getAnalyticsVisitorID,args:[!0],context:g},MCAAMLH:{fn:g.getAudienceManagerLocationHint,args:[!0],context:g},MCAAMB:{fn:g.getAudienceManagerBlob,args:[!0],context:g}},i=t&&t.length?j.pluck(n,t):n;z(i,e)},g._currentCustomerIDs={},g._customerIDsHashChanged=!1,g._newCustomerIDsHash="",g.setCustomerIDs=
function(t,n){function i(){g._customerIDsHashChanged=!1}if(!g.isOptedOut()&&t){if(!j.isObject(t)||j.isObjectEmpty(t))return!1;g._readVisitor();var r,a,o;for(r in t)if(L(r)&&(a=t[r],n=a.hasOwnProperty("hashType")?a.hashType:n,a))if("object"===e(a)){var s={};if(a.id){if(n){if(!(o=Be(Ge(a.id),n)))return;a.id=o,s.hashType=n}s.id=a.id}void 0!=a.authState&&(s.authState=a.authState),g._currentCustomerIDs[r]=s}else if(n){if(!(o=Be(Ge(a),n)))return;g._currentCustomerIDs[r]={id:o,hashType:n}}else g._currentCustomerIDs[r]=
{id:a};var l=g.getCustomerIDs(),c=g._getField("MCCIDH"),u="";c||(c=0);for(r in l)L(r)&&(a=l[r],u+=(u?"|":"")+r+"|"+(a.id?a.id:"")+(a.authState?a.authState:""));g._newCustomerIDsHash=String(g._hash(u)),g._newCustomerIDsHash!==c&&(g._customerIDsHashChanged=!0,g._mapCustomerIDs(i))}},g.getCustomerIDs=function(){g._readVisitor();var e,t,n={};for(e in g._currentCustomerIDs)L(e)&&(t=g._currentCustomerIDs[e],n[e]||(n[e]={}),t.id&&(n[e].id=t.id),void 0!=t.authState?n[e].authState=t.authState:n[e].authState=
S.AuthState.UNKNOWN,t.hashType&&(n[e].hashType=t.hashType));return n},g.setAnalyticsVisitorID=function(e){g._setAnalyticsFields(e)},g.getAnalyticsVisitorID=function(e,t,n){if(!w.isTrackingServerPopulated()&&!n)return g._callCallback(e,[""]),"";var i="";if(n||(i=g.getMarketingCloudVisitorID(function(t){g.getAnalyticsVisitorID(e,!0)})),i||n){var r=n?g.marketingCloudServer:g.trackingServer,a="";g.loadSSL&&(n?g.marketingCloudServerSecure&&(r=g.marketingCloudServerSecure):g.trackingServerSecure&&(r=g.trackingServerSecure));
var o={};if(r){var s="http"+(g.loadSSL?"s":"")+"://"+r+"/id",l="d_visid_ver\x3d"+g.version+"\x26mcorgid\x3d"+encodeURIComponent(g.marketingCloudOrgID)+(i?"\x26mid\x3d"+encodeURIComponent(i):"")+(g.idSyncDisable3rdPartySyncing||g.disableThirdPartyCookies?"\x26d_coppa\x3dtrue":""),c=["s_c_il",g._in,"_set"+(n?"MarketingCloud":"Analytics")+"Fields"];a=s+"?"+l+"\x26callback\x3ds_c_il%5B"+g._in+"%5D._set"+(n?"MarketingCloud":"Analytics")+"Fields",o.corsUrl=s+"?"+l,o.callback=c}return o.url=a,g._getRemoteField(n?
A:O,a,e,t,o)}return""},g.getAudienceManagerLocationHint=function(e,t){if(g.getMarketingCloudVisitorID(function(t){g.getAudienceManagerLocationHint(e,!0)})){var n=g._getField(O);if(!n&&w.isTrackingServerPopulated()&&(n=g.getAnalyticsVisitorID(function(t){g.getAudienceManagerLocationHint(e,!0)})),n||!w.isTrackingServerPopulated()){var i=g._getAudienceManagerURLData(),r=i.url;return g._getRemoteField("MCAAMLH",r,e,t,i)}}return""},g.getLocationHint=g.getAudienceManagerLocationHint,g.getAudienceManagerBlob=
function(e,t){if(g.getMarketingCloudVisitorID(function(t){g.getAudienceManagerBlob(e,!0)})){var n=g._getField(O);if(!n&&w.isTrackingServerPopulated()&&(n=g.getAnalyticsVisitorID(function(t){g.getAudienceManagerBlob(e,!0)})),n||!w.isTrackingServerPopulated()){var i=g._getAudienceManagerURLData(),r=i.url;return g._customerIDsHashChanged&&g._setFieldExpire(k,-1),g._getRemoteField(k,r,e,t,i)}}return""},g._supplementalDataIDCurrent="",g._supplementalDataIDCurrentConsumed={},g._supplementalDataIDLast="",
g._supplementalDataIDLastConsumed={},g.getSupplementalDataID=function(e,t){g._supplementalDataIDCurrent||t||(g._supplementalDataIDCurrent=g._generateID(1));var n=g._supplementalDataIDCurrent;return g._supplementalDataIDLast&&!g._supplementalDataIDLastConsumed[e]?(n=g._supplementalDataIDLast,g._supplementalDataIDLastConsumed[e]=!0):n&&(g._supplementalDataIDCurrentConsumed[e]&&(g._supplementalDataIDLast=g._supplementalDataIDCurrent,g._supplementalDataIDLastConsumed=g._supplementalDataIDCurrentConsumed,
g._supplementalDataIDCurrent=n=t?"":g._generateID(1),g._supplementalDataIDCurrentConsumed={}),n&&(g._supplementalDataIDCurrentConsumed[e]=!0)),n};var R=!1;g._liberatedOptOut=null,g.getOptOut=function(e,t){var n=g._getAudienceManagerURLData("_setMarketingCloudFields"),i=n.url;if(u())return g._getRemoteField("MCOPTOUT",i,e,t,n);if(g._registerCallback("liberatedOptOut",e),null!==g._liberatedOptOut)return g._callAllCallbacks("liberatedOptOut",[g._liberatedOptOut]),R=!1,g._liberatedOptOut;if(R)return null;
R=!0;var r="liberatedGetOptOut";return n.corsUrl=n.corsUrl.replace(/dpm\.demdex\.net\/id\?/,"dpm.demdex.net/optOutStatus?"),n.callback=[r],_[r]=function(e){if(e===Object(e)){var t,n,i=j.parseOptOut(e,t,T);t=i.optOut,n=1E3*i.d_ottl,g._liberatedOptOut=t,setTimeout(function(){g._liberatedOptOut=null},n)}g._callAllCallbacks("liberatedOptOut",[t]),R=!1},P.fireCORS(n),null},g.isOptedOut=function(e,t,n){t||(t=S.OptOut.GLOBAL);var i=g.getOptOut(function(n){var i=n===S.OptOut.GLOBAL||n.indexOf(t)>=0;g._callCallback(e,
[i])},n);return i?i===S.OptOut.GLOBAL||i.indexOf(t)>=0:null},g._fields=null,g._fieldsExpired=null,g._hash=function(e){var t,n,i=0;if(e)for(t=0;t<e.length;t++)n=e.charCodeAt(t),i=(i<<5)-i+n,i&=i;return i},g._generateID=ne,g._generateLocalMID=function(){var e=g._generateID(0);return N.isClientSideMarketingCloudVisitorID=!0,e},g._callbackList=null,g._callCallback=function(e,t){try{"function"==typeof e?e.apply(v,t):e[1].apply(e[0],t)}catch(e){}},g._registerCallback=function(e,t){t&&(null==g._callbackList&&
(g._callbackList={}),void 0==g._callbackList[e]&&(g._callbackList[e]=[]),g._callbackList[e].push(t))},g._callAllCallbacks=function(e,t){if(null!=g._callbackList){var n=g._callbackList[e];if(n)for(;n.length>0;)g._callCallback(n.shift(),t)}},g._addQuerystringParam=function(e,t,n,i){var r=encodeURIComponent(t)+"\x3d"+encodeURIComponent(n),a=w.parseHash(e),o=w.hashlessUrl(e);if(-1===o.indexOf("?"))return o+"?"+r+a;var s=o.split("?"),l=s[0]+"?",c=s[1];return l+w.addQueryParamAtLocation(c,r,i)+a},g._extractParamFromUri=
function(e,t){var n=new RegExp("[\\?\x26#]"+t+"\x3d([^\x26#]*)"),i=n.exec(e);if(i&&i.length)return decodeURIComponent(i[1])},g._parseAdobeMcFromUrl=r(re.ADOBE_MC),g._parseAdobeMcSdidFromUrl=r(re.ADOBE_MC_SDID),g._attemptToPopulateSdidFromUrl=function(e){var n=g._parseAdobeMcSdidFromUrl(e),i=1E9;n&&n.TS&&(i=w.getTimestampInSeconds()-n.TS),n&&n.SDID&&n.MCORGID===t&&i<g.sdidParamExpiry&&(g._supplementalDataIDCurrent=n.SDID,g._supplementalDataIDCurrentConsumed.SDID_URL_PARAM=!0)},g._attemptToPopulateIdsFromUrl=
function(){var e=g._parseAdobeMcFromUrl();if(e&&e.TS){var n=w.getTimestampInSeconds(),i=n-e.TS;if(Math.floor(i/60)>re.ADOBE_MC_TTL_IN_MIN||e.MCORGID!==t)return;a(e)}},g._mergeServerState=function(e){if(e)try{if(e=function(e){return w.isObject(e)?e:JSON.parse(e)}(e),e[g.marketingCloudOrgID]){var t=e[g.marketingCloudOrgID];!function(e){w.isObject(e)&&g.setCustomerIDs(e)}(t.customerIDs),o(t.sdid)}}catch(e){throw new Error("`serverState` has an invalid format.");}},g._timeout=null,g._loadData=function(e,
t,n,i){t=g._addQuerystringParam(t,"d_fieldgroup",e,1),i.url=g._addQuerystringParam(i.url,"d_fieldgroup",e,1),i.corsUrl=g._addQuerystringParam(i.corsUrl,"d_fieldgroup",e,1),N.fieldGroupObj[e]=!0,i===Object(i)&&i.corsUrl&&"XMLHttpRequest"===P.corsMetadata.corsType&&P.fireCORS(i,n,e)},g._clearTimeout=function(e){null!=g._timeout&&g._timeout[e]&&(clearTimeout(g._timeout[e]),g._timeout[e]=0)},g._settingsDigest=0,g._getSettingsDigest=function(){if(!g._settingsDigest){var e=g.version;g.audienceManagerServer&&
(e+="|"+g.audienceManagerServer),g.audienceManagerServerSecure&&(e+="|"+g.audienceManagerServerSecure),g._settingsDigest=g._hash(e)}return g._settingsDigest},g._readVisitorDone=!1,g._readVisitor=function(){if(!g._readVisitorDone){g._readVisitorDone=!0;var e,t,n,i,r,a,o=g._getSettingsDigest(),s=!1,l=g.cookieRead(g.cookieName),c=new Date;if(l||I||g.discardTrackingServerECID||(l=g.cookieRead(re.FIRST_PARTY_SERVER_COOKIE)),null==g._fields&&(g._fields={}),l&&"T"!==l)for(l=l.split("|"),l[0].match(/^[\-0-9]+$/)&&
(parseInt(l[0],10)!==o&&(s=!0),l.shift()),l.length%2==1&&l.pop(),e=0;e<l.length;e+=2)t=l[e].split("-"),n=t[0],i=l[e+1],t.length>1?(r=parseInt(t[1],10),a=t[1].indexOf("s")>0):(r=0,a=!1),s&&("MCCIDH"===n&&(i=""),r>0&&(r=c.getTime()/1E3-60)),n&&i&&(g._setField(n,i,1),r>0&&(g._fields["expire"+n]=r+(a?"s":""),(c.getTime()>=1E3*r||a&&!g.cookieRead(g.sessionCookieName))&&(g._fieldsExpired||(g._fieldsExpired={}),g._fieldsExpired[n]=!0)));!g._getField(O)&&w.isTrackingServerPopulated()&&(l=g.cookieRead("s_vi"))&&
(l=l.split("|"),l.length>1&&l[0].indexOf("v1")>=0&&(i=l[1],e=i.indexOf("["),e>=0&&(i=i.substring(0,e)),i&&i.match(re.VALID_VISITOR_ID_REGEX)&&g._setField(O,i)))}},g._appendVersionTo=function(e){var t="vVersion|"+g.version,n=e?g._getCookieVersion(e):null;return n?Z.areVersionsDifferent(n,g.version)&&(e=e.replace(re.VERSION_REGEX,t)):e+=(e?"|":"")+t,e},g._writeVisitor=function(){var e,t,n=g._getSettingsDigest();for(e in g._fields)L(e)&&g._fields[e]&&"expire"!==e.substring(0,6)&&(t=g._fields[e],n+=(n?
"|":"")+e+(g._fields["expire"+e]?"-"+g._fields["expire"+e]:"")+"|"+t);n=g._appendVersionTo(n),g.cookieWrite(g.cookieName,n,1)},g._getField=function(e,t){return null==g._fields||!t&&g._fieldsExpired&&g._fieldsExpired[e]?null:g._fields[e]},g._setField=function(e,t,n){null==g._fields&&(g._fields={}),g._fields[e]=t,n||g._writeVisitor()},g._getFieldList=function(e,t){var n=g._getField(e,t);return n?n.split("*"):null},g._setFieldList=function(e,t,n){g._setField(e,t?t.join("*"):"",n)},g._getFieldMap=function(e,
t){var n=g._getFieldList(e,t);if(n){var i,r={};for(i=0;i<n.length;i+=2)r[n[i]]=n[i+1];return r}return null},g._setFieldMap=function(e,t,n){var i,r=null;if(t){r=[];for(i in t)L(i)&&(r.push(i),r.push(t[i]))}g._setFieldList(e,r,n)},g._setFieldExpire=function(e,t,n){var i=new Date;i.setTime(i.getTime()+1E3*t),null==g._fields&&(g._fields={}),g._fields["expire"+e]=Math.floor(i.getTime()/1E3)+(n?"s":""),t<0?(g._fieldsExpired||(g._fieldsExpired={}),g._fieldsExpired[e]=!0):g._fieldsExpired&&(g._fieldsExpired[e]=
!1),n&&(g.cookieRead(g.sessionCookieName)||g.cookieWrite(g.sessionCookieName,"1"))},g._findVisitorID=function(t){return t&&("object"===e(t)&&(t=t.d_mid?t.d_mid:t.visitorID?t.visitorID:t.id?t.id:t.uuid?t.uuid:""+t),t&&"NOTARGET"===(t=t.toUpperCase())&&(t=T),t&&(t===T||t.match(re.VALID_VISITOR_ID_REGEX))||(t="")),t},g._setFields=function(t,n){if(g._clearTimeout(t),null!=g._loading&&(g._loading[t]=!1),N.fieldGroupObj[t]&&N.setState(t,!1),"MC"===t){!0!==N.isClientSideMarketingCloudVisitorID&&(N.isClientSideMarketingCloudVisitorID=
!1);var i=g._getField(A);if(!i||g.overwriteCrossDomainMCIDAndAID){if(!(i="object"===e(n)&&n.mid?n.mid:g._findVisitorID(n))){if(g._use1stPartyMarketingCloudServer&&!g.tried1stPartyMarketingCloudServer)return g.tried1stPartyMarketingCloudServer=!0,void g.getAnalyticsVisitorID(null,!1,!0);i=g._generateLocalMID()}g._setField(A,i)}i&&i!==T||(i=""),"object"===e(n)&&((n.d_region||n.dcs_region||n.d_blob||n.blob)&&g._setFields(M,n),g._use1stPartyMarketingCloudServer&&n.mid&&g._setFields(b,{id:n.id})),g._callAllCallbacks(A,
[i])}if(t===M&&"object"===e(n)){var r=604800;void 0!=n.id_sync_ttl&&n.id_sync_ttl&&(r=parseInt(n.id_sync_ttl,10));var a=F.getRegionAndCheckIfChanged(n,r);g._callAllCallbacks("MCAAMLH",[a]);var o=g._getField(k);(n.d_blob||n.blob)&&(o=n.d_blob,o||(o=n.blob),g._setFieldExpire(k,r),g._setField(k,o)),o||(o=""),g._callAllCallbacks(k,[o]),!n.error_msg&&g._newCustomerIDsHash&&g._setField("MCCIDH",g._newCustomerIDsHash)}if(t===b){var s=g._getField(O);s&&!g.overwriteCrossDomainMCIDAndAID||(s=g._findVisitorID(n),
s?s!==T&&g._setFieldExpire(k,-1):s=T,g._setField(O,s)),s&&s!==T||(s=""),g._callAllCallbacks(O,[s])}if(g.idSyncDisableSyncs||g.disableIdSyncs)F.idCallNotProcesssed=!0;else{F.idCallNotProcesssed=!1;var l={};l.ibs=n.ibs,l.subdomain=n.subdomain,F.processIDCallData(l)}if(n===Object(n)){var c,d;u()&&g.isAllowed()&&(c=g._getField("MCOPTOUT"));var f=j.parseOptOut(n,c,T);c=f.optOut,d=f.d_ottl,g._setFieldExpire("MCOPTOUT",d,!0),g._setField("MCOPTOUT",c),g._callAllCallbacks("MCOPTOUT",[c])}},g._loading=null,
g._getRemoteField=function(e,t,n,i,r){var a,o="",s=w.isFirstPartyAnalyticsVisitorIDCall(e),l={MCAAMLH:!0,MCAAMB:!0};if(u()&&g.isAllowed()){g._readVisitor(),o=g._getField(e,!0===l[e]);if(function(){return(!o||g._fieldsExpired&&g._fieldsExpired[e])&&(!g.disableThirdPartyCalls||s)}()){if(e===A||"MCOPTOUT"===e?a="MC":"MCAAMLH"===e||e===k?a=M:e===O&&(a=b),a)return!t||null!=g._loading&&g._loading[a]||(null==g._loading&&(g._loading={}),g._loading[a]=!0,g._loadData(a,t,function(t){if(!g._getField(e)){t&&
N.setState(a,!0);var n="";e===A?n=g._generateLocalMID():a===M&&(n={error_msg:"timeout"}),g._setFields(a,n)}},r)),g._registerCallback(e,n),o||(t||g._setFields(a,{id:T}),"")}else o||(e===A?(g._registerCallback(e,n),o=g._generateLocalMID(),g.setMarketingCloudVisitorID(o)):e===O?(g._registerCallback(e,n),o="",g.setAnalyticsVisitorID(o)):(o="",i=!0))}return e!==A&&e!==O||o!==T||(o="",i=!0),n&&i&&g._callCallback(n,[o]),o},g._setMarketingCloudFields=function(e){g._readVisitor(),g._setFields("MC",e)},g._mapCustomerIDs=
function(e){g.getAudienceManagerBlob(e,!0)},g._setAnalyticsFields=function(e){g._readVisitor(),g._setFields(b,e)},g._setAudienceManagerFields=function(e){g._readVisitor(),g._setFields(M,e)},g._getAudienceManagerURLData=function(e){var t=g.audienceManagerServer,n="",i=g._getField(A),r=g._getField(k,!0),a=g._getField(O),o=a&&a!==T?"\x26d_cid_ic\x3dAVID%01"+encodeURIComponent(a):"";if(g.loadSSL&&g.audienceManagerServerSecure&&(t=g.audienceManagerServerSecure),t){var s,l,c=g.getCustomerIDs();if(c)for(s in c)L(s)&&
(l=c[s],o+="\x26d_cid_ic\x3d"+encodeURIComponent(s)+"%01"+encodeURIComponent(l.id?l.id:"")+(l.authState?"%01"+l.authState:""));e||(e="_setAudienceManagerFields");var u="http"+(g.loadSSL?"s":"")+"://"+t+"/id",d="d_visid_ver\x3d"+g.version+(h&&-1!==u.indexOf("demdex.net")?"\x26gdpr\x3d1\x26gdpr_force\x3d1\x26gdpr_consent\x3d"+h:"")+"\x26d_rtbd\x3djson\x26d_ver\x3d2"+(!i&&g._use1stPartyMarketingCloudServer?"\x26d_verify\x3d1":"")+"\x26d_orgid\x3d"+encodeURIComponent(g.marketingCloudOrgID)+"\x26d_nsid\x3d"+
(g.idSyncContainerID||0)+(i?"\x26d_mid\x3d"+encodeURIComponent(i):"")+(g.idSyncDisable3rdPartySyncing||g.disableThirdPartyCookies?"\x26d_coppa\x3dtrue":"")+(!0===D?"\x26d_coop_safe\x3d1":!1===D?"\x26d_coop_unsafe\x3d1":"")+(r?"\x26d_blob\x3d"+encodeURIComponent(r):"")+o,f=["s_c_il",g._in,e];return n=u+"?"+d+"\x26d_cb\x3ds_c_il%5B"+g._in+"%5D."+e,{url:n,corsUrl:u+"?"+d,callback:f}}return{url:n}},g.appendVisitorIDsTo=function(e){try{var t=[[A,g._getField(A)],[O,g._getField(O)],["MCORGID",g.marketingCloudOrgID]];
return g._addQuerystringParam(e,re.ADOBE_MC,s(t))}catch(t){return e}},g.appendSupplementalDataIDTo=function(e,t){if(!(t=t||g.getSupplementalDataID(w.generateRandomString(),!0)))return e;try{var n=s([["SDID",t],["MCORGID",g.marketingCloudOrgID]]);return g._addQuerystringParam(e,re.ADOBE_MC_SDID,n)}catch(t){return e}};var w={parseHash:function(e){var t=e.indexOf("#");return t>0?e.substr(t):""},hashlessUrl:function(e){var t=e.indexOf("#");return t>0?e.substr(0,t):e},addQueryParamAtLocation:function(e,
t,n){var i=e.split("\x26");return n=null!=n?n:i.length,i.splice(n,0,t),i.join("\x26")},isFirstPartyAnalyticsVisitorIDCall:function(e,t,n){if(e!==O)return!1;var i;return t||(t=g.trackingServer),n||(n=g.trackingServerSecure),!("string"!=typeof(i=g.loadSSL?n:t)||!i.length)&&(i.indexOf("2o7.net")<0&&i.indexOf("omtrdc.net")<0)},isObject:function(e){return Boolean(e&&e===Object(e))},removeCookie:function(e){Q.remove(e,{domain:g.cookieDomain})},isTrackingServerPopulated:function(){return!!g.trackingServer||
!!g.trackingServerSecure},getTimestampInSeconds:function(){return Math.round((new Date).getTime()/1E3)},parsePipeDelimetedKeyValues:function(e){return e.split("|").reduce(function(e,t){var n=t.split("\x3d");return e[n[0]]=decodeURIComponent(n[1]),e},{})},generateRandomString:function(e){e=e||5;for(var t="",n="abcdefghijklmnopqrstuvwxyz0123456789";e--;)t+=n[Math.floor(Math.random()*n.length)];return t},normalizeBoolean:function(e){return"true"===e||"false"!==e&&e},parseBoolean:function(e){return"true"===
e||"false"!==e&&null},replaceMethodsWithFunction:function(e,t){for(var n in e)e.hasOwnProperty(n)&&"function"==typeof e[n]&&(e[n]=t);return e}};g._helpers=w;var F=ae(g,S);g._destinationPublishing=F,g.timeoutMetricsLog=[];var N={isClientSideMarketingCloudVisitorID:null,MCIDCallTimedOut:null,AnalyticsIDCallTimedOut:null,AAMIDCallTimedOut:null,fieldGroupObj:{},setState:function(e,t){switch(e){case "MC":!1===t?!0!==this.MCIDCallTimedOut&&(this.MCIDCallTimedOut=!1):this.MCIDCallTimedOut=t;break;case b:!1===
t?!0!==this.AnalyticsIDCallTimedOut&&(this.AnalyticsIDCallTimedOut=!1):this.AnalyticsIDCallTimedOut=t;break;case M:!1===t?!0!==this.AAMIDCallTimedOut&&(this.AAMIDCallTimedOut=!1):this.AAMIDCallTimedOut=t}}};g.isClientSideMarketingCloudVisitorID=function(){return N.isClientSideMarketingCloudVisitorID},g.MCIDCallTimedOut=function(){return N.MCIDCallTimedOut},g.AnalyticsIDCallTimedOut=function(){return N.AnalyticsIDCallTimedOut},g.AAMIDCallTimedOut=function(){return N.AAMIDCallTimedOut},g.idSyncGetOnPageSyncInfo=
function(){return g._readVisitor(),g._getField("MCSYNCSOP")},g.idSyncByURL=function(e){if(!g.isOptedOut()){var t=l(e||{});if(t.error)return t.error;var n,i,r=e.url,a=encodeURIComponent,o=F;return r=r.replace(/^https:/,"").replace(/^http:/,""),n=j.encodeAndBuildRequest(["",e.dpid,e.dpuuid||""],","),i=["ibs",a(e.dpid),"img",a(r),t.ttl,"",n],o.addMessage(i.join("|")),o.requestToProcess(),"Successfully queued"}},g.idSyncByDataSource=function(e){if(!g.isOptedOut())return e===Object(e)&&"string"==typeof e.dpuuid&&
e.dpuuid.length?(e.url="//dpm.demdex.net/ibs:dpid\x3d"+e.dpid+"\x26dpuuid\x3d"+e.dpuuid,g.idSyncByURL(e)):"Error: config or config.dpuuid is empty"},He(g,F),g._getCookieVersion=function(e){e=e||g.cookieRead(g.cookieName);var t=re.VERSION_REGEX.exec(e);return t&&t.length>1?t[1]:null},g._resetAmcvCookie=function(e){var t=g._getCookieVersion();t&&!Z.isLessThan(t,e)||w.removeCookie(g.cookieName)},g.setAsCoopSafe=function(){D=!0},g.setAsCoopUnsafe=function(){D=!1},function(){if(g.configs=Object.create(null),
w.isObject(n))for(var e in n)L(e)&&(g[e]=n[e],g.configs[e]=n[e])}(),function(){[["getMarketingCloudVisitorID"],["setCustomerIDs",void 0],["getAnalyticsVisitorID"],["getAudienceManagerLocationHint"],["getLocationHint"],["getAudienceManagerBlob"]].forEach(function(e){var t=e[0],n=2===e.length?e[1]:"",i=g[t];g[t]=function(e){return u()&&g.isAllowed()?i.apply(g,arguments):("function"==typeof e&&g._callCallback(e,[n]),n)}})}(),g.init=function(){if(c())return m.optIn.fetchPermissions(f,!0);!function(){if(w.isObject(n)){g.idSyncContainerID=
g.idSyncContainerID||0,D="boolean"==typeof g.isCoopSafe?g.isCoopSafe:w.parseBoolean(g.isCoopSafe),g.resetBeforeVersion&&g._resetAmcvCookie(g.resetBeforeVersion),g._attemptToPopulateIdsFromUrl(),g._attemptToPopulateSdidFromUrl(),g._readVisitor();var e=g._getField(y),t=Math.ceil((new Date).getTime()/re.MILLIS_PER_DAY);g.idSyncDisableSyncs||g.disableIdSyncs||!F.canMakeSyncIDCall(e,t)||(g._setFieldExpire(k,-1),g._setField(y,t)),g.getMarketingCloudVisitorID(),g.getAudienceManagerLocationHint(),g.getAudienceManagerBlob(),
g._mergeServerState(g.serverState)}else g._attemptToPopulateIdsFromUrl(),g._attemptToPopulateSdidFromUrl()}(),function(){if(!g.idSyncDisableSyncs&&!g.disableIdSyncs){F.checkDPIframeSrc();var e=function(){var e=F;e.readyToAttachIframe()&&e.attachIframe()};v.addEventListener("load",function(){S.windowLoaded=!0,e()});try{te.receiveMessage(function(e){F.receiveMessage(e.data)},F.iframeHost)}catch(e){}}}(),function(){g.whitelistIframeDomains&&re.POST_MESSAGE_ENABLED&&(g.whitelistIframeDomains=g.whitelistIframeDomains instanceof
Array?g.whitelistIframeDomains:[g.whitelistIframeDomains],g.whitelistIframeDomains.forEach(function(e){var n=new B(t,e),i=K(g,n);te.receiveMessage(i,e)}))}()}};qe.config=se,_.Visitor=qe;var Xe=qe,We=function(e){if(j.isObject(e))return Object.keys(e).filter(function(t){return""!==e[t]}).reduce(function(t,n){var i="doesOptInApply"!==n?e[n]:se.normalizeConfig(e[n]),r=j.normalizeBoolean(i);return t[n]=r,t},Object.create(null))},Je=Ve.OptIn,Ke=Ve.IabPlugin;return Xe.getInstance=function(e,t){if(!e)throw new Error("Visitor requires Adobe Marketing Cloud Org ID.");
e.indexOf("@")<0&&(e+="@AdobeOrg");var n=function(){var t=_.s_c_il;if(t)for(var n=0;n<t.length;n++){var i=t[n];if(i&&"Visitor"===i._c&&i.marketingCloudOrgID===e)return i}}();if(n)return n;var i=We(t);!function(e){_.adobe.optIn=_.adobe.optIn||function(){var t=j.pluck(e,["doesOptInApply","previousPermissions","preOptInApprovals","isOptInStorageEnabled","optInStorageExpiry","isIabContext"]),n=e.optInCookieDomain||e.cookieDomain;n=n||$(),n=n===window.location.hostname?"":n,t.optInCookieDomain=n;var i=
new Je(t,{cookies:Q});if(t.isIabContext){var r=new Ke(window.__cmp);i.registerPlugin(r)}return i}()}(i||{});var r=e,a=r.split("").reverse().join(""),o=new Xe(e,null,a);j.isObject(i)&&i.cookieDomain&&(o.cookieDomain=i.cookieDomain),function(){_.s_c_il.splice(--_.s_c_in,1)}();var s=j.getIeVersion();if("number"==typeof s&&s<10)return o._helpers.replaceMethodsWithFunction(o,function(){});var l=function(){try{return _.self!==_.parent}catch(e){return!0}}()&&!function(e){return e.cookieWrite("TEST_AMCV_COOKIE",
"T",1),"T"===e.cookieRead("TEST_AMCV_COOKIE")&&(e._helpers.removeCookie("TEST_AMCV_COOKIE"),!0)}(o)&&_.parent?new Y(e,i,o,_.parent):new Xe(e,i,a);return o=null,l.init(),l},function(){function e(){Xe.windowLoaded=!0}_.addEventListener?_.addEventListener("load",e):_.attachEvent&&_.attachEvent("onload",e),Xe.codeLoadEnd=(new Date).getTime()}(),Xe}();window.Visitor=Visitor;if((window.location.host.search("abo")>-1||window.location.host.search("login")>-1)&&dS.cfg.amc.target.enabled==false)if(document.readyState==
"complete")document.body.classList.remove("at-loading");else window.addEventListener("DOMContentLoaded",function(){document.body.classList.remove("at-loading")});if(typeof window.__cmp!="undefined"){var vCons=window.__cmp("getCMPData");if(vCons!=null&&vCons.hasOwnProperty("vendorConsents")&&Object.keys(vCons.vendorConsents).length>0)createAdobeVisitor();else __cmp("addEventListener",["consent",createAdobeVisitor,false],null);__cmp("addEventListener",["consentscreenoff",createAdobeVisitor,false],null)}else createAdobeVisitor();
function createAdobeVisitor(){var preOptInApprovalsConfig={};preOptInApprovalsConfig[adobe.OptInCategories.ANALYTICS]=false;preOptInApprovalsConfig[adobe.OptInCategories.TARGET]=false;preOptInApprovalsConfig[adobe.OptInCategories.AAM]=false;preOptInApprovalsConfig[adobe.OptInCategories.ECID]=false;if(typeof window.__cmp!="undefined"&&window.__cmp("getCMPData").gdprApplies===false){dS.cfg.cmp.gdprApplies=false;preOptInApprovalsConfig[adobe.OptInCategories.ANALYTICS]=true;preOptInApprovalsConfig[adobe.OptInCategories.TARGET]=
true;preOptInApprovalsConfig[adobe.OptInCategories.AAM]=true;preOptInApprovalsConfig[adobe.OptInCategories.ECID]=true}var visitor=Visitor.getInstance("41600C3A53DF55A50A490D4D@AdobeOrg",{trackingServer:"nzz.d3.sc.omtrdc.net",trackingServerSecure:"nzz.d3.sc.omtrdc.net",doesOptInApply:window.dS.cfg.cmp.gdprApplies,preOptInApprovals:preOptInApprovalsConfig});window.visitor=visitor;if(typeof window.__cmp!="undefined"&&window.__cmp("getCMPData").gdprApplies===true){if(window.__cmp("getCMPData").vendorConsents.hasOwnProperty("s981")&&
window.__cmp("getCMPData").vendorConsents["s981"]===true){adobe.optIn.approve(adobe.OptInCategories.ANALYTICS,true);adobe.optIn.approve(adobe.OptInCategories.TARGET,true);adobe.optIn.approve(adobe.OptInCategories.AAM,true);adobe.optIn.approve(adobe.OptInCategories.ECID,true);adobe.optIn.complete();dS.cfg.amc.analytics.consent=true;if((window.location.host.search("abo")>-1||window.location.host.search("login")>-1)&&dS.cfg.amc.target.enabled==true&&dS.cfg.amc.target.loaded!==true)Bootstrapper.loadScriptCallback("https://abo.nzz.ch/wp-content/themes/niobe/cms/assets/scripts/at.js",
function(){document.body.classList.remove("at-loading");dS.cfg.amc.target.loaded=true})}else{adobe.optIn.deny(adobe.OptInCategories.ANALYTICS,true);adobe.optIn.deny(adobe.OptInCategories.TARGET,true);adobe.optIn.deny(adobe.OptInCategories.AAM,true);adobe.optIn.deny(adobe.OptInCategories.ECID,true);adobe.optIn.complete();dS.cfg.amc.analytics.consent=false;if(window.location.host.search("abo")>-1||window.location.host.search("login")>-1)document.body.classList.remove("at-loading")}if(typeof adobe!=
"undefined"&&adobe.hasOwnProperty("target")&&dS.cfg.amc.lastPageID!=digitalData.page.pageInfo.pageID&&dS.cfg.amc.analytics.consent==true&&(window.location.host.search("abo")==-1||window.location.host.search("login")==-1)){DANZZ.adobeTargetView();dS.cfg.amc.lastPageID=digitalData.page.pageInfo.pageID}}else{adobe.optIn.approve(adobe.OptInCategories.ANALYTICS,true);adobe.optIn.approve(adobe.OptInCategories.TARGET,true);adobe.optIn.approve(adobe.OptInCategories.AAM,true);adobe.optIn.approve(adobe.OptInCategories.ECID,
true);adobe.optIn.complete();dS.cfg.amc.analytics.consent=true;if((window.location.host.search("abo")>-1||window.location.host.search("login")>-1)&&dS.cfg.amc.target.enabled==true&&dS.cfg.amc.target.loaded!==true)Bootstrapper.loadScriptCallback("https://abo.nzz.ch/wp-content/themes/niobe/cms/assets/scripts/at.js",function(){document.body.classList.remove("at-loading");dS.cfg.amc.target.loaded=true});if(typeof adobe!="undefined"&&adobe.hasOwnProperty("target")&&dS.cfg.amc.lastPageID!=digitalData.page.pageInfo.pageID&&
dS.cfg.amc.analytics.consent==true&&(window.location.host.search("abo")==-1||window.location.host.search("login")==-1)){DANZZ.adobeTargetView();dS.cfg.amc.lastPageID=digitalData.page.pageInfo.pageID}}}};vIDSetup.call(window)},120677105,[120677101],120677205,[120677201])},3715326,[3738607,3715294],413139,[430195,587003],24);
Bootstrapper.bindDependencyImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;window.DANZZ=window.DANZZ||{};DANZZ.getAuthorName=function(){try{if(DANZZ.getNested(digitalData,"component[0].attributes.author[0].authorName","typeof")=="object")return digitalData.component[0].attributes.author[0].authorName.firstName+" "+digitalData.component[0].attributes.author[0].authorName.lastName;else return DANZZ.getNested(digitalData,"component[0].attributes.author[0].authorName",
"value")}catch(e){DANZZ.loggr("TMS ERROR gAN: "+e.message,0)}};DANZZ.getC1SessionID=function(){try{if(DANZZ.getNested(digitalData,"user[0].profile[0].attributes.c1.sessionID","value"))return digitalData.user[0].profile[0].attributes.c1.sessionID;else if(DANZZ.getNested(digitalData,"user[0].attributes.c1.sessionID","value"))return digitalData.user[0].attributes.c1.sessionID;else return""}catch(e){DANZZ.loggr("TMS ERROR gC1ID: "+e.message,0)}};DANZZ.getC1TrackingID=function(){try{if(DANZZ.getNested(digitalData,
"user[0].profile[0].attributes.c1.trackingID","value"))return digitalData.user[0].profile[0].attributes.c1.trackingID;else if(DANZZ.getNested(digitalData,"user[0].attributes.c1.sessionID","value"))return digitalData.user[0].attributes.c1.trackingID;else return""}catch(e){DANZZ.loggr("TMS ERROR gC1TID: "+e.message,0)}};DANZZ.getProfileID=function(){try{return DANZZ.getNested(digitalData,"user[0].profile[0].profileInfo.profileID","value")}catch(e){DANZZ.loggr("TMS ERROR gPI: "+e.message,0)}};DANZZ.getMostRecentProfileID=
function(){try{var today=new Date;var cookieExpDate=new Date(today);cookieExpDate.setDate(today.getDate()+3650);if(DANZZ.getNested(digitalData,"user[0].profile[0].profileInfo.profileID","value")){Bootstrapper.Cookies.set("ens_c1pid",digitalData.user[0].profile[0].profileInfo.profileID,cookieExpDate);return digitalData.user[0].profile[0].profileInfo.profileID}else if(Bootstrapper.Cookies.test("ens_c1pid"))return Bootstrapper.Cookies.get("ens_c1pid");else return""}catch(e){DANZZ.loggr("TMS ERROR gMRPI: "+
e.message,0)}};DANZZ.getMostRecentTrackingCode=function(){try{var today=new Date;var cookieExpDate=new Date(today);cookieExpDate.setDate(today.getDate()+90);if(DANZZ.getURLParam("trco","param")!==""){Bootstrapper.Cookies.set("ens_trco",DANZZ.getURLParam("trco","param"),cookieExpDate);return DANZZ.getURLParam("trco","param")}else if(DANZZ.getURLParam("KAVZ","param")!==""){Bootstrapper.Cookies.set("ens_trco",DANZZ.getURLParam("KAVZ","param"),cookieExpDate);return DANZZ.getURLParam("KAVZ","param")}else if(Bootstrapper.Cookies.test("ens_trco"))return Bootstrapper.Cookies.get("ens_trco");
else return""}catch(e){DANZZ.loggr("TMS ERROR gMRTC: "+e.message,0)}};DANZZ.getMostRecentInternalPromotionClickthrough=function(){try{var today=new Date;var cookieExpDate=new Date(today);cookieExpDate.setDate(today.getDate()+90);if(DANZZ.getURLParam("intpro","param")!==""){Bootstrapper.Cookies.set("ens_intpro",DANZZ.getURLParam("intpro","param"),cookieExpDate);return DANZZ.getURLParam("intpro","param")}else if(Bootstrapper.Cookies.test("ens_intpro"))return Bootstrapper.Cookies.get("ens_intpro");else return""}catch(e){DANZZ.loggr("TMS ERROR gMRIPC: "+
e.message,0)}};DANZZ.getMostRecentMarketingChannelID=function(){try{var today=new Date;var cookieExpDate=new Date(today);cookieExpDate.setDate(today.getDate()+90);if(DANZZ.getURLParam("mktcid","param")!==""){Bootstrapper.Cookies.set("ens_mktcid",DANZZ.getURLParam("mktcid","param"),cookieExpDate);return DANZZ.getURLParam("mktcid","param")}else if(Bootstrapper.Cookies.test("ens_mktcid"))return Bootstrapper.Cookies.get("ens_mktcid");else return""}catch(e){DANZZ.loggr("TMS ERROR gMRMCID: "+e.message,
0)}};DANZZ.getMostRecentMarketingChannelValue=function(){try{var today=new Date;var cookieExpDate=new Date(today);cookieExpDate.setDate(today.getDate()+90);if(DANZZ.getURLParam("mktcval","param")!==""){Bootstrapper.Cookies.set("ens_mktcval",DANZZ.getURLParam("mktcval","param"),cookieExpDate);return DANZZ.getURLParam("mktcval","param")}else if(Bootstrapper.Cookies.test("ens_mktcval"))return Bootstrapper.Cookies.get("ens_mktcval");else return""}catch(e){DANZZ.loggr("TMS ERROR gMRMCV: "+e.message,0)}};
DANZZ.getSubscriptionStatus=function(){try{var subscriptionStatus="";if(DANZZ.getNested(digitalData,"user[0].profile[0].profileInfo.profileID","length")>0&&DANZZ.getNested(digitalData,"user[0].profile[0].attributes.c1.subscriptionStatus","value")!==""){subscriptionStatus=digitalData.user[0].profile[0].attributes.c1.subscriptionStatus;if(subscriptionStatus=="true"||subscriptionStatus===true)subscriptionStatus="active";else if(subscriptionStatus=="false"||subscriptionStatus===false)subscriptionStatus=
"inactive"}return subscriptionStatus}catch(e){DANZZ.loggr("TMS ERROR gSS: "+e.message,0)}};DANZZ.getSubscriptionStatusStore=function(){try{var subscriptionStatusStore="";if(DANZZ.getNested(digitalData,"user[0].profile[0].profileInfo.profileID","length")>0){subscriptionStatusStore=DANZZ.getNested(digitalData,"user[0].profile[0].attributes.c1.subscriptionStatusStore","value");if((subscriptionStatusStore=="true"||subscriptionStatusStore===true)&&(DANZZ.getNested(digitalData,"user[0].profile[0].attributes.c1.subscriptionStatus",
"value")===true||DANZZ.getNested(digitalData,"user[0].profile[0].attributes.c1.subscriptionStatus","value")=="true"))subscriptionStatusStore="active";else{var hasTrial=DANZZ.getNested(digitalData,"user[0].profile[0].attributes.c1.hasTrial","value");if(hasTrial=="true"||hasTrial===true)subscriptionStatusStore="trial";else subscriptionStatusStore="inactive"}}if(subscriptionStatusStore.length>0)return(DANZZ.getNested(digitalData,"page.attributes.c1.storeID","value")||"Unknown Store ID")+":"+subscriptionStatusStore;
else return""}catch(e){DANZZ.loggr("TMS ERROR gSSS1: "+e.message,0)}};DANZZ.getSubscriptionStatusSite=function(){try{var subscriptionStatusSite="";if(DANZZ.getNested(digitalData,"user[0].profile[0].profileInfo.profileID","length")>0&&DANZZ.getNested(digitalData,"user[0].profile[0].attributes.c1.subscriptionStatusSite","value")!=="")subscriptionStatusSite=digitalData.user[0].profile[0].attributes.c1.subscriptionStatusSite;else subscriptionStatusSite="none";return subscriptionStatusSite}catch(e){DANZZ.loggr("TMS ERROR gSSS2: "+
e.message,0)}};DANZZ.getC1Geo=function(){try{var c1Geo=DANZZ.getNested(digitalData,"user[0].profile[0].attributes.c1.clientCountryCode","value")+"|"+DANZZ.getNested(digitalData,"user[0].profile[0].attributes.c1.clientRegionCode","value");c1Geo=c1Geo.replace("null","");if(c1Geo.length>1)return c1Geo;else return""}catch(e){DANZZ.loggr("TMS ERROR gC1G: "+e.message,0)}};DANZZ.getComponentID=function(){try{var value=DANZZ.getNested(digitalData,"component[0].componentInfo.componentID","value");var cmsClient=
DANZZ.getNested(digitalData,"page.attributes.cms.client","value");var publishClient=dS.ingress.publishPath.split("-")[1];if(!cmsClient){var publishPathArray=["nzz","nzznews","blv","nzzas","nlz","nlznews","sgt","sgtnews","m","aaz","aaznews","bat","batnews","bzb","bzbnews","gtb","gtbnews","liz","liznews","olt","oltnews","saw","sawnews","soz","soznews"];if(publishPathArray.indexOf(publishClient)>-1){var cmsClientArray={nzz:"nzz",nzznews:"nzz",blv:"nzz",nzzas:"nzz",nlz:"chmedia",nlznews:"chmedia",sgt:"chmedia",
sgtnews:"chmedia",aaz:"chmedia",aaznews:"chmedia",bat:"chmedia",batnews:"chmedia",bzb:"chmedia",bzbnews:"chmedia",gtb:"chmedia",gtbnews:"chmedia",liz:"chmedia",liznews:"chmedia",olt:"chmedia",oltnews:"chmedia",saw:"chmedia",sawnews:"chmedia",soz:"chmedia",soznews:"chmedia",m:"market"};cmsClient=cmsClientArray[publishClient]}else cmsClient=publishClient}if(new Date(DANZZ.getNested(digitalData,"component[0].attributes.issueTimestamp","value").substring(0,10))>=new Date("2019-01-01")&&cmsClient)value+=
":"+cmsClient;return value}catch(e){DANZZ.loggr("TMS ERROR gCID: "+e.message,0)}};DANZZ.getCatchHead=function(){try{if(DANZZ.getNested(digitalData,"component[0].category.componentType","value")=="article")return DANZZ.getNested(digitalData,"component[0].attributes.catchline","value")+"|"+DANZZ.getNested(digitalData,"component[0].attributes.headline","value");else return""}catch(e){DANZZ.loggr("TMS ERROR gCH1: "+e.message,0)}};DANZZ.getHoursSincePublication=function(){try{var componentID=DANZZ.getComponent("category.componentType",
"article");if(componentID!==false){var issueTimestamp=DANZZ.getNested(digitalData,"component["+componentID+"].attributes.issueTimestamp","value");var displayTimestamp=new Date;if(issueTimestamp)return DANZZ.getTimeDifference(displayTimestamp,issueTimestamp,"h");else return""}else return""}catch(e){DANZZ.loggr("TMS ERROR gHSP: "+e.message,0)}};DANZZ.getHoursSinceLastUpdate=function(){try{var componentID=DANZZ.getComponent("category.componentType","article");if(componentID!==false){var updateTimestamp=
DANZZ.getNested(digitalData,"component["+componentID+"].attributes.updateTimestamp","value");var displayTimestamp=new Date;if(updateTimestamp)return DANZZ.getTimeDifference(displayTimestamp,updateTimestamp,"h");else return""}else return""}catch(e){DANZZ.loggr("TMS ERROR gHSLU: "+e.message,0)}};DANZZ.getIssueUpdateTS=function(){try{var componentID=DANZZ.getComponent("category.componentType","article");if(componentID!==false){var issueTimestamp=DANZZ.getNested(digitalData,"component["+componentID+"].attributes.issueTimestamp",
"value");var updateTimestamp=DANZZ.getNested(digitalData,"component["+componentID+"].attributes.updateTimestamp","value");var displayTimestamp=new Date;var hoursSincePublication="";if(issueTimestamp)hoursSincePublication=DANZZ.getTimeDifference(displayTimestamp,issueTimestamp,"h");var hoursSinceLastUpdate="";if(updateTimestamp)hoursSinceLastUpdate=DANZZ.getTimeDifference(displayTimestamp,updateTimestamp,"h");var returnValue=issueTimestamp+"|"+updateTimestamp+"|"+hoursSincePublication+"|"+hoursSinceLastUpdate;
if(returnValue.length>3)return returnValue;else return""}else return""}catch(e){DANZZ.loggr("TMS ERROR gIUTS: "+e.message,0)}};DANZZ.getMostRecentComponents=function(days){try{days=days||90;var ingressInitTime=DANZZ.getNested(dS,"ingress.initTS","typeof")=="object"?DANZZ.getNested(dS,"ingress.initTS","value").getTime():"";var today=new Date;var cookieExpDate=new Date(today);cookieExpDate.setDate(today.getDate()+3650);var componentID;var componentType;var componentSource=DANZZ.getNested(digitalData,
"page.attributes.c1.storeID","value");var refContainer="";var refContainerPos="";var refArticlePos="";var refFront="";var componentVariant="";var mostRecentComponentsArrayOld=[];var mostRecentComponentsArrayObjectNew=[];var mostRecentComponentsArrayStringNew=[];if(Bootstrapper.Cookies.test("ens_mrcntcmp"))mostRecentComponentsArrayOld=Bootstrapper.Cookies.get("ens_mrcntcmp").split(",");if(DANZZ.hasComponent("category.componentType","article")){var componentKey=DANZZ.getComponent("category.componentType",
"article");componentID=DANZZ.getNested(digitalData,"component["+componentKey+"].componentInfo.componentID","value");componentType=DANZZ.getNested(digitalData,"component["+componentKey+"].category.componentType","value");componentVariant=DANZZ.getCompVariant();if(DANZZ.getNested(digitalData,"page.pageInfo.referringElement","length")>0&&DANZZ.getNested(digitalData,"page.pageInfo.referringElement","value").indexOf("\x26|\x26")>-1){refContainer=DANZZ.getNested(digitalData,"page.pageInfo.referringElement",
"value").split("\x26|\x26")[1].split(";")[1];refContainerPos=DANZZ.getNested(digitalData,"page.pageInfo.referringElement","value").split("\x26|\x26")[1].split(";")[3];refArticlePos=DANZZ.getNested(digitalData,"page.pageInfo.referringElement","value").split("\x26|\x26")[1].split(";")[4];refFront=DANZZ.getNested(digitalData,"page.pageInfo.referringElement","value").split("\x26|\x26")[1].split(";")[0]}mostRecentComponentsArrayObjectNew.push({componentTS:ingressInitTime,componentID:componentID,componentType:componentType,
componentSource:componentSource,refContainer:refContainer,refContainerPos:refContainerPos,refArticlePos:refArticlePos,refFront:refFront,componentVariant:componentVariant});mostRecentComponentsArrayStringNew.push(ingressInitTime+";"+componentID+";"+componentType+";"+componentSource+";"+refContainer+";"+refContainerPos+";"+refArticlePos+";"+refFront+";"+componentVariant)}var mostRecentComponentsArrayOldLength=mostRecentComponentsArrayOld.length;mostRecentComponentsArrayOldLength=mostRecentComponentsArrayOldLength>
2?2:mostRecentComponentsArrayOldLength;for(var i=0;i<mostRecentComponentsArrayOldLength;i++){var componentDate=new Date(parseInt(mostRecentComponentsArrayOld[i].split(";")[0]));if(DANZZ.getTimeDifference(today,componentDate,"d")<days&&(mostRecentComponentsArrayOld[i].split(";")[1]!==componentID||mostRecentComponentsArrayOld[i].split(";")[2]!==componentType)){mostRecentComponentsArrayObjectNew.push({componentTS:parseInt(mostRecentComponentsArrayOld[i].split(";")[0]),componentID:mostRecentComponentsArrayOld[i].split(";")[1],
componentType:mostRecentComponentsArrayOld[i].split(";")[2],componentSource:mostRecentComponentsArrayOld[i].split(";")[3],refContainer:mostRecentComponentsArrayOld[i].split(";")[4],refContainerPos:mostRecentComponentsArrayOld[i].split(";")[5],refArticlePos:mostRecentComponentsArrayOld[i].split(";")[6],refFront:mostRecentComponentsArrayOld[i].split(";")[7],componentVariant:mostRecentComponentsArrayOld[i].split(";")[8]});mostRecentComponentsArrayStringNew.push(mostRecentComponentsArrayOld[i])}}Bootstrapper.Cookies.set("ens_mrcntcmp",
mostRecentComponentsArrayStringNew.join(","),cookieExpDate);return mostRecentComponentsArrayObjectNew}catch(e){DANZZ.loggr("TMS ERROR gMRCOMP: "+e.message,0)}};DANZZ.getUserFlags=function(){try{var hasTrial;var hasAdFree;var store=DANZZ.getC1Store()+":";if(DANZZ.getNested(digitalData,"user[0].profile[0].attributes.c1.hasTrial","length")>0)hasTrial=DANZZ.getNested(digitalData,"user[0].profile[0].attributes.c1.hasTrial","value")?"active":"inactive";else hasTrial="n/a";if(DANZZ.getNested(digitalData,
"user[0].profile[0].attributes.c1.hasAdFree","length")>0)hasAdFree=DANZZ.getNested(digitalData,"user[0].profile[0].attributes.c1.hasAdFree","value")?"active":"inactive";else hasAdFree="n/a";return store+hasTrial+","+store+hasAdFree}catch(e){DANZZ.loggr("TMS ERROR gUF: "+e.message,0)}};DANZZ.getC1Store=function(){var store=DANZZ.getNested(digitalData,"page.attributes.c1.storeID","value");if(store=="NZZ")switch(DANZZ.getNested(digitalData,"page.attributes.c1.site","value")){case "nzzas.nzz.ch":store=
"NZZAS";break;case "bellevue.nzz.ch":store="BLV";break;default:store="NZZ";break}if(store.length>0&&typeof store!="undefined")return store;else return"Unknown Store ID"};DANZZ.getSeoTitle=function(){try{if(DANZZ.hasComponent("category.componentType","article")){var componentKey=DANZZ.getComponent("category.componentType","article");if(DANZZ.getNested(window,"digitalData.component["+componentKey+"].attributes.headline","value")==document.title.substring(0,document.title.indexOf("|")-1))return"SEO Title not set";
else return document.title}else return document.title}catch(e){DANZZ.loggr("TMS ERROR gST1: "+e.message,0)}};DANZZ.isComponentPremium=function(){try{var result="";if(DANZZ.hasComponent("category.componentType","article")){var componentKey=DANZZ.getComponent("category.componentType","article");var isPremium=DANZZ.getNested(window,"digitalData.component["+componentKey+"].attributes.premium","value");if(isPremium===true||isPremium==="true")return"premium";else return"non-premium"}return result}catch(e){DANZZ.loggr("TMS ERROR iCP: "+
e.message,0)}};DANZZ.getChartbeatSections=function(){try{var cb_sections=[];if(DANZZ.getNested(digitalData,"page.category","typeof")!=="undefined"){if(digitalData.page.category.primaryCategory)cb_sections.push(digitalData.page.category.primaryCategory);if(digitalData.page.category.subCategory1)cb_sections.push(digitalData.page.category.subCategory1);if(digitalData.page.category.subCategory2)cb_sections.push(digitalData.page.category.subCategory2);if(DANZZ.isComponentPremium()=="premium")cb_sections.push("premium");
if(DANZZ.getNested(digitalData,"component[0].attributes.experiment.id","typeof")=="string")cb_sections.push("experiment");if(dS.ingress.publishPath.split("-")[0]!="prod")cb_sections.push(dS.ingress.publishPath)}return cb_sections.join().split(" \x26 ").join("-")}catch(e){DANZZ.loggr("TMS ERROR gCS: "+e.message,0)}};DANZZ.getChartbeatPath=function(){try{var publishPathArray=["nzz","nzznews","blv","nzzas","nlz","nlznews","sgt","sgtnews","m","aaz","aaznews","bat","batnews","bzb","bzbnews","gtb","gtbnews",
"liz","liznews","olt","oltnews","soz","soznews","saw"];var cbPath;if(typeof digitalData!="undefined"&&DANZZ.getNested(digitalData,"page.pageInfo.pageName","typeof")=="undefined"){digitalData.page=digitalData.page||{};digitalData.page.pageInfo=digitalData.page.pageInfo||{};digitalData.page.pageInfo.pageName=window.location.pathname}if(publishPathArray.indexOf(dS.ingress.publishPath.split("-")[1])>-1&&DANZZ.getNested(digitalData,"page.pageInfo.pageName","value"))if(DANZZ.hasComponent("category.componentType",
"article")&&DANZZ.getNested(digitalData,"page.pageInfo.pageID","value"))if(DANZZ.getNested(digitalData,"component[0].attributes.experiment.id","typeof")=="string")cbPath="/B-"+digitalData.page.pageInfo.pageID;else cbPath="/"+digitalData.page.pageInfo.pageID;else if(dS.cfg.technology=="webview"&&DANZZ.getNested(digitalData,"page.category.pageType","value")=="home")if(DANZZ.getNested(digitalData,"user[0].profile[0].attributes.c1.clientCountryCode","value").toLowerCase()=="de")cbPath="/deutschland";
else cbPath="/";else cbPath=DANZZ.getNested(digitalData,"page.pageInfo.pageName","value");else if(Bootstrapper.ensightenOptions.publishPath.split("-")[1]=="pil"&&DANZZ.hasComponent("category.componentType","article")&&DANZZ.getNested(digitalData,"page.pageInfo.pageID","value"))cbPath="/artikel/"+digitalData.page.pageInfo.pageID;else if(Bootstrapper.ensightenOptions.publishPath.split("-")[1]=="pil"&&document.location.pathname.search("/artikel/")===0)cbPath=/(\/artikel\/[0-9]*)[\/]?/.exec(document.location.pathname)[1];
else cbPath=window.location.pathname;return dS.cfg.cb.domain+cbPath}catch(e){DANZZ.loggr("TMS ERROR gCP: "+e.message,0)}};DANZZ.getChartbeatTitle=function(){try{if(DANZZ.hasComponent("category.componentType","article")){var componentKey=DANZZ.getComponent("category.componentType","article");return(DANZZ.getNested(digitalData,"component["+componentKey+"].attributes.catchline","length")>0?DANZZ.getNested(digitalData,"component["+componentKey+"].attributes.catchline","value")+": ":"")+DANZZ.getNested(digitalData,
"component["+componentKey+"].attributes.headline","value")}else if(location.pathname.search("tag_container")>-1&&DANZZ.getNested(digitalData,"page.category.primaryCategory","value"))return digitalData.page.category.primaryCategory;else if(DANZZ.getNested(digitalData,"page.category.pageType","value")=="home")if(DANZZ.getNested(digitalData,"user[0].profile[0].attributes.c1.clientCountryCode","value").toLowerCase()=="de")return document.title+" - DE";else return document.title}catch(e){DANZZ.loggr("TMS ERROR gCT: "+
e.message,0)}};DANZZ.getCreDocType=function(){try{if(DANZZ.getNested(digitalData,"page.attributes.c1.docType","value"))return DANZZ.getNested(digitalData,"page.attributes.c1.docType","value");else{var pageType=DANZZ.getNested(digitalData,"page.category.pageType","value");switch(pageType){case "article":return"article";case "section":return"section";case "image gallery":return"gallery";case "gallery":return"gallery";case "video gallery":return"video";default:return"section"}}}catch(e){DANZZ.loggr("TMS ERROR gCDT: "+
e.message,0)}};DANZZ.getCreHeading=function(){try{if(typeof digitalData!=="undefined")if(DANZZ.getNested(digitalData,"component[0].category.componentType","value")=="article")return digitalData.component[0].attributes.headline;else if(DANZZ.getNested(digitalData,"page.category","typeof")!=="undefined")if(digitalData.page.category.subCategory3)return digitalData.page.category.subCategory3;else if(digitalData.page.category.subCategory2)return digitalData.page.category.subCategory2;else if(digitalData.page.category.subCategory1)return digitalData.page.category.subCategory1;
else{if(digitalData.page.category.primaryCategory)return digitalData.page.category.primaryCategory}else return"";else return""}catch(e){DANZZ.loggr("TMS ERROR gCH: "+e.message,0)}};DANZZ.getPageHierarchy=function(){try{if(typeof digitalData!=="undefined")return DANZZ.getNested(digitalData,"page.category.primaryCategory","value")+"|"+DANZZ.getNested(digitalData,"page.category.subCategory1","value")+"|"+DANZZ.getNested(digitalData,"page.category.subCategory2","value")+"|"+DANZZ.getNested(digitalData,
"page.category.subCategory3","value");else if(window.location.pathname=="/")return"homepage";else if(/\/(.*)\/.*$/.test(window.location.pathname))return/\/(.*)\/.*$/.exec(window.location.pathname)[1].replace(/[\/]+/gi,"|");else return window.location.pathname.replace("/","")}catch(e){DANZZ.loggr("TMS ERROR gPH: "+e.message,0)}};DANZZ.getPageName=function(){try{if((Bootstrapper.ensightenOptions.publishPath.split("-")[1]=="vamp"||Bootstrapper.ensightenOptions.publishPath.split("-")[1]=="nzznews"||DANZZ.getNested(digitalData,
"page.category.pageType","value")=="accelerated")&&DANZZ.getNested(digitalData,"page.pageInfo.pageName","typeof")!=="undefined")return digitalData.page.pageInfo.pageName;else if(window.location.pathname!="/")return window.location.pathname;else return window.location.host+window.location.pathname}catch(e){DANZZ.loggr("TMS ERROR gPN: "+e.message,0)}};DANZZ.getCampaignCode=function(){try{if(DANZZ.getURLParam("trco","param")!="")return DANZZ.getURLParam("trco","param");else if(DANZZ.getURLParam("KAVZ",
"param")!="")return DANZZ.getURLParam("KAVZ","param");else if(DANZZ.getURLParam("kavz","param")!="")return DANZZ.getURLParam("kavz","param");else if(DANZZ.getURLParam("Kavz","param")!="")return DANZZ.getURLParam("Kavz","param");else if(DANZZ.getURLParam("extcid","param")!="")return DANZZ.getURLParam("extcid","param");else return undefined}catch(e){DANZZ.loggr("TMS ERROR gCC1: "+e.message,0)}};DANZZ.getLandingPageID=function(){try{if(DANZZ.getURLParam("lp","param")!="")return DANZZ.getURLParam("lp",
"param");else if(DANZZ.getURLParam("LP","param")!="")return DANZZ.getURLParam("LP","param");else if(DANZZ.getURLParam("Lp","param"))return DANZZ.getURLParam("Lp","param");else if(DANZZ.getURLParam("lP","param"))return DANZZ.getURLParam("lP","param");else return undefined}catch(e){DANZZ.loggr("TMS ERROR gLPID: "+e.message,0)}};DANZZ.getMarketingChannel=function(){try{var marketingChannel=DANZZ.getURLParam("mktcid","param")+"|"+DANZZ.getURLParam("mktcval","param");if(marketingChannel.length>1)return marketingChannel;
else return""}catch(e){DANZZ.loggr("TMS ERROR gMKTC: "+e.message,0)}};DANZZ.getComponentCategories=function(){try{var componentKey;if(DANZZ.hasComponent("category.componentType","article"))componentKey=DANZZ.getComponent("category.componentType","article");else if(DANZZ.hasComponent("category.componentType","image gallery"))componentKey=DANZZ.getComponent("category.componentType","image gallery");if(componentKey!=undefined)return DANZZ.getNested(digitalData,"component["+componentKey+"].category.primaryCategory",
"value")+"|"+DANZZ.getNested(digitalData,"component["+componentKey+"].category.subCategory1","value")+"|"+DANZZ.getNested(digitalData,"component["+componentKey+"].category.subCategory2","value")+"|"+DANZZ.getNested(digitalData,"component["+componentKey+"].category.subCategory3","value");else return""}catch(e){DANZZ.loggr("TMS ERROR gCC: "+e.message,0)}};DANZZ.getCompVariant=function(){try{if(DANZZ.hasComponent("category.componentType","article"))if(DANZZ.getNested(digitalData,"component[0].attributes.experiment.id",
"typeof")=="string")return"B";else return"Control"}catch(e){DANZZ.loggr("TMS ERROR gCV: "+e.message,0)}};DANZZ.getGenericPageType=function(){try{if(DANZZ.hasComponent("category.componentType","article"))if(DANZZ.getNested(digitalData,"page.category.pageType","value")=="briefing")return"briefing";else return"article";else if(DANZZ.getNested(digitalData,"page.category.pageType","value"=="category")){var v;switch(DANZZ.getNested(digitalData,"page.category.primaryCategory","value")){case "Neueste Artikel":v=
"Neueste Artikel";break;case "Suche":v="search";break;case "Meine NZZ":v="mnzz";break;case "Meine NZZaS":v="mnzzas";break;case "Meine LZ":v="mlz";break;case "Mein Tagblatt":v="mtb";break;default:v=DANZZ.getNested(digitalData,"page.category.pageType","value");break}return v.toLowerCase()}}catch(e){DANZZ.loggr("TMS ERROR gGPT: "+e.message,0)}};DANZZ.getProducts=function(){try{var products=[];var productString;if(typeof digitalData!=="undefined")if(DANZZ.getNested(digitalData,"cart.item","length")>0)for(i=
0;i<digitalData.cart.item.length;i++){productString=";";if(DANZZ.getNested(digitalData,"cart.item["+i+"].productInfo.productID","value"))productString=productString+digitalData.cart.item[i].productInfo.productID;else if(DANZZ.getNested(digitalData,"cart.item["+i+"].productInfo.productName","value"))productString=productString+digitalData.cart.item[i].productInfo.productName;if(DANZZ.getNested(digitalData,"cart.item["+i+"].attributes.plan","value"))productString=productString+"\u00b7"+digitalData.cart.item[i].attributes.plan;
productString=productString+";";if(DANZZ.getNested(digitalData,"cart.item["+i+"].quantity","value"))productString=productString+digitalData.cart.item[i].quantity;else productString=productString+"1";productString=productString+";";if(DANZZ.getNested(digitalData,"cart.item["+i+"].price.priceWithTax","value"))productString=productString+digitalData.cart.item[i].price.priceWithTax;else productString=productString+"0";products.push(productString)}else if(DANZZ.getNested(digitalData,"transaction.item",
"length")>0)for(i=0;i<digitalData.transaction.item.length;i++){productString=";";if(DANZZ.getNested(digitalData,"transaction.item["+i+"].productInfo.productID","value"))productString=productString+digitalData.transaction.item[i].productInfo.productID;else if(DANZZ.getNested(digitalData,"transaction.item["+i+"].productInfo.productName","value"))productString=productString+digitalData.transaction.item[i].productInfo.productName;if(DANZZ.getNested(digitalData,"transaction.item["+i+"].attributes.plan",
"value"))productString=productString+"\u00b7"+digitalData.transaction.item[i].attributes.plan;productString=productString+";";if(DANZZ.getNested(digitalData,"transaction.item["+i+"].quantity","value"))productString=productString+digitalData.transaction.item[i].quantity;else productString=productString+"1";productString=productString+";";if(DANZZ.getNested(digitalData,"transaction.item["+i+"].price.priceWithTax","value"))productString=productString+digitalData.transaction.item[i].price.priceWithTax;
else productString=productString+"0";products.push(productString)}else if(DANZZ.getNested(digitalData,"product","length")>0)for(i=0;i<digitalData.product.length;i++){productString=";";if(DANZZ.getNested(digitalData,"product["+i+"].productInfo.productID","value"))productString=productString+digitalData.product[i].productInfo.productID;else if(DANZZ.getNested(digitalData,"product["+i+"].productInfo.productName","value"))productString=productString+digitalData.product[i].productInfo.productName;if(DANZZ.getNested(digitalData,
"product["+i+"].attributes.plan","value"))productString=productString+"\u00b7"+digitalData.product[i].attributes.plan;products.push(productString)}if(products.length>0)return products.join(",");else return""}catch(e){DANZZ.loggr("TMS ERROR getProducts: "+e.message,0)}};DANZZ.getProductIDs=function(){try{var products=[];var productArrayLength=0;var productArrayLocation;if(DANZZ.getNested(digitalData,"transaction.item","length")>0){productArrayLength=DANZZ.getNested(digitalData,"transaction.item","length");
productArrayLocation="transaction.item"}else if(DANZZ.getNested(digitalData,"cart.item","length")>0){productArrayLength=DANZZ.getNested(digitalData,"cart.item","length");productArrayLocation="cart.item"}else if(DANZZ.getNested(digitalData,"product","length")>0){productArrayLength=DANZZ.getNested(digitalData,"product","length");productArrayLocation="product"}if(productArrayLength>0)for(i=0;i<productArrayLength;i++)products.push(DANZZ.getNested(digitalData,productArrayLocation+"["+i+"].productInfo.productID",
"value"));products=products.filter(function(item,pos,self){return self.indexOf(item)==pos});if(products.length>0)return products.join(",");else return""}catch(e){DANZZ.loggr("TMS ERROR gPIDs: "+e.message,0)}};DANZZ.getProductNames=function(){try{var products=[];var productArrayLength=0;var productArrayLocation;if(DANZZ.getNested(digitalData,"transaction.item","length")>0){productArrayLength=DANZZ.getNested(digitalData,"transaction.item","length");productArrayLocation="transaction.item"}else if(DANZZ.getNested(digitalData,
"cart.item","length")>0){productArrayLength=DANZZ.getNested(digitalData,"cart.item","length");productArrayLocation="cart.item"}else if(DANZZ.getNested(digitalData,"product","length")>0){productArrayLength=DANZZ.getNested(digitalData,"product","length");productArrayLocation="product"}if(productArrayLength>0)for(i=0;i<productArrayLength;i++)products.push(DANZZ.getNested(digitalData,productArrayLocation+"["+i+"].productInfo.productName","value"));products=products.filter(function(item,pos,self){return self.indexOf(item)==
pos});if(products.length>0)return products.join(",");else return""}catch(e){DANZZ.loggr("TMS ERROR gPN1: "+e.message,0)}};DANZZ.getProductNamesOrdered=function(){try{var today=new Date;var cookieExpDate=new Date(today);cookieExpDate.setDate(today.getDate()+3650);var products=[];var productName;if(Bootstrapper.Cookies.test("ens_prdnamsord"))products=Bootstrapper.Cookies.get("ens_prdnamsord").split(",");if(DANZZ.getNested(digitalData,"transaction.item","length")>0)for(i=0;i<digitalData.transaction.item.length;i++){if(DANZZ.getNested(digitalData,
"transaction.item["+i+"].productInfo.productName","value"))productName=digitalData.transaction.item[i].productInfo.productName;else if(DANZZ.getNested(digitalData,"transaction.item["+i+"].productInfo.productID","value"))productName=digitalData.transaction.item[i].productInfo.productID;else productName="unknown";products.push(productName)}products=products.filter(function(item,pos,self){return self.indexOf(item)==pos});if(products.length>0){Bootstrapper.Cookies.set("ens_prdnamsord",products.join(","),
cookieExpDate);return products.join(",")}else return""}catch(e){DANZZ.loggr("TMS ERROR gPNO: "+e.message,0)}};DANZZ.getEnsightenVersion=function(){try{return Bootstrapper.ensightenOptions.bootstrapVersion}catch(e){DANZZ.loggr("TMS ERROR gEV: "+e.message,0)}};DANZZ.getPageInstanceID=function(){try{if(DANZZ.getNested(digitalData,"pageInstanceID","length")>0)return DANZZ.getNested(digitalData,"pageInstanceID","value");else return window.location.host+window.location.pathname}catch(e){DANZZ.loggr("TMS ERROR gPII: "+
e.message,0)}};DANZZ.getLangGeo=function(){try{var langGeoRegion="";if(DANZZ.getNested(digitalData,"page.pageInfo","typeof")!=="undefined"){if(digitalData.page.pageInfo.language)langGeoRegion=digitalData.page.pageInfo.language;langGeoRegion=langGeoRegion+"|";if(digitalData.page.pageInfo.geoRegion)langGeoRegion=langGeoRegion+digitalData.page.pageInfo.geoRegion}return langGeoRegion}catch(e){DANZZ.loggr("TMS ERROR gLG: "+e.message,0)}};DANZZ.getRefElement=function(){try{if(DANZZ.getURLParam("rflmnt",
"param")!=""&&typeof digitalData!="undefined"){digitalData.page=digitalData.page||{};digitalData.page.pageInfo=digitalData.page.pageInfo||{};digitalData.page.pageInfo.referringElement=decodeURIComponent(DANZZ.getURLParam("rflmnt","param"))}if(DANZZ.getNested(digitalData,"page.pageInfo.referringElement","length")!=0&&DANZZ.getNested(digitalData,"page.pageInfo.referringElement","typeof")=="string"){var referringElement=DANZZ.getNested(digitalData,"page.pageInfo.referringElement","value").split("\x26|\x26")[0];
var referringElementItems=referringElement.split(";");if(typeof referringElementItems[3]!="undefined")referringElementItems[3]=referringElementItems[3].replace(/[ ,]+/g,"-").toLowerCase();return referringElementItems.join(";")}else return""}catch(e){DANZZ.loggr("TMS ERROR gRE: "+e.message,0)}};DANZZ.getOnSrchFilter=function(){try{var searchFilter="";var searchFilterArray=[];if(DANZZ.getNested(digitalData,"page.pageInfo.onsiteSearchFilter.searchFilterPeriod","value"))searchFilterArray.push("period|"+
digitalData.page.pageInfo.onsiteSearchFilter.searchFilterPeriod.split(",").join(" "));if(DANZZ.getNested(digitalData,"page.pageInfo.onsiteSearchFilter.searchFilterCategory","value"))searchFilterArray.push("category|"+digitalData.page.pageInfo.onsiteSearchFilter.searchFilterCategory.split(",").join(" "));return searchFilter+searchFilterArray.join(",")}catch(e){DANZZ.loggr("TMS ERROR gOSF: "+e.message,0)}};DANZZ.getCompAttributeData=function(name){try{if(DANZZ.hasComponent("category.componentType",
"article")){var componentKey=DANZZ.getComponent("category.componentType","article");return DANZZ.getNested(digitalData,"component["+componentKey+"].attributes["+name+"]","value")}}catch(e){DANZZ.loggr("TMS ERROR gCAD: "+e.message,0)}};DANZZ.getPreferredColorScheme=function(){try{if(document.querySelector("html.dark-mode"))return"dark";if(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches)return"dark";return"light"}catch(e){DANZZ.loggr("TMS ERROR gPCS: "+e.message,0)}}},3731039,
[3715294],591419,[587003],24);Bootstrapper.getServerComponent(Bootstrapper.getExtraParams ? Bootstrapper.getExtraParams() : undefined);}})();